<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><title>指令集体系结构学习笔记 | Aurorp1g's Blog</title><meta name="keywords" content="操作系统"><meta name="author" content="Aurorp1g"><meta name="copyright" content="Aurorp1g"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#18171d"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="指令集体系结构学习笔记"><meta name="application-name" content="指令集体系结构学习笔记"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#18171d"><meta property="og:type" content="article"><meta property="og:title" content="指令集体系结构学习笔记"><meta property="og:url" content="https://aurorp1g.github.io/posts/3a102641.html"><meta property="og:site_name" content="Aurorp1g Blog"><meta property="og:description" content="ISA 学习笔记一、基础架构与指令系统1.1 指令编码    字段 位宽 RISC-V 示例 说明     opcode 7 b 0110011 主操作码，决定格式   rd 5 b x0–x31 目的寄存器   funct3 3 b 000&amp;#x3D;ADD 子操作码   rs1 5 b 源寄存器 1"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://aurorp1g.github.io/img/imjflelh.png"><meta property="article:author" content="Aurorp1g"><meta property="article:tag" content="程序设计,网络安全,CTF,算法,代码,Aurorp1g"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://aurorp1g.github.io/img/imjflelh.png"><meta name="description" content="ISA 学习笔记一、基础架构与指令系统1.1 指令编码    字段 位宽 RISC-V 示例 说明     opcode 7 b 0110011 主操作码，决定格式   rd 5 b x0–x31 目的寄存器   funct3 3 b 000&amp;#x3D;ADD 子操作码   rs1 5 b 源寄存器 1"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://aurorp1g.github.io/posts/3a102641.html"><link rel="preconnect" href="//cdn.cbd.int"><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="google-site-verification" content="xxx"><meta name="baidu-site-verification" content="code-xxx"><meta name="msvalidate.01" content="xxx"><link rel="stylesheet" href="https://npm.elemecdn.com/justlovesmile-static/icon/font-awesome-animation-1.1.1/css/font-awesome-animation.min.css"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="/css/swiper.min.css" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG={linkPageTop:void 0,peoplecanvas:{enable:!0,img:"/assets/sticky/open-peeps-sheet.png"},postHeadAiDescription:{enable:!0,gptName:"Aurorp1g",mode:"local",switchBtn:!1,btnLink:"https://afdian.net/item/886a79d4db6711eda42a52540025c377",randomNum:3,basicWordCount:1e3,key:"xxxx",Referer:"https://xx.xx/"},diytitle:void 0,LA51:void 0,greetingBox:{enable:!0,default:"晚上好👋",list:[{greeting:"晚安😴",startTime:0,endTime:5},{greeting:"早上好鸭👋, 祝你一天好心情！",startTime:6,endTime:9},{greeting:"上午好👋, 状态很好，鼓励一下～",startTime:10,endTime:10},{greeting:"11点多啦, 在坚持一下就吃饭啦～",startTime:11,endTime:11},{greeting:"午安👋, 宝贝",startTime:12,endTime:14},{greeting:"🌈充实的一天辛苦啦！",startTime:14,endTime:18},{greeting:"19点喽, 奖励一顿丰盛的大餐吧🍔。",startTime:19,endTime:19},{greeting:"晚上好👋, 在属于自己的时间好好放松😌~",startTime:20,endTime:24}]},twikooEnvId:"",commentBarrageConfig:void 0,music_page_default:"custom",root:"/",preloader:{source:2},friends_vue_info:void 0,navMusic:!0,mainTone:void 0,authorStatus:{skills:["🤖️ 数码科技爱好者","🔍 分享与热心帮助","🏠 智能家居小能手","🔨 设计开发一条龙","🤝 专修交互与设计","🏃 脚踏实地行动派","🧱 团队小组发动机","💢 壮汉人狠话不多"]},algolia:void 0,localSearch:{path:"/search.xml",preload:!0,languages:{hits_empty:"找不到您查询的内容：${query}"}},translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"繁",msgToSimplifiedChinese:"简",rightMenuMsgToTraditionalChinese:"转为繁体",rightMenuMsgToSimplifiedChinese:"转为简体"},noticeOutdate:{limitDay:365,position:"top",messagePrev:"距离上次更新已经过去了",messageNext:"天，文章的内容可能已经过时。"},highlight:{plugin:"highlight.js",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:230},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,simplehomepage:!0,post:!1},runtime:"天",date_suffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:{copy:!0,copyrightEbable:!1,limitCount:50,languages:{author:"作者: Aurorp1g",link:"链接: ",source:"来源: Aurorp1g Blog",info:"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。",copySuccess:"复制成功，复制和转载请标注本文地址"}},lightbox:"fancybox",Snackbar:{chs_to_cht:"你已切换为繁体",cht_to_chs:"你已切换为简体",day_to_night:"你已切换为深色模式",night_to_day:"你已切换为浅色模式",bgLight:"#425AEF",bgDark:"#1f1f1f",position:"top-center"},source:{justifiedGallery:{js:"https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js",css:"https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css"}},isPhotoFigcaption:!1,islazyload:!0,isAnchor:!1,shortcutKey:void 0,autoDarkmode:!1}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={configTitle:"Aurorp1g Blog",title:"指令集体系结构学习笔记",postAI:"这篇文章系统梳理了指令集体系结构（ISA）的核心知识体系，从抽象规范到硬件实现，构建了完整的知识框架。内容涵盖ISA的层次结构（抽象规范层、微架构层、系统软件层、应用层）、分类方式（CISC/RISC/VLIW及操作数存储类型）、关键设计要素（指令格式、寻址模式、特权与异常模型），以及与系统生态的关联（二进制兼容性、编译器支持、扩展案例）。通过丰富的表格对比和实例说明，清晰展示了ISA设计的核心原理与实践应用。,文章深入解析了ISA设计的技术细节，包括RISC-V指令编码格式（ opcode/rd/funct3等字段定义）、寻址模式（寄存器/立即数/基址+偏移等）、寄存器调用约定（LP64D标准）及特权级机制（M/S/U三级）。重点讨论了向量扩展（RVV）、位操作扩展（ZB*）等现代ISA特性，并提供了性能优化（如缓存一致性、分支预测）、工具链使用（Spike模拟器、GDB调试）和微架构实现（物理寄存器堆、乘法器设计）的专业指导，为处理器设计与优化提供了系统性参考。",pageFillDescription:"ISA 学习笔记, 一、基础架构与指令系统, 1.1 指令编码, 1.2 寻址模式（RISC-V 基整数）, 1.3 寄存器与调用约定（LP64D）, 1.4 参考参数速查, 二、系统架构与特权机制, 2.1 特权级与 CSR（控制与状态寄存器）, 2.2 中断委托, 2.3 异常处理流程（精确）, 2.4 异常现场恢复, 2.5 中断延迟预算（最小）, 三、内存管理, 3.1 虚拟内存（SV39）, 3.2 页表遍历延迟（实测模拟）, 3.3 地址空间标识（ASID）, 3.4 地址空间布局（Sv39 Linux）, 3.5 数据对齐检查（用户态）, 四、缓存系统与一致性, 4.1 缓存设计量化（64 KiB L1D 示例）, 4.2 缓存一致性（RVWMO）, 4.3 访存一致性模型（RVWMO 规则摘）, 4.4 多核缓存一致性（MESI 简化）, 4.5 缓存锁定（cache lockdown）, 4.6 指令预取（stride）算法, 4.7 指令存储能量优化（banked I-cache）, 五、扩展指令集, 5.1 常见扩展, 5.2 位操作扩展（ZB*）指令, 5.3 指令压缩（RVC）编码速查, 5.4 向量 ISA（RVV v1.0）, 5.5 向量长度计算（RVV）, 5.6 向量掩码执行模型, 5.7 向量长度寄存器（vl）限制, 5.8 向量归约（vredsum）伪代码, 5.9 向量归约峰值公式, 5.10 向量浮点异常聚合（vxsat）, 六、流水线与性能优化, 6.1 流水线冒险与优化（5 级经典）, 6.2 超标量 amp 动态调度, 6.3 指令发射策略对比（1-wide vs 4-wide）, 6.4 乱序窗口大小权衡, 6.5 分支预测器对比, 6.6 分支预测器训练（启动）, 6.7 分支偏移范围, 6.8 返回地址栈（RAS）, 6.9 取指队列（IFQ）深度计算, 6.10 指令融合（Fusion）规则 — 双发射示例, 6.11 指令融合检测（硬件）, 七、性能计数与调试, 7.1 性能计数（硬件事件）, 7.2 性能计数器事件编码（RISC-V）, 7.3 硬件性能计数器（HPM）微架构, 7.4 性能计数采样（perf record）, 7.5 性能调试模板（RISC-V Linux）, 7.6 性能采样记录（Linux perf）, 7.7 硬件性能断点（trigger module）, 7.8 调试模块（RISC-V Debug Spec 1.0）, 7.9 硅后调试（eFUSE 触发）, 7.10 硅后调试触发（交叉触发）, 7.11 指令 trace 压缩（TurboTrace）, 7.12 指令 TRACE 格式（Efficient Trace）, 八、工具链与编程实践, 8.1 工具链, 8.2 编译器内在函数（RVV 示例）, 8.3 向量加载分段（strip-mining）代码, 8.4 指令调度算法（编译器后端）, 8.5 寄存器分配算法（线性扫描伪码）, 九、微架构设计与实现, 9.1 物理寄存器堆（PRF）参数, 9.2 快速乘法实现（Booth-464×64）, 9.3 浮点乘加（fmadd.d）数据路径, 9.4 浮点异常聚合（fcsr）, 9.5 同时多线程（SMT2）资源复制, 9.6 片上网络（NoC）路由, 9.7 微码与复杂指令拆解（x86 对比）, 9.8 微码 ROM 格式（x86 风格参考）, 十、功耗、面积与时序, 10.1 功耗分解（5 级 RV64GC28 nm1 GHz）, 10.2 功耗墙（Dennard 终结）, 10.3 热设计功耗（TDP）估算, 10.4 指令缓存能量/访问, 10.5 功耗断点测量流程, 10.6 功耗估算脚本（PrimeTime PX）, 10.7 时钟门控检查（CLP）, 10.8 面积预算（28 nm不含 SRAM）, 10.9 片上 SRAM 面积模型, 10.10 片上 SRAM 位单元参数（28 nm）, 10.11 参考开源 core 面积对比, 10.12 关键路径方程（时序）, 10.13 关键路径拆解（post-layout）, 10.14 关键信号延迟（28 nm典型）, 10.15 后端接口时序（AXI4-Lite 从机）, 10.16 动态频率调整（DVFS 表）, 十一、安全与可靠性, 11.1 安全扩展, 11.2 安全启动（ROM → SPL → Loader）, 11.3 可靠性指标, 十二、验证与设计流程, 12.1 验证覆盖率目标, 12.2 门级仿真速度, 12.3 设计检查清单, 12.4 设计流程里程碑, 12.5 设计签核清单, 12.6 设计收敛指标（最终）, 十三、文档与总结, 13.1 文档交付清单, 13.2 参考缩写汇总, 13.3 关键公式, 13.4 总结公式速记, 13.5 关键方程速查（最终）, 13.6 结项黄金检查, 13.7 常见指令延迟表（SiFive U74 1.2 GHz）学习笔记一基础架构与指令系统指令编码字段位宽示例说明主操作码决定格式目的寄存器子操作码源寄存器源寄存器二级子操作码定长四字节对齐立即数分阶段拼合格式寻址模式基整数模式汇编模板计算用途寄存器操作立即数常数偏移基址偏移全局局部变量相对分支跳转绝对长跳转高位寄存器与调用约定寄存器作用保存者零寄存器返回地址栈指针全局指针线程指针临时保存参数返回值栈对齐前浮点参数寄存器参考参数速查参数单位寄存器虚拟地址对齐最大指令中断线线二系统架构与特权机制特权级与控制与状态寄存器级别编码可见性典型全内核用户地址读写指令立即数变体中断委托位异常置转态示例值把等下放到进入后最高位表示中断异常处理流程精确停止当前流水线保存写寄存器跳转到执行返回异常现场恢复前需恢复当前特权可选浮点状态硬件自动原子完成中断延迟预算最小同步异常进入态查表跳转总共嵌套加速硬件自动保存三内存管理虚拟内存虚拟地址物理地址三级页表索引页大小格式未命中硬件遍历可软件补充页表遍历延迟实测模拟参数数值页表遍历大页覆盖仅需项地址空间标识进程同样刷新仅当切换或执行地址空间布局中间空洞用户内核各数据对齐检查用户态硬件产生地址触发例外允许非对齐扩展软件修复内核后返回四缓存系统与一致性缓存设计量化示例架构行路组相联组索引位块偏移标签位物理地址物理命中率含命中缓存一致性内存模型允许写缓冲非多副本同步原语原子指令访存一致性模型规则摘同一内存顺序保持对同一地址全局全序强制前后不能重排加载禁止后续提前存储禁止前面滞后实现加载队列项存储缓冲项保序位向量多核缓存一致性简化状态消息转换示例本地读本地写目录法位向量核缓存锁定方式索引掩码锁定至接口最大锁定组容量指令预取算法表项项带符号覆盖矩阵访问行指令存储能量优化选通其余动态功耗面积控制五扩展指令集常见扩展扩展说明新增状态乘除法原子单双浮点压缩指令对齐向量位操作虚拟化模式位操作扩展指令指令功能延迟前导零尾随零人口数位提取实现树形级指令压缩编码速查格式映射压缩率平均静态压缩向量向量长度寄存器向量寄存器组宽度屏蔽寄存器按位控制内存访问单位步幅加载元素乘加峰值向量长度计算例元素寄存器分组组成超寄存器峰值带宽向量掩码执行模型仅第元素活跃结果掩码关闭元素仍消耗发射带宽有效利用率向量长度寄存器限制写自动约束读取为只读向量归约伪代码清零累加器每段归约到最终标量和向量归约峰值公式例换算向量浮点异常聚合定点饱和浮点无效写后需软件读清位置六流水线与性能优化流水线冒险与优化级经典阶段功能冒险类型化解手段取指控制饱和计数译码读寄存器数据前向转发执行计算地址数据编译器插入调度延迟槽访存存储加载动态调度存储集预测写回结构分离指令数据分支惩罚预测错误率错误恢复周期取消延迟槽硬件负责冲刷超标量动态调度发射宽度每周期同时解码条典型保留站源操作数缓存避免维护精确异常与顺序提交重命名寄存器物理寄存器寄存器指令发射策略对比策略每周期发射重排缓冲寄存器堆口峰值面积代价顺序乱序乱序边际收益时提升乱序窗口大小权衡窗口重排缓冲物理寄存器性能提升面积代价选值项为能效拐点分支预测器对比类型存储准确率硬件开销饱和计数历史表压缩标签恢复惩罚前端级预测错误代价分支预测器训练启动冷启动清零首次遇见静态预测向后跳转向前训练阈值饱和条目饱和后准确率分支偏移范围指令立即数位缩放范围链接器松弛调用序列返回地址栈深度项匹配常见调用链压栈且出栈且预测准确率取指队列深度计算目标掩盖缺失周期带宽需求宽指令周期周期深度缺失周期带宽项实现双端口两读一写指令融合规则双发射示例序列融合后条件收益无无融合无无中间中断节省发射槽节省译码能级融合窗口指令周期深度硬件预解码标记发射队列匹配指令融合检测硬件预解码标记匹配窗口相邻指令面积关键路径七性能计数与调试性能计数硬件事件选择事件计数常用事件性能计数器事件编码编号事件描述时钟周期时间恒定时基退休指令自定义事件硬件性能计数器微架构单元数可编程固定事件选择输入多路器级溢出中断触发特权过滤按特权掩码性能计数采样每事件采样采样精度开销性能调试模板事件编码性能采样记录原始事件编码硬件性能断点匹配数据地址数据值可配动作停机单步开启中断核心资源触发器位匹配器调试模块线指令抽象命令程序缓冲指令触发器个支持地址数据匹配硅后调试触发触发条件匹配值动作时钟停扫描链报警面积触发器硅后调试触发交叉触发矩阵任意输入任意输出延迟用于多核同步停时钟指令压缩算法差分平均指令存储循环缓冲可存指令带宽指令原始压缩后指令接口并行需时钟指令格式差异可选指令数平均带宽指令封装并行时钟存储指令八工具链与编程实践工具链汇编反汇编模拟调试编译器内在函数示例设置向量长度生成单条无循环展开向量加载分段代码动态编译器自动展开循环开销指令段指令调度算法编译器后端构建依赖图列表调度优先级深度寄存器分配图着色溢出插入软件流水线周期寄存器分配算法线性扫描伪码复杂度溢出率当物理寄存器架构寄存器九微架构设计与实现物理寄存器堆参数架构寄存器物理深度读取口功耗读口面积快速乘法实现部分积行压缩至行延迟面积浮点乘加数据路径阶段乘法积阶段对齐移位阶段压缩行阶段超前进位加法阶段规格化舍入延迟全流水吞吐量浮点异常聚合无效操作除零上溢下溢不精确异常时置位不中断软件查询或设清同时多线程资源复制结构数量共享复制物理寄存器复制重排缓冲静态分区加载队列动态共享共享吞吐提升面积片上网络路由路由无死锁包格式链路延迟跳链路功耗微码与复杂指令拆解对比指令拆分成项行命中节省流水级对比无微码直接单指令微码格式风格参考包含典型容量项功耗读取十功耗面积与时序功耗分解级模块比例绝对时钟树寄存器堆执行单元其他总计活动功耗墙终结频率功耗暗硅时代仅面积可同时全速运行热设计功耗估算指令缓存能量访问总线宽对比寄存器堆功耗断点测量流程设置性能计数器周期读取平台电流采样同步时间戳计算归一化到功耗估算脚本精度硅测量时钟门控检查时钟门控覆盖率门控寄存器总寄存器目标工具面积预算不含单元描述解码控制级解码整数加法逻辑总片上面积模型外围例外围总片上位单元参数面积读电流保持电压访问时间开销位宽面积参考开源面积对比工艺面积不含目标新设计与同级关键路径方程时序例关键路径拆解路径读位线灵敏数据传输门建立延迟约束需插入级流水线寄存器关键信号延迟典型金属金属全局时钟长线核心对角线含缓冲后端接口时序从机通道握手信号最大等待备注地址写数据写写响应地址读读数据约束组合路径满足动态频率调整表档位功耗性能转换延迟十一安全与可靠性安全扩展扩展机制实现物理区保护项地址掩码锁定态入口防止刷配置控制流完整性扩展分支目标识别标记安全启动验签测量测量递送测量值扩展度量可靠性指标故障类型率缓解软错小时运行一次故障目标需覆盖存储位十二验证与设计流程验证覆盖率目标指令覆盖率分支覆盖条件异常覆盖所有种随机指令生成指令夜断言条门级仿真速度单核门并行线程回归需设计检查清单零寄存器硬连线相对范围足够所有立即数符号扩展统一地址保留中断向量对齐对齐检查压缩子集对齐设计流程里程碑综合次形式验证布局布线次时钟树次信号完整性违例功耗签收达标测试向量覆盖交付设计签核清单综合后面积时序功耗功能覆盖率断言门级仿真周期无形式验证综合网表设计收敛指标最终频率功耗活动面积核心不含测试故障覆盖文档寄存器与接口已描述十三文档与总结文档交付清单功能规格书寄存器手册全表指令延迟表中断异常矩阵配置参数编程指南汇编内在函数验证报告功耗面积签核报告测试向量与覆盖率用户参考缩写汇总关键公式总结公式速记结构失速数据失速控制失速功耗面积关键方程速查最终结项黄金检查性能功耗面积功能与签核网表一致文档完成风险条未关闭高严重常见指令延迟表指令延迟吞吐量使用预测正确预测错误",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2025-11-13 08:54:20",postMainColor:""}</script><noscript><style>#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:(e,t,o)=>{if(0===o)return;const n={value:t,expiry:Date.now()+864e5*o};localStorage.setItem(e,JSON.stringify(n))},get:e=>{const t=localStorage.getItem(e);if(!t)return;const o=JSON.parse(t);if(!(Date.now()>o.expiry))return o.value;localStorage.removeItem(e)}},e.getScript=(e,t={})=>new Promise((o,n)=>{const a=document.createElement("script");a.src=e,a.async=!0,a.onerror=n,a.onload=a.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,o())},Object.keys(t).forEach(e=>{a.setAttribute(e,t[e])}),document.head.appendChild(a)}),e.getCSS=(e,t=!1)=>new Promise((o,n)=>{const a=document.createElement("link");a.rel="stylesheet",a.href=e,t&&(a.id=t),a.onerror=n,a.onload=a.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,o())},document.head.appendChild(a)});const t=saveToLocal.get("aside-status");void 0!==t&&("hide"===t?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><script src="/js/echarts.min.js"></script><script src="/js/china.js"></script><script src="/js/jquery.min.js"></script><link rel="stylesheet" href="/css/custom.css" media="defer" onload='this.media="all"'><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="Aurorp1g Blog" type="application/atom+xml"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"><script async src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="fa-solid fa-fingerprint fa-fade"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">个人网站</div><div class="back-menu-list"><a class="back-menu-item" href="https://aurorp1g.github.io" title="我的博客"><img class="back-menu-item-icon" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/favicon.ico" alt="博客"><span class="back-menu-item-text">博客</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://github.com/Aurorp1g" title="我的GitHub"><i class="fa-fw fab fa-github"></i><span class="back-menu-item-text">GitHub</span></a><a class="back-menu-item" href="https://aurorp1g.github.io/CTF_Zone/" title="自建的CTF Zone"><img class="back-menu-item-icon" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="https://aurorp1g.github.io/CTF_Zone/assets/icon.ico" alt="CTF Zone"><span class="back-menu-item-text">CTF Zone</span></a><a class="back-menu-item" href="https://aurorp1g.github.io/Heart-Notes/" title="爱心便签墙"><img class="back-menu-item-icon" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="https://aurorp1g.github.io/Heart-Notes/public/favicon.ico" alt="Heart Notes"><span class="back-menu-item-text">Heart Notes</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">实用工具</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="好用的图床"><i class="fa-fw fas fa-cloud"></i><span class="back-menu-item-text">安知鱼图床</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://www.vercount.one/" title="比busuanzi更稳定的统计网站访问量工具"><img class="back-menu-item-icon" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="https://www.vercount.one/favicon.ico" alt="vercount计数"><span class="back-menu-item-text">vercount计数</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://icon.liiiu.cn/" title="好用的万能图标工具"><i class="fa-fw fas fa-icons"></i><span class="back-menu-item-text">万能图标</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://haowallpaper.com/" title="高质量壁纸网站"><img class="back-menu-item-icon" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="https://haowallpaper.com/favicon.ico" alt="哲风壁纸"><span class="back-menu-item-text">哲风壁纸</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">𝕬𝖚𝖗𝖔𝖗𝖕1𝖌 𝕭𝖑𝖔𝖌</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>文库</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size:.9em"></i> <span>归档</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size:.9em"></i> <span>分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size:.9em"></i> <span>标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>网站</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size:.9em"></i> <span>留言信箱</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/charts/"><i class="fa fa-pie-chart faa-tada"></i> <span>博客统计</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/update/"><i class="fa fa-history faa-tada"></i> <span>更新日志</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>导航</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/laboratory/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size:.9em"></i> <span>项目展示</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size:.9em"></i> <span>友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/equipment/"><i class="anzhiyufont anzhiyu-icon-dice-d20 faa-tada" style="font-size:.9em"></i> <span>我的装备</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>生活</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size:.9em"></i> <span>音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/personal/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size:.9em"></i> <span>相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/video/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size:.9em"></i> <span>视频库</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/personal/love/"><i class="fa-beat-fade fas fa-heartbeat"></i> <span>LoveHub</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/personal/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size:.9em"></i> <span>本站</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="fa-solid fa-pen-fancy faa-tada"></i> <span>哔哔</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i> <span>搜索</span></a></div><input id="center-console" type="checkbox"><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole()"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="/assets/reward/weixin.jpg" target="_blank"><img class="post-qr-code-img" alt="微信" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/assets/reward/weixin.jpg"></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/assets/reward/zhifubao.jpg" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/assets/reward/zhifubao.jpg"></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title">最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Daily-Life/" style="font-size:1.05rem">Daily Life<sup>15</sup></a><a href="/tags/HTML/" style="font-size:1.05rem">HTML<sup>1</sup></a><a href="/tags/Java/" style="font-size:1.05rem">Java<sup>3</sup></a><a href="/tags/Linux/" style="font-size:1.05rem">Linux<sup>1</sup></a><a href="/tags/Markdown/" style="font-size:1.05rem">Markdown<sup>1</sup></a><a href="/tags/PWN/" style="font-size:1.05rem">PWN<sup>1</sup></a><a href="/tags/Python/" style="font-size:1.05rem">Python<sup>4</sup></a><a href="/tags/Study/" style="font-size:1.05rem">Study<sup>25</sup></a><a href="/tags/%E5%A4%96%E6%8C%82%E6%A0%87%E7%AD%BE/" style="font-size:1.05rem">外挂标签<sup>1</sup></a><a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" style="font-size:1.05rem">操作系统<sup>3</sup></a><a href="/tags/%E6%B1%87%E7%BC%96/" style="font-size:1.05rem">汇编<sup>1</sup></a></div></div><hr></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多"><i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/11/"><span class="card-archive-list-date">十一月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/10/"><span class="card-archive-list-date">十月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/09/"><span class="card-archive-list-date">九月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">4</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/08/"><span class="card-archive-list-date">八月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/07/"><span class="card-archive-list-date">七月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">8</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/06/"><span class="card-archive-list-date">六月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/05/"><span class="card-archive-list-date">五月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">5</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/04/"><span class="card-archive-list-date">四月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>篇</span></div></a></li></ul></div><hr></div></div></div><div class="button-group"><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="travellings_button" onclick="anzhiyu.totraveling()" title="随机前往一个开往项目网站"><a class="travellings-switch"><i class="anzhiyufont anzhiyu-icon-train"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" itemprop="url">操作系统</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" tabindex="-1" itemprop="url"><span><i class="anzhiyufont anzhiyu-icon-hashtag"></i> 操作系统</span></a></span></div></div><h1 class="post-title" itemprop="name headline">指令集体系结构学习笔记</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2025-11-01T04:40:48.000Z" title="发表于 2025-11-01 12:40:48">2025-11-01</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2025-11-13T00:54:20.092Z" title="更新于 2025-11-13 08:54:20">2025-11-13</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">字数总计:</span><span class="word-count" title="文章字数">5559</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">阅读时长:</span><span>24分钟</span></span><span class="post-meta-separator"></span><span class="post-meta-pv-cv" data-flag-title="指令集体系结构学习笔记"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator"></span><span class="post-meta-position" title="作者IP属地为广东 佛山"><i class="anzhiyufont anzhiyu-icon-location-dot"></i> 广东 佛山</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s58 18 88 18 58-18 88-18 58 18 88 18v44h-352Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="/img/imjflelh.png"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><div class="post-ai-description"><div class="ai-title"><i class="anzhiyufont anzhiyu-icon-bilibili"></i><div class="ai-title-text">AI-摘要</div><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right"></i><i class="anzhiyufont anzhiyu-icon-circle-dot" title="朗读摘要"></i><div id="ai-tag">Aurorp1g GPT</div></div><div class="ai-explanation">AI初始化中...</div><div class="ai-btn-box"><div class="ai-btn-item">介绍自己 🙈</div><div class="ai-btn-item">生成本文简介 👋</div><div class="ai-btn-item">推荐相关文章 📖</div><div class="ai-btn-item">前往主页 🏠</div><div class="ai-btn-item" id="go-tianli-blog">前往爱发电购买</div></div><script data-pjax="" src="/js/anzhiyu/ai_abstract.js"></script></div><article class="post-content" id="article-container" itemscope itemtype="https://aurorp1g.github.io/posts/3a102641.html"><header><a class="post-meta-categories" href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" itemprop="url">操作系统</a><a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" tabindex="-1" itemprop="url">操作系统</a><h1 id="CrawlerTitle" itemprop="name headline">指令集体系结构学习笔记</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">Aurorp1g</span><time itemprop="dateCreated datePublished" datetime="2025-11-01T04:40:48.000Z" title="发表于 2025-11-01 12:40:48">2025-11-01</time><time itemprop="dateCreated datePublished" datetime="2025-11-13T00:54:20.092Z" title="更新于 2025-11-13 08:54:20">2025-11-13</time></header><h1 id="ISA-学习笔记"><a href="#ISA-学习笔记" class="headerlink" title="ISA 学习笔记"></a>ISA 学习笔记</h1><h2 id="一、基础架构与指令系统"><a href="#一、基础架构与指令系统" class="headerlink" title="一、基础架构与指令系统"></a>一、基础架构与指令系统</h2><h3 id="1-1-指令编码"><a href="#1-1-指令编码" class="headerlink" title="1.1 指令编码"></a>1.1 指令编码</h3><div class="table-container"><table><thead><tr><th>字段</th><th>位宽</th><th>RISC-V 示例</th><th>说明</th></tr></thead><tbody><tr><td>opcode</td><td>7 b</td><td>0110011</td><td>主操作码，决定格式</td></tr><tr><td>rd</td><td>5 b</td><td>x0–x31</td><td>目的寄存器</td></tr><tr><td>funct3</td><td>3 b</td><td>000=ADD</td><td>子操作码</td></tr><tr><td>rs1</td><td>5 b</td><td>源寄存器 1</td><td></td></tr><tr><td>rs2</td><td>5 b</td><td>源寄存器 2</td><td></td></tr><tr><td>funct7</td><td>7 b</td><td>0000000=ADD</td><td>二级子操作码</td></tr></tbody></table></div><ul><li>定长 32 b，四字节对齐 → PC+4</li><li>立即数分阶段拼合：I/S/B/U/J 格式</li></ul><h3 id="1-2-寻址模式（RISC-V-基整数）"><a href="#1-2-寻址模式（RISC-V-基整数）" class="headerlink" title="1.2 寻址模式（RISC-V 基整数）"></a>1.2 寻址模式（RISC-V 基整数）</h3><div class="table-container"><table><thead><tr><th>模式</th><th>汇编模板</th><th>EA 计算</th><th>用途</th></tr></thead><tbody><tr><td>寄存器</td><td>add rd, rs1, rs2</td><td>—</td><td>ALU 操作</td></tr><tr><td>立即数</td><td>addi rd, rs1, imm</td><td>—</td><td>常数、偏移</td></tr><tr><td>基址+偏移</td><td>lw rd, imm(rs1)</td><td>EA = rs1 + imm</td><td>全局/局部变量</td></tr><tr><td>PC 相对</td><td>beq rs1, rs2, label</td><td>EA = PC + imm×2</td><td>分支跳转</td></tr><tr><td>绝对（AUIPC）</td><td>auipc rd, imm</td><td>rd = PC + imm&lt;&lt;12</td><td>长跳转高 20 位</td></tr></tbody></table></div><h3 id="1-3-寄存器与调用约定（LP64D）"><a href="#1-3-寄存器与调用约定（LP64D）" class="headerlink" title="1.3 寄存器与调用约定（LP64D）"></a>1.3 寄存器与调用约定（LP64D）</h3><div class="table-container"><table><thead><tr><th>寄存器</th><th>作用</th><th>保存者</th></tr></thead><tbody><tr><td>x0</td><td>零寄存器</td><td>—</td></tr><tr><td>x1 ra</td><td>返回地址</td><td>caller</td></tr><tr><td>x2 sp</td><td>栈指针</td><td>callee</td></tr><tr><td>x3 gp</td><td>全局指针</td><td>—</td></tr><tr><td>x4 tp</td><td>线程指针</td><td>—</td></tr><tr><td>x5–x7 x28–x31</td><td>t0–t6 临时</td><td>caller</td></tr><tr><td>x8 x9 x18–x27</td><td>s0–s11 保存</td><td>callee</td></tr><tr><td>x10–x17</td><td>a0–a7 参数/返回值</td><td>caller</td></tr></tbody></table></div><ul><li>栈对齐 16 B</li><li>前 8 浮点参数 fa0–fa7，寄存器 f0–f31</li></ul><h3 id="1-4-参考参数速查"><a href="#1-4-参考参数速查" class="headerlink" title="1.4 参考参数速查"></a>1.4 参考参数速查</h3><div class="table-container"><table><thead><tr><th>参数</th><th>RV32</th><th>RV64</th><th>单位</th></tr></thead><tbody><tr><td>x 寄存器</td><td>32×32</td><td>32×64</td><td>b</td></tr><tr><td>虚拟地址</td><td>32</td><td>39/48/57</td><td>b</td></tr><tr><td>PC 对齐</td><td>4</td><td>4</td><td>B</td></tr><tr><td>最大指令</td><td>32</td><td>48</td><td>B</td></tr><tr><td>中断线</td><td>16</td><td>16</td><td>线</td></tr></tbody></table></div><h2 id="二、系统架构与特权机制"><a href="#二、系统架构与特权机制" class="headerlink" title="二、系统架构与特权机制"></a>二、系统架构与特权机制</h2><h3 id="2-1-特权级与-CSR（控制与状态寄存器）"><a href="#2-1-特权级与-CSR（控制与状态寄存器）" class="headerlink" title="2.1 特权级与 CSR（控制与状态寄存器）"></a>2.1 特权级与 CSR（控制与状态寄存器）</h3><div class="table-container"><table><thead><tr><th>级别</th><th>编码</th><th>可见性</th><th>典型 CSR</th></tr></thead><tbody><tr><td>M</td><td>11</td><td>全</td><td>mstatus, mtvec, mepc</td></tr><tr><td>S</td><td>01</td><td>内核</td><td>sstatus, stvec, sepc</td></tr><tr><td>U</td><td>00</td><td>用户</td><td>ustatus, uepc</td></tr></tbody></table></div><ul><li>CSR 地址 12 b：{8’b0, 4’bregion}</li><li>读写指令：CSRRW、CSRRS、CSRRC + 立即数变体</li></ul><h3 id="2-2-中断委托"><a href="#2-2-中断委托" class="headerlink" title="2.2 中断委托"></a>2.2 中断委托</h3><ul><li>mideleg：1 位/异常，置 1 转 S 态</li><li>medeleg 示例值：0xB222 → 把 ECALL_U、Inst/Page/Fault 等下放到 S</li><li>进入 S 后，scause 最高位 = 1 表示中断</li></ul><h3 id="2-3-异常处理流程（精确）"><a href="#2-3-异常处理流程（精确）" class="headerlink" title="2.3 异常处理流程（精确）"></a>2.3 异常处理流程（精确）</h3><ol><li>停止当前流水线</li><li>保存 pc → mepc/sepc</li><li>写 cause 寄存器（mcause/scause）</li><li>跳转到 mtvec/stvec（BASE+4×cause）</li><li>执行 handler</li><li>mret/sret 返回</li></ol><h3 id="2-4-异常现场恢复"><a href="#2-4-异常现场恢复" class="headerlink" title="2.4 异常现场恢复"></a>2.4 异常现场恢复</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mret 前需恢复：</span><br><span class="line">  pc = mepc</span><br><span class="line">  mstatus.MPIE → MIE</span><br><span class="line">  mstatus.MPP → 当前特权</span><br><span class="line">  可选：浮点状态 frm/fflags</span><br></pre></td></tr></tbody></table></figure><ul><li>硬件自动原子完成</li></ul><h3 id="2-5-中断延迟预算（最小）"><a href="#2-5-中断延迟预算（最小）" class="headerlink" title="2.5 中断延迟预算（最小）"></a>2.5 中断延迟预算（最小）</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">同步异常 → 进入 M：4 cycle</span><br><span class="line">M 态查表 → 跳转：3 cycle</span><br><span class="line">总共：7 cycle ≈ 7 ns @1 GHz</span><br></pre></td></tr></tbody></table></figure><ul><li>嵌套加速：硬件自动保存 mstatus/mpie/mepc</li></ul><h2 id="三、内存管理"><a href="#三、内存管理" class="headerlink" title="三、内存管理"></a>三、内存管理</h2><h3 id="3-1-虚拟内存（SV39）"><a href="#3-1-虚拟内存（SV39）" class="headerlink" title="3.1 虚拟内存（SV39）"></a>3.1 虚拟内存（SV39）</h3><ul><li>39 b 虚拟地址 → 56 b 物理地址</li><li>三级页表：VPN[2:0] + 9 b 索引</li><li>页大小 4 KiB = 2^12</li><li>PTE 格式（64 b）：<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">V R W X U G A D RSW PPN[43:10]</span><br></pre></td></tr></tbody></table></figure></li><li>TLB 未命中 → 硬件遍历（可软件补充）</li></ul><h3 id="3-2-页表遍历延迟（实测模拟）"><a href="#3-2-页表遍历延迟（实测模拟）" class="headerlink" title="3.2 页表遍历延迟（实测模拟）"></a>3.2 页表遍历延迟（实测模拟）</h3><div class="table-container"><table><thead><tr><th>参数</th><th>数值</th></tr></thead><tbody><tr><td>L1 TLB hit</td><td>1 cycle</td></tr><tr><td>L2 TLB hit</td><td>10 cycle</td></tr><tr><td>页表遍历（4-level）</td><td>200 cycle</td></tr></tbody></table></div><ul><li>2 MiB 大页：TLB 覆盖 1 GiB 仅需 512 项 → miss ↓ 8×</li></ul><h3 id="3-3-地址空间标识（ASID）"><a href="#3-3-地址空间标识（ASID）" class="headerlink" title="3.3 地址空间标识（ASID）"></a>3.3 地址空间标识（ASID）</h3><ul><li>Sv39：16 b ASID → 65536 进程</li><li>Sv48：同样 16 b（satp.ASID）</li><li>TLB 刷新：仅当 ASID 切换或执行 SFENCE.VMA</li></ul><h3 id="3-4-地址空间布局（Sv39-Linux）"><a href="#3-4-地址空间布局（Sv39-Linux）" class="headerlink" title="3.4 地址空间布局（Sv39 Linux）"></a>3.4 地址空间布局（Sv39 Linux）</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">0x0000_0000_0000 - 0x003F_FFFF_FFFF   user</span><br><span class="line">0xFFFF_FF80_0000 - 0xFFFF_FFFF_FFFF   kernel</span><br><span class="line">中间 256 TiB 空洞</span><br></pre></td></tr></tbody></table></figure><ul><li>用户/内核各 512 GiB</li></ul><h3 id="3-5-数据对齐检查（用户态）"><a href="#3-5-数据对齐检查（用户态）" class="headerlink" title="3.5 数据对齐检查（用户态）"></a>3.5 数据对齐检查（用户态）</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">硬件产生：</span><br><span class="line">  地址 % size ≠ 0 → 触发 Load/Store Address Misaligned</span><br><span class="line">例外：C.LWSP 允许 sp 非 4 对齐（扩展）</span><br></pre></td></tr></tbody></table></figure><ul><li>软件修复：内核 emulate 后返回</li></ul><h2 id="四、缓存系统与一致性"><a href="#四、缓存系统与一致性" class="headerlink" title="四、缓存系统与一致性"></a>四、缓存系统与一致性</h2><h3 id="4-1-缓存设计量化（64-KiB-L1D-示例）"><a href="#4-1-缓存设计量化（64-KiB-L1D-示例）" class="headerlink" title="4.1 缓存设计量化（64 KiB L1D 示例）"></a>4.1 缓存设计量化（64 KiB L1D 示例）</h3><ul><li>架构：64 B 行，8 路组相联 → 128 组</li><li>索引位：log2(128) = 7 b</li><li>块偏移：log2(64) = 6 b</li><li>标签位：物理地址 - (7+6) = 51 b（RV64 57 b 物理）</li><li>命中率：SPECint 95 % → MissRate = 5 %</li><li>AMAT = 4 + 0.05×12 = 4.6 c（含 L2 命中）</li></ul><h3 id="4-2-缓存一致性（RVWMO）"><a href="#4-2-缓存一致性（RVWMO）" class="headerlink" title="4.2 缓存一致性（RVWMO）"></a>4.2 缓存一致性（RVWMO）</h3><ul><li>内存模型：允许写缓冲、非多副本</li><li>同步原语：load-reserved (lr.w) + store-conditional (sc.w)</li><li>原子指令：amoswap, amoadd, amoor, amoand, amoxor</li></ul><h3 id="4-3-访存一致性模型（RVWMO-规则摘）"><a href="#4-3-访存一致性模型（RVWMO-规则摘）" class="headerlink" title="4.3 访存一致性模型（RVWMO 规则摘）"></a>4.3 访存一致性模型（RVWMO 规则摘）</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Rule 1: 同一 hart 内存顺序保持 program order</span><br><span class="line">Rule 2: AMO 对同一地址全局全序</span><br><span class="line">Rule 3: fence RW,RW 强制前后不能重排</span><br><span class="line">Rule 4: acquire 加载禁止后续提前；release 存储禁止前面滞后</span><br></pre></td></tr></tbody></table></figure><ul><li>实现：加载队列 48 项，存储缓冲 32 项，保序位向量</li></ul><h3 id="4-4-多核缓存一致性（MESI-简化）"><a href="#4-4-多核缓存一致性（MESI-简化）" class="headerlink" title="4.4 多核缓存一致性（MESI 简化）"></a>4.4 多核缓存一致性（MESI 简化）</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">状态：M E S I</span><br><span class="line">消息：BusRd, BusRdX, BusUpgr, Flush</span><br><span class="line">转换示例：</span><br><span class="line">  I → (本地读) → BusRd → S</span><br><span class="line">  S → (本地写) → BusUpgr → M</span><br></pre></td></tr></tbody></table></figure><ul><li>目录法：位向量 16 核 → 16 b/line</li></ul><h3 id="4-5-缓存锁定（cache-lockdown）"><a href="#4-5-缓存锁定（cache-lockdown）" class="headerlink" title="4.5 缓存锁定（cache lockdown）"></a>4.5 缓存锁定（cache lockdown）</h3><ul><li>方式：索引 + way 掩码 → 锁定至 Way[3:0]</li><li>接口：CSR <code>mcachectl</code> 0x7CA</li><li>最大锁定：1 way/组 → 12.5 % 容量（8-way）</li></ul><h3 id="4-6-指令预取（stride）算法"><a href="#4-6-指令预取（stride）算法" class="headerlink" title="4.6 指令预取（stride）算法"></a>4.6 指令预取（stride）算法</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if ( miss_addr[n] - miss_addr[n-1] == constant )</span><br><span class="line">    prefetch_addr = miss_addr[n] + stride</span><br></pre></td></tr></tbody></table></figure><ul><li>表项：32 项，stride 7 b 带符号</li><li>覆盖：矩阵访问 80 % 行 miss</li></ul><h3 id="4-7-指令存储能量优化（banked-I-cache）"><a href="#4-7-指令存储能量优化（banked-I-cache）" class="headerlink" title="4.7 指令存储能量优化（banked I-cache）"></a>4.7 指令存储能量优化（banked I-cache）</h3><ul><li>4 bank × 64 b → 选通 1 bank，其余 clock-gate</li><li>动态功耗 ↓ 35 %，面积 +8 %（mux + 控制）</li></ul><h2 id="五、扩展指令集"><a href="#五、扩展指令集" class="headerlink" title="五、扩展指令集"></a>五、扩展指令集</h2><h3 id="5-1-常见扩展"><a href="#5-1-常见扩展" class="headerlink" title="5.1 常见扩展"></a>5.1 常见扩展</h3><div class="table-container"><table><thead><tr><th>扩展</th><th>说明</th><th>新增状态</th></tr></thead><tbody><tr><td>M</td><td>乘除法</td><td>mul, mulh, div, rem</td></tr><tr><td>A</td><td>原子</td><td>lr/sc, amo*</td></tr><tr><td>F/D</td><td>单/双浮点</td><td>f0–f31, fcsr</td></tr><tr><td>C</td><td>16 b 压缩</td><td>指令对齐 2 B</td></tr><tr><td>V</td><td>向量</td><td>v0–v31, vl, vtype</td></tr><tr><td>B</td><td>位操作</td><td>clz, ctz, xperm*</td></tr><tr><td>H</td><td>虚拟化</td><td>VS 模式, hgatp</td></tr></tbody></table></div><h3 id="5-2-位操作扩展（ZB-）指令"><a href="#5-2-位操作扩展（ZB-）指令" class="headerlink" title="5.2 位操作扩展（ZB*）指令"></a>5.2 位操作扩展（ZB*）指令</h3><div class="table-container"><table><thead><tr><th>指令</th><th>功能</th><th>延迟</th></tr></thead><tbody><tr><td><code>clz rd, rs</code></td><td>前导零</td><td>1</td></tr><tr><td><code>ctz rd, rs</code></td><td>尾随零</td><td>1</td></tr><tr><td><code>pcnt rd, rs</code></td><td>人口数</td><td>2</td></tr><tr><td><code>bext rd, rs1, rs2</code></td><td>位提取</td><td>2</td></tr></tbody></table></div><ul><li>实现：树形 6 级 → 128 AND+33 popcount</li></ul><h3 id="5-3-指令压缩（RVC）编码速查"><a href="#5-3-指令压缩（RVC）编码速查" class="headerlink" title="5.3 指令压缩（RVC）编码速查"></a>5.3 指令压缩（RVC）编码速查</h3><div class="table-container"><table><thead><tr><th>16b 格式</th><th>映射 32b</th><th>压缩率</th></tr></thead><tbody><tr><td>C.ADD rd, rs</td><td>add rd, rd, rs</td><td>50 %</td></tr><tr><td>C.LWSP rd, offset</td><td>lw rd, offset(x2)</td><td>50 %</td></tr><tr><td>C.J offset</td><td>jal x0, offset</td><td>50 %</td></tr></tbody></table></div><ul><li>平均静态压缩：25-30 %</li></ul><h3 id="5-4-向量-ISA（RVV-v1-0）"><a href="#5-4-向量-ISA（RVV-v1-0）" class="headerlink" title="5.4 向量 ISA（RVV v1.0）"></a>5.4 向量 ISA（RVV v1.0）</h3><ul><li>向量长度寄存器 vl（≤VLMAX）</li><li>向量寄存器组 v0-v31，宽度 LMUL=1-8</li><li>屏蔽寄存器 v0.t 按位控制</li><li>内存访问单位-步幅（unit-strided）：<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vle32.v v4, (a0)     # 加载 32-bit 元素</span><br><span class="line">vse32.v v4, (a1)</span><br></pre></td></tr></tbody></table></figure></li><li>乘加峰值：FLOPS = 2 × #lane × f_max</li></ul><h3 id="5-5-向量长度计算（RVV）"><a href="#5-5-向量长度计算（RVV）" class="headerlink" title="5.5 向量长度计算（RVV）"></a>5.5 向量长度计算（RVV）</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">VLMAX = (VLEN * LMUL) / SEW</span><br><span class="line">例：VLEN=256, LMUL=4, SEW=32</span><br><span class="line">VLMAX = 256*4/32 = 32 元素</span><br></pre></td></tr></tbody></table></figure><ul><li>寄存器分组：v0-3 组成 1×256 b 超寄存器</li><li>峰值带宽：32 B/clk × 2 FMA = 64 B FLOP/clk</li></ul><h3 id="5-6-向量掩码执行模型"><a href="#5-6-向量掩码执行模型" class="headerlink" title="5.6 向量掩码执行模型"></a>5.6 向量掩码执行模型</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">v0.t = 0101</span><br><span class="line">vadd.vv v1, v2, v3, v0.t   # 仅第 0,2 元素活跃</span><br><span class="line">结果：v1 = {x, x+a, x, x+b}</span><br></pre></td></tr></tbody></table></figure><ul><li>掩码关闭元素仍消耗发射带宽 → 有效利用率 = popcount(v0)/vl</li></ul><h3 id="5-7-向量长度寄存器（vl）限制"><a href="#5-7-向量长度寄存器（vl）限制" class="headerlink" title="5.7 向量长度寄存器（vl）限制"></a>5.7 向量长度寄存器（vl）限制</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vl ≤ VLMAX</span><br><span class="line">VLMAX = (LMUL * VLEN) / SEW</span><br><span class="line">写vl：vsetvl/vsetvli 自动约束</span><br></pre></td></tr></tbody></table></figure><ul><li>读取：vl 为只读，CSR 0xC20</li></ul><h3 id="5-8-向量归约（vredsum）伪代码"><a href="#5-8-向量归约（vredsum）伪代码" class="headerlink" title="5.8 向量归约（vredsum）伪代码"></a>5.8 向量归约（vredsum）伪代码</h3><figure class="highlight c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">vsetvli t0, a0, e32, m1</span><br><span class="line">vmv.v.i v0, <span class="number">0</span>            # 清零累加器</span><br><span class="line">loop:</span><br><span class="line">  vsetvl  t1, a0, e32, m8</span><br><span class="line">  vle32.v v8, (a1)</span><br><span class="line">  vredsum.vs v0, v8, v0  # 每段归约到 v0[<span class="number">0</span>]</span><br><span class="line">  sub     a0, a0, t1</span><br><span class="line">  add     a1, a1, t1*<span class="number">4</span></span><br><span class="line">  bnez    a0, loop</span><br></pre></td></tr></tbody></table></figure><ul><li>最终标量和：mv x10, v0[0]</li></ul><h3 id="5-9-向量归约峰值公式"><a href="#5-9-向量归约峰值公式" class="headerlink" title="5.9 向量归约峰值公式"></a>5.9 向量归约峰值公式</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">FLOP = 2 × VLEN × LMUL × ops/element</span><br><span class="line">例：256-bit, LMUL=8, fma → 2×256×8/32 = 128 FLOP/cycle</span><br></pre></td></tr></tbody></table></figure><ul><li>换算：1 GHz → 128 GFLOP/s</li></ul><h3 id="5-10-向量浮点异常聚合（vxsat）"><a href="#5-10-向量浮点异常聚合（vxsat）" class="headerlink" title="5.10 向量浮点异常聚合（vxsat）"></a>5.10 向量浮点异常聚合（vxsat）</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vxsat bit 0: 定点饱和</span><br><span class="line">vxsat bit 1: 浮点无效</span><br><span class="line">写后需软件读-清</span><br></pre></td></tr></tbody></table></figure><ul><li>位置：CSR 0x009</li></ul><h2 id="六、流水线与性能优化"><a href="#六、流水线与性能优化" class="headerlink" title="六、流水线与性能优化"></a>六、流水线与性能优化</h2><h3 id="6-1-流水线冒险与优化（5-级经典）"><a href="#6-1-流水线冒险与优化（5-级经典）" class="headerlink" title="6.1 流水线冒险与优化（5 级经典）"></a>6.1 流水线冒险与优化（5 级经典）</h3><div class="table-container"><table><thead><tr><th>阶段</th><th>功能</th><th>冒险类型</th><th>化解手段</th></tr></thead><tbody><tr><td>IF</td><td>取指</td><td>控制</td><td>BTB + 2-bit 饱和计数、RAS</td></tr><tr><td>ID</td><td>译码/读寄存器</td><td>数据</td><td>前向转发（EX→EX、MEM→EX）</td></tr><tr><td>EX</td><td>执行/计算地址</td><td>数据</td><td>编译器插入 nop、调度延迟槽</td></tr><tr><td>MEM</td><td>访存</td><td>存储-加载</td><td>动态调度、存储集预测</td></tr><tr><td>WB</td><td>写回</td><td>结构</td><td>分离指令/数据 SRAM</td></tr></tbody></table></div><ul><li>分支惩罚 = (预测错误率 × 错误恢复周期)</li><li>RISC-V 取消延迟槽，硬件负责冲刷</li></ul><h3 id="6-2-超标量-amp-动态调度"><a href="#6-2-超标量-amp-动态调度" class="headerlink" title="6.2 超标量 &amp; 动态调度"></a>6.2 超标量 &amp; 动态调度</h3><ul><li>发射宽度：每周期同时解码 N 条（典型 4-6）</li><li>保留站：源操作数缓存，避免 RAW</li><li>ROB：维护精确异常与顺序提交</li><li>重命名寄存器：物理寄存器 &gt;&gt; ISA 寄存器（×2-3）</li></ul><h3 id="6-3-指令发射策略对比（1-wide-vs-4-wide）"><a href="#6-3-指令发射策略对比（1-wide-vs-4-wide）" class="headerlink" title="6.3 指令发射策略对比（1-wide vs 4-wide）"></a>6.3 指令发射策略对比（1-wide vs 4-wide）</h3><div class="table-container"><table><thead><tr><th>策略</th><th>每周期发射</th><th>重排缓冲</th><th>寄存器堆口</th><th>峰值 IPC</th><th>面积代价</th></tr></thead><tbody><tr><td>顺序</td><td>1</td><td>0</td><td>2R+1W</td><td>1.0</td><td>1.0×</td></tr><tr><td>乱序2</td><td>2</td><td>64</td><td>4R+2W</td><td>1.8</td><td>1.7×</td></tr><tr><td>乱序4</td><td>4</td><td>128</td><td>8R+4W</td><td>2.9</td><td>3.0×</td></tr></tbody></table></div><ul><li>边际收益：&gt;4-wide 时 IPC 提升 &lt;5 %/width</li></ul><h3 id="6-4-乱序窗口大小权衡"><a href="#6-4-乱序窗口大小权衡" class="headerlink" title="6.4 乱序窗口大小权衡"></a>6.4 乱序窗口大小权衡</h3><div class="table-container"><table><thead><tr><th>窗口</th><th>重排缓冲</th><th>物理寄存器</th><th>性能提升</th><th>面积代价</th></tr></thead><tbody><tr><td>64</td><td>64</td><td>96</td><td>+0 %</td><td>baseline</td></tr><tr><td>128</td><td>128</td><td>160</td><td>+5 %</td><td>+18 %</td></tr><tr><td>256</td><td>256</td><td>288</td><td>+8 %</td><td>+45 %</td></tr></tbody></table></div><ul><li>选值：128 项为能效拐点</li></ul><h3 id="6-5-分支预测器对比"><a href="#6-5-分支预测器对比" class="headerlink" title="6.5 分支预测器对比"></a>6.5 分支预测器对比</h3><div class="table-container"><table><thead><tr><th>类型</th><th>存储</th><th>准确率</th><th>硬件开销</th></tr></thead><tbody><tr><td>2-bit 饱和计数</td><td>4 K×2 b</td><td>93 %</td><td>1 kB</td></tr><tr><td>gshare (13-bit 历史)</td><td>8 K×2 b</td><td>96 %</td><td>2 kB</td></tr><tr><td>TAGE 6 表</td><td>48 K×2-4 b</td><td>97.5 %</td><td>8 kB + 压缩标签</td></tr></tbody></table></div><ul><li>恢复惩罚：前端 15 级 → 预测错误代价 14-16 c</li></ul><h3 id="6-6-分支预测器训练（启动）"><a href="#6-6-分支预测器训练（启动）" class="headerlink" title="6.6 分支预测器训练（启动）"></a>6.6 分支预测器训练（启动）</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">冷启动：BTB 清零，GHR=0</span><br><span class="line">首次遇见：静态预测向后跳转 T，向前 NT</span><br><span class="line">训练阈值：2-bit 饱和 0→1→2→3</span><br></pre></td></tr></tbody></table></figure><ul><li>1 K 条目饱和后准确率 96 %</li></ul><h3 id="6-7-分支偏移范围"><a href="#6-7-分支偏移范围" class="headerlink" title="6.7 分支偏移范围"></a>6.7 分支偏移范围</h3><div class="table-container"><table><thead><tr><th>指令</th><th>立即数位</th><th>缩放</th><th>范围</th></tr></thead><tbody><tr><td>BEQ/BNE</td><td>12 b</td><td>&lt;&lt;1</td><td>±4 KiB</td></tr><tr><td>JAL</td><td>20 b</td><td>&lt;&lt;1</td><td>±1 MiB</td></tr><tr><td>JALR</td><td>12 b</td><td>0</td><td>±2 KiB（I-type）</td></tr></tbody></table></div><ul><li>链接器松弛：&gt;1 MiB 调用 → auipc+jalr 序列</li></ul><h3 id="6-8-返回地址栈（RAS）"><a href="#6-8-返回地址栈（RAS）" class="headerlink" title="6.8 返回地址栈（RAS）"></a>6.8 返回地址栈（RAS）</h3><ul><li>深度：16 项，匹配常见调用链</li><li>压栈：JAL 且 rd=x1/ra</li><li>出栈：JALR 且 rs1=x1, rd=x0</li><li>预测准确率：&gt;98 % for SPEC CPU</li></ul><h3 id="6-9-取指队列（IFQ）深度计算"><a href="#6-9-取指队列（IFQ）深度计算" class="headerlink" title="6.9 取指队列（IFQ）深度计算"></a>6.9 取指队列（IFQ）深度计算</h3><ul><li>目标：掩盖 I-cache 缺失 8 周期</li><li>带宽需求：宽 4 指令/周期 → 32 B/周期</li><li>深度 = 缺失周期 × 带宽 = 8 × 4 = 32 项</li><li>实现：双端口 SRAM 32×32 B，两读一写</li></ul><h3 id="6-10-指令融合（Fusion）规则-—-双发射示例"><a href="#6-10-指令融合（Fusion）规则-—-双发射示例" class="headerlink" title="6.10 指令融合（Fusion）规则 — 双发射示例"></a>6.10 指令融合（Fusion）规则 — 双发射示例</h3><div class="table-container"><table><thead><tr><th>序列</th><th>融合后 μop</th><th>条件</th><th>收益</th></tr></thead><tbody><tr><td><code>add rd, rs1, rs2</code> + <code>sub rd2, rd, rs3</code></td><td>无 — 无融合</td><td>无</td><td>0 %</td></tr><tr><td><code>cmp rs1, rs2</code> + <code>beq label</code></td><td>1 μop（compare-branch）</td><td>无中间中断</td><td>节省 1 发射槽</td></tr><tr><td><code>li t0, imm</code> + <code>add rd, t0, rs</code></td><td>1 μop（addi.w rd, rs, imm）</td><td>imm∈I-type</td><td>节省 1 译码能级</td></tr></tbody></table></div><ul><li>融合窗口：2 指令/周期，深度 1</li><li>硬件：预解码标记 + 发射队列匹配</li></ul><h3 id="6-11-指令融合检测（硬件）"><a href="#6-11-指令融合检测（硬件）" class="headerlink" title="6.11 指令融合检测（硬件）"></a>6.11 指令融合检测（硬件）</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">预解码标记：</span><br><span class="line">  opcode=OP, funct3=ADD, rd≠0, rs1≠0, rs2≠0</span><br><span class="line">  opcode=BRANCH, funct3=EQ, rs1=rd, rs2=x0</span><br><span class="line">匹配窗口：相邻 2 指令</span><br></pre></td></tr></tbody></table></figure><ul><li>面积：0.8 kGE，关键路径 +30 ps</li></ul><h2 id="七、性能计数与调试"><a href="#七、性能计数与调试" class="headerlink" title="七、性能计数与调试"></a>七、性能计数与调试</h2><h3 id="7-1-性能计数（硬件事件）"><a href="#7-1-性能计数（硬件事件）" class="headerlink" title="7.1 性能计数（硬件事件）"></a>7.1 性能计数（硬件事件）</h3><ul><li>mhpmevent3–31：选择事件</li><li>mhpmcounter3–31：64 b 计数</li><li>常用事件：IPC, cache-miss, branch-mispredict, stall</li></ul><h3 id="7-2-性能计数器事件编码（RISC-V）"><a href="#7-2-性能计数器事件编码（RISC-V）" class="headerlink" title="7.2 性能计数器事件编码（RISC-V）"></a>7.2 性能计数器事件编码（RISC-V）</h3><div class="table-container"><table><thead><tr><th>编号</th><th>事件</th><th>描述</th></tr></thead><tbody><tr><td>0x01</td><td>CY</td><td>时钟周期</td></tr><tr><td>0x02</td><td>TM</td><td>时间（恒定时基）</td></tr><tr><td>0x08</td><td>IR</td><td>退休指令</td></tr><tr><td>0x100</td><td>L1I_MISSES</td><td>I-cache refill</td></tr><tr><td>0x101</td><td>L1D_MISSES</td><td>D-cache refill</td></tr><tr><td>0x202</td><td>ITLB_MISSES</td><td>ITLB refill</td></tr><tr><td>0x203</td><td>DTLB_MISSES</td><td>DTLB refill</td></tr></tbody></table></div><ul><li>自定义事件 ≥0x4000</li></ul><h3 id="7-3-硬件性能计数器（HPM）微架构"><a href="#7-3-硬件性能计数器（HPM）微架构" class="headerlink" title="7.3 硬件性能计数器（HPM）微架构"></a>7.3 硬件性能计数器（HPM）微架构</h3><ul><li>单元数：4 × 32 b 可编程 + 1 × 64 b 固定 cycle</li><li>事件选择：128 输入多路器 → 2 级 8:1</li><li>溢出中断：≥0xFFFF_FFFF 触发 mcounter-overflow</li><li>特权过滤：mcountinhibit 按特权掩码</li></ul><h3 id="7-4-性能计数采样（perf-record）"><a href="#7-4-性能计数采样（perf-record）" class="headerlink" title="7.4 性能计数采样（perf record）"></a>7.4 性能计数采样（perf record）</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">perf record -e r20 -c 100000 -p PID</span><br><span class="line"><span class="comment"># r20 = 0x20 L1D-miss, 每 100 K 事件采样</span></span><br></pre></td></tr></tbody></table></figure><ul><li>采样精度：±2 %，开销 &lt;3 %</li></ul><h3 id="7-5-性能调试模板（RISC-V-Linux）"><a href="#7-5-性能调试模板（RISC-V-Linux）" class="headerlink" title="7.5 性能调试模板（RISC-V Linux）"></a>7.5 性能调试模板（RISC-V Linux）</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">perf <span class="built_in">stat</span> -e instructions,cycles,cache-misses ./a.out</span><br><span class="line">perf record -g ./a.out</span><br><span class="line">perf annotate --stdio</span><br></pre></td></tr></tbody></table></figure><ul><li>事件编码：0x08=BRANCH-MISS, 0x11=LD-STALL</li></ul><h3 id="7-6-性能采样记录（Linux-perf）"><a href="#7-6-性能采样记录（Linux-perf）" class="headerlink" title="7.6 性能采样记录（Linux perf）"></a>7.6 性能采样记录（Linux perf）</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">perf <span class="built_in">stat</span> -e r08,r10,r20,cycles ./app</span><br><span class="line"><span class="comment"># r08 = br_miss, r10 = l1d_miss, r20 = itlb_miss</span></span><br></pre></td></tr></tbody></table></figure><ul><li>原始事件编码：rXX = (umask&lt;&lt;8)|event</li></ul><h3 id="7-7-硬件性能断点（trigger-module）"><a href="#7-7-硬件性能断点（trigger-module）" class="headerlink" title="7.7 硬件性能断点（trigger module）"></a>7.7 硬件性能断点（trigger module）</h3><ul><li>匹配：PC、数据地址、数据值（mask 可配）</li><li>动作：停机、单步、trace 开启、中断核心</li><li>资源：4 触发器 × 64 位匹配器</li></ul><h3 id="7-8-调试模块（RISC-V-Debug-Spec-1-0）"><a href="#7-8-调试模块（RISC-V-Debug-Spec-1-0）" class="headerlink" title="7.8 调试模块（RISC-V Debug Spec 1.0）"></a>7.8 调试模块（RISC-V Debug Spec 1.0）</h3><ul><li>JTAG 4 线，TAP 指令 5 b</li><li>抽象命令：access register 32/64 b</li><li>程序缓冲：16×32 b 指令</li><li>触发器：≥8 个，支持 =, ≠, ≥, 地址/数据匹配</li></ul><h3 id="7-9-硅后调试（eFUSE-触发）"><a href="#7-9-硅后调试（eFUSE-触发）" class="headerlink" title="7.9 硅后调试（eFUSE 触发）"></a>7.9 硅后调试（eFUSE 触发）</h3><ul><li>触发条件：PC[39:0] == 匹配值</li><li>动作：时钟停、扫描链 dump、GPIO 报警</li><li>面积：2 kGE / 触发器</li></ul><h3 id="7-10-硅后调试触发（交叉触发）"><a href="#7-10-硅后调试触发（交叉触发）" class="headerlink" title="7.10 硅后调试触发（交叉触发）"></a>7.10 硅后调试触发（交叉触发）</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ETM &lt;-&gt; STM &lt;-&gt; GPIO</span><br><span class="line">矩阵 8×8，任意输入 → 任意输出</span><br><span class="line">延迟：2 cycle</span><br></pre></td></tr></tbody></table></figure><ul><li>用于多核同步停时钟</li></ul><h3 id="7-11-指令-trace-压缩（TurboTrace）"><a href="#7-11-指令-trace-压缩（TurboTrace）" class="headerlink" title="7.11 指令 trace 压缩（TurboTrace）"></a>7.11 指令 trace 压缩（TurboTrace）</h3><p>算法：差分 PC + LZW → 平均 0.4 B/指令<br>存储：32 KiB 循环缓冲 → 可存 64 K 指令<br>带宽：2 B/指令原始 → 压缩后 0.8 B/指令，接口 8 b 并行，需 0.1 × f 时钟</p><h3 id="7-12-指令-TRACE-格式（Efficient-Trace）"><a href="#7-12-指令-TRACE-格式（Efficient-Trace）" class="headerlink" title="7.12 指令 TRACE 格式（Efficient Trace）"></a>7.12 指令 TRACE 格式（Efficient Trace）</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Header(8) + 差异 PC(1-5) + 可选指令数(0-1)</span><br><span class="line">平均带宽：0.15 bit/指令</span><br><span class="line">封装：8-bit 并行，时钟 = 1/4 core clk</span><br></pre></td></tr></tbody></table></figure><ul><li>存储 1 M 指令 ≈ 19 kB</li></ul><h2 id="八、工具链与编程实践"><a href="#八、工具链与编程实践" class="headerlink" title="八、工具链与编程实践"></a>八、工具链与编程实践</h2><h3 id="8-1-工具链"><a href="#8-1-工具链" class="headerlink" title="8.1 工具链"></a>8.1 工具链</h3><ul><li>汇编：llvm-mc / riscv64-unknown-elf-as</li><li>反汇编：llvm-objdump -d</li><li>模拟：Spike —isa=rv64gcv</li><li>调试：openocd + gdb (target riscv)</li></ul><h3 id="8-2-编译器内在函数（RVV-示例）"><a href="#8-2-编译器内在函数（RVV-示例）" class="headerlink" title="8.2 编译器内在函数（RVV 示例）"></a>8.2 编译器内在函数（RVV 示例）</h3><figure class="highlight c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;riscv_vector.h&gt;</span></span></span><br><span class="line"><span class="type">size_t</span> vl = vsetvl_e32m2(n);        <span class="comment">// 设置向量长度</span></span><br><span class="line"><span class="type">vint32m2_t</span> va = vle32_v_i32m2(ptrA, vl);</span><br><span class="line"><span class="type">vint32m2_t</span> vb = vle32_v_i32m2(ptrB, vl);</span><br><span class="line"><span class="type">vint32m2_t</span> vc = vadd_vv_i32m2(va, vb, vl);</span><br><span class="line">vse32_v_i32m2(ptrC, vc, vl);</span><br></pre></td></tr></tbody></table></figure><ul><li>生成单条 <code>vadd.vv</code> 无循环展开</li></ul><h3 id="8-3-向量加载分段（strip-mining）代码"><a href="#8-3-向量加载分段（strip-mining）代码" class="headerlink" title="8.3 向量加载分段（strip-mining）代码"></a>8.3 向量加载分段（strip-mining）代码</h3><figure class="highlight c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n; ) {</span><br><span class="line">    <span class="type">size_t</span> vl = vsetvl_e32m8(n - i);        <span class="comment">// 动态vl</span></span><br><span class="line">    <span class="type">vint32m8_t</span> vx = vle32_v_i32m8(&amp;x[i], vl);</span><br><span class="line">    <span class="type">vint32m8_t</span> vy = vle32_v_i32m8(&amp;y[i], vl);</span><br><span class="line">    vx = vadd_vv_i32m8(vx, vy, vl);</span><br><span class="line">    vse32_v_i32m8(&amp;x[i], vx, vl);</span><br><span class="line">    i += vl;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>编译器自动展开，循环开销 ≈ 2 指令/段</li></ul><h3 id="8-4-指令调度算法（编译器后端）"><a href="#8-4-指令调度算法（编译器后端）" class="headerlink" title="8.4 指令调度算法（编译器后端）"></a>8.4 指令调度算法（编译器后端）</h3><ol><li>构建 DAG（依赖图）</li><li>列表调度（优先级 = 深度 + latency)</li><li>寄存器分配：图着色 → 溢出插入</li><li>软件流水线：Kernel 周期 II = max(RecMII, ResMII)</li></ol><h3 id="8-5-寄存器分配算法（线性扫描伪码）"><a href="#8-5-寄存器分配算法（线性扫描伪码）" class="headerlink" title="8.5 寄存器分配算法（线性扫描伪码）"></a>8.5 寄存器分配算法（线性扫描伪码）</h3><figure class="highlight c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i in <span class="title function_">range</span><span class="params">(len(LIR))</span>:</span><br><span class="line">    <span class="keyword">if</span> LIR[i].<span class="title function_">is_expired</span><span class="params">()</span>:</span><br><span class="line">        <span class="title function_">free_reg</span><span class="params">(LIR[i].reg)</span></span><br><span class="line">    <span class="keyword">for</span> op in LIR[i].uses:</span><br><span class="line">        <span class="keyword">if</span> not <span class="title function_">is_allocated</span><span class="params">(op)</span>:</span><br><span class="line">            reg = allocate_free()</span><br><span class="line">            <span class="keyword">if</span> no_free:</span><br><span class="line">                spill(oldest_active())</span><br><span class="line">                reg = allocate_free()</span><br><span class="line">            assign(op, reg)</span><br></pre></td></tr></tbody></table></figure><ul><li>复杂度 O(n)，溢出率 &lt;5 % 当物理寄存器 ≥1.5×架构寄存器</li></ul><h2 id="九、微架构设计与实现"><a href="#九、微架构设计与实现" class="headerlink" title="九、微架构设计与实现"></a>九、微架构设计与实现</h2><h3 id="9-1-物理寄存器堆（PRF）参数"><a href="#9-1-物理寄存器堆（PRF）参数" class="headerlink" title="9.1 物理寄存器堆（PRF）参数"></a>9.1 物理寄存器堆（PRF）参数</h3><ul><li>架构寄存器 32 × 64 b</li><li>物理深度 128，读取口 8R/4W</li><li>功耗：读口 45 mW @1 GHz, 28 nm</li><li>面积：6T-SRAM 0.18 μm²/bit → 128×64×6T = 49 k μm²</li></ul><h3 id="9-2-快速乘法实现（Booth-4，64×64）"><a href="#9-2-快速乘法实现（Booth-4，64×64）" class="headerlink" title="9.2 快速乘法实现（Booth-4，64×64）"></a>9.2 快速乘法实现（Booth-4，64×64）</h3><ul><li>部分积：33 行 → 压缩至 2 行 by (4,2) counter</li><li>延迟：12 FO4 = 180 ps @28 nm</li><li>面积：12 kGE</li></ul><h3 id="9-3-浮点乘加（fmadd-d）数据路径"><a href="#9-3-浮点乘加（fmadd-d）数据路径" class="headerlink" title="9.3 浮点乘加（fmadd.d）数据路径"></a>9.3 浮点乘加（fmadd.d）数据路径</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">阶段 1-2：乘法 53×53 Booth → 106 b 积</span><br><span class="line">阶段 3  ：对齐移位 106 b（±55 b）</span><br><span class="line">阶段 4  ：3:2 CSA 压缩 → 2 行 161 b</span><br><span class="line">阶段 5  ：超前进位加法</span><br><span class="line">阶段 6  ：规格化 &amp; 舍入（IEEE 754）</span><br></pre></td></tr></tbody></table></figure><ul><li>延迟 6 cycle，全流水 1/cycle 吞吐量</li></ul><h3 id="9-4-浮点异常聚合（fcsr）"><a href="#9-4-浮点异常聚合（fcsr）" class="headerlink" title="9.4 浮点异常聚合（fcsr）"></a>9.4 浮点异常聚合（fcsr）</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">bit 0  NV 无效操作</span><br><span class="line">bit 1  DZ 除零</span><br><span class="line">bit 2  OF 上溢</span><br><span class="line">bit 3  UF 下溢</span><br><span class="line">bit 4  NX 不精确</span><br></pre></td></tr></tbody></table></figure><ul><li>异常时置位，不中断；软件查询或设 fcsr=0 清</li></ul><h3 id="9-5-同时多线程（SMT2）资源复制"><a href="#9-5-同时多线程（SMT2）资源复制" class="headerlink" title="9.5 同时多线程（SMT2）资源复制"></a>9.5 同时多线程（SMT2）资源复制</h3><div class="table-container"><table><thead><tr><th>结构</th><th>数量</th><th>共享/复制</th></tr></thead><tbody><tr><td>物理寄存器</td><td>256</td><td>复制 128×2</td></tr><tr><td>重排缓冲</td><td>128</td><td>静态分区 64×2</td></tr><tr><td>加载队列</td><td>48</td><td>动态共享</td></tr><tr><td>I-cache</td><td>32 KiB</td><td>共享</td></tr></tbody></table></div><ul><li>吞吐提升：+35 % 面积 +18 %</li></ul><h3 id="9-6-片上网络（NoC）路由"><a href="#9-6-片上网络（NoC）路由" class="headerlink" title="9.6 片上网络（NoC）路由"></a>9.6 片上网络（NoC）路由</h3><ul><li>2D Mesh 4×4，XY 路由，无死锁</li><li>包格式：head(64) + payload(512) + tail(64) = 640 b</li><li>链路 128 b @1 GHz → 16 Gb/s/link</li><li>延迟：1 跳 = 2 cycle + 链路 1 cycle = 3 cycle</li><li>功耗：0.76 pJ/bit (28 nm)</li></ul><h3 id="9-7-微码与复杂指令拆解（x86-对比）"><a href="#9-7-微码与复杂指令拆解（x86-对比）" class="headerlink" title="9.7 微码与复杂指令拆解（x86 对比）"></a>9.7 微码与复杂指令拆解（x86 对比）</h3><ul><li>CISC 指令 → 拆分成 ≤4 μop</li><li>μop-cache：32-K 项，6 μop/行，命中节省 1-2 流水级</li><li>对比 RISC：无微码，ADD/MUL 直接单指令</li></ul><h3 id="9-8-微码-ROM-格式（x86-风格参考）"><a href="#9-8-微码-ROM-格式（x86-风格参考）" class="headerlink" title="9.8 微码 ROM 格式（x86 风格参考）"></a>9.8 微码 ROM 格式（x86 风格参考）</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">addr[μPC]  micro_op[70]  next[12]  br  cond</span><br><span class="line">70b 包含：opcode, dst, src1, src2, imm, flags</span><br></pre></td></tr></tbody></table></figure><ul><li>典型容量：2 K 项 × 70 b → 17.5 kB</li><li>功耗：读取 0.45 pJ/bit @28 nm</li></ul><h2 id="十、功耗、面积与时序"><a href="#十、功耗、面积与时序" class="headerlink" title="十、功耗、面积与时序"></a>十、功耗、面积与时序</h2><h3 id="10-1-功耗分解（5-级-RV64GC，28-nm，1-GHz）"><a href="#10-1-功耗分解（5-级-RV64GC，28-nm，1-GHz）" class="headerlink" title="10.1 功耗分解（5 级 RV64GC，28 nm，1 GHz）"></a>10.1 功耗分解（5 级 RV64GC，28 nm，1 GHz）</h3><div class="table-container"><table><thead><tr><th>模块</th><th>比例</th><th>绝对/mW</th></tr></thead><tbody><tr><td>时钟树</td><td>25 %</td><td>50</td></tr><tr><td>寄存器堆</td><td>15 %</td><td>30</td></tr><tr><td>I-cache</td><td>12 %</td><td>24</td></tr><tr><td>D-cache</td><td>18 %</td><td>36</td></tr><tr><td>执行单元</td><td>10 %</td><td>20</td></tr><tr><td>其他</td><td>20 %</td><td>40</td></tr><tr><td>总计</td><td>100 %</td><td>200 mW @100 % 活动</td></tr></tbody></table></div><h3 id="10-2-功耗墙（Dennard-终结）"><a href="#10-2-功耗墙（Dennard-终结）" class="headerlink" title="10.2 功耗墙（Dennard 终结）"></a>10.2 功耗墙（Dennard 终结）</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">P ∝ V²·f</span><br><span class="line">V ∝ f^(0.5..0.7) → P ∝ f^(2.5..2.7)</span><br><span class="line">10 % 频率 ↑ → ≈30 % 功耗 ↑</span><br></pre></td></tr></tbody></table></figure><ul><li>暗硅：28 nm 时代，仅 50 % 面积可同时全速运行</li></ul><h3 id="10-3-热设计功耗（TDP）估算"><a href="#10-3-热设计功耗（TDP）估算" class="headerlink" title="10.3 热设计功耗（TDP）估算"></a>10.3 热设计功耗（TDP）估算</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">TDP = P_dyn + P_leak</span><br><span class="line">P_dyn = α·C·V²·f = 0.7·10 nF·(0.9 V)²·1 GHz ≈ 5.1 W</span><br><span class="line">P_leak = I_0·e^(qV/nkT)·A = 0.4 W (28 nm)</span><br><span class="line">→ TDP ≈ 5.5 W</span><br></pre></td></tr></tbody></table></figure><h3 id="10-4-指令缓存能量-访问"><a href="#10-4-指令缓存能量-访问" class="headerlink" title="10.4 指令缓存能量/访问"></a>10.4 指令缓存能量/访问</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">32 KB, 4-way, 64 B line, 32 nm</span><br><span class="line">E = 0.23 pJ/bit-access</span><br><span class="line">总线宽 256 b → 0.23×256 ≈ 59 pJ/access</span><br></pre></td></tr></tbody></table></figure><ul><li>对比：寄存器堆 0.45 pJ/access</li></ul><h3 id="10-5-功耗断点测量流程"><a href="#10-5-功耗断点测量流程" class="headerlink" title="10.5 功耗断点测量流程"></a>10.5 功耗断点测量流程</h3><ol><li>设置性能计数器：event=0x01（周期）</li><li>读取平台电流采样（1 kS/s）</li><li>同步时间戳：PTP 1588 &lt;1 μs</li><li>计算：P = VDD × I，归一化到 1 GHz</li></ol><h3 id="10-6-功耗估算脚本（PrimeTime-PX）"><a href="#10-6-功耗估算脚本（PrimeTime-PX）" class="headerlink" title="10.6 功耗估算脚本（PrimeTime PX）"></a>10.6 功耗估算脚本（PrimeTime PX）</h3><figure class="highlight tcl"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">read_db top_mapped.db</span><br><span class="line">read_vcd foo.vcd -strip_path tb/dut</span><br><span class="line">set_power_analysis -analysis_mode time_based</span><br><span class="line">report_power -hierarchy &gt; power.rpt</span><br></pre></td></tr></tbody></table></figure><ul><li>精度：±5 % vs 硅测量</li></ul><h3 id="10-7-时钟门控检查（CLP）"><a href="#10-7-时钟门控检查（CLP）" class="headerlink" title="10.7 时钟门控检查（CLP）"></a>10.7 时钟门控检查（CLP）</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">时钟门控覆盖率 = 门控寄存器 / 总寄存器</span><br><span class="line">目标：≥95 %</span><br></pre></td></tr></tbody></table></figure><ul><li>工具：Synopsys Power-Aware CLP</li></ul><h3 id="10-8-面积预算（28-nm，不含-SRAM）"><a href="#10-8-面积预算（28-nm，不含-SRAM）" class="headerlink" title="10.8 面积预算（28 nm，不含 SRAM）"></a>10.8 面积预算（28 nm，不含 SRAM）</h3><div class="table-container"><table><thead><tr><th>单元</th><th>kGE</th><th>描述</th></tr></thead><tbody><tr><td>解码 + 控制</td><td>25</td><td>2 级解码 PLA</td></tr><tr><td>整数 ALU</td><td>8</td><td>64 b 加法 + 逻辑</td></tr></tbody></table></div><ul><li>1 kGE ≈ 0.9 k μm² → 总 30 kGE ≈ 0.027 mm²</li></ul><h3 id="10-9-片上-SRAM-面积模型"><a href="#10-9-片上-SRAM-面积模型" class="headerlink" title="10.9 片上 SRAM 面积模型"></a>10.9 片上 SRAM 面积模型</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Area = (rows × cols × 6T) + 外围</span><br><span class="line">例：512×128×6T = 393 kT</span><br><span class="line">外围 ≈ 30 % → 总 512 kT</span><br><span class="line">1 kT ≈ 1.2 μm² (28 nm) → 0.61 mm²</span><br></pre></td></tr></tbody></table></figure><h3 id="10-10-片上-SRAM-位单元参数（28-nm）"><a href="#10-10-片上-SRAM-位单元参数（28-nm）" class="headerlink" title="10.10 片上 SRAM 位单元参数（28 nm）"></a>10.10 片上 SRAM 位单元参数（28 nm）</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">面积 6T = 0.127 μm²</span><br><span class="line">读电流 Icell = 18 μA</span><br><span class="line">保持电压 Vhold = 0.45 V</span><br><span class="line">访问时间 Trc = 320 ps</span><br></pre></td></tr></tbody></table></figure><ul><li>ECC 开销：位宽 +14 %，面积 +18 %</li></ul><h3 id="10-11-参考开源-core-面积对比"><a href="#10-11-参考开源-core-面积对比" class="headerlink" title="10.11 参考开源 core 面积对比"></a>10.11 参考开源 core 面积对比</h3><div class="table-container"><table><thead><tr><th>Core</th><th>工艺</th><th>面积/mm²</th><th>不含RAM</th></tr></thead><tbody><tr><td>SweRV EL2</td><td>28 nm</td><td>0.14</td><td>0.09</td></tr><tr><td>CVA6 64b</td><td>28 nm</td><td>0.27</td><td>0.18</td></tr><tr><td>Rocket</td><td>28 nm</td><td>0.23</td><td>0.15</td></tr><tr><td>PicoRV32</td><td>28 nm</td><td>0.01</td><td>0.01</td></tr></tbody></table></div><p>目标新设计 ≤ 0.15 mm²（与 Rocket 同级）</p><h3 id="10-12-关键路径方程（时序）"><a href="#10-12-关键路径方程（时序）" class="headerlink" title="10.12 关键路径方程（时序）"></a>10.12 关键路径方程（时序）</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">T_c ≥ t_pcq + t_decode + t_rf_rd + t_ex + t_setup + t_skew</span><br><span class="line">例：28 nm FO4 ≈ 15 ps</span><br><span class="line">pcq=3 FO4, decode=4, rf=5, ex=6, setup=2, skew=2</span><br><span class="line">T_c ≥ 22 FO4 = 330 ps → f_max ≈ 3 GHz</span><br></pre></td></tr></tbody></table></figure><h3 id="10-13-关键路径拆解（post-layout）"><a href="#10-13-关键路径拆解（post-layout）" class="headerlink" title="10.13 关键路径拆解（post-layout）"></a>10.13 关键路径拆解（post-layout）</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">路径：SRAM 读 → 位线灵敏 → 数据 Mux → 传输门 → FF 建立</span><br><span class="line">延迟：SRAM 350 ps + Mux 120 ps + Wire 80 ps + FF 50 ps = 600 ps</span><br></pre></td></tr></tbody></table></figure><ul><li>约束：≤ 500 ps → 需插入 2 级流水线寄存器</li></ul><h3 id="10-14-关键信号延迟（28-nm，典型）"><a href="#10-14-关键信号延迟（28-nm，典型）" class="headerlink" title="10.14 关键信号延迟（28 nm，典型）"></a>10.14 关键信号延迟（28 nm，典型）</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">金属 4  0.14 ps/μm</span><br><span class="line">金属 8  0.08 ps/μm</span><br><span class="line">全局时钟  8 mm 长线  120 ps</span><br></pre></td></tr></tbody></table></figure><ul><li>5 mm 核心对角线：≈ 400 ps（含缓冲）</li></ul><h3 id="10-15-后端接口时序（AXI4-Lite-从机）"><a href="#10-15-后端接口时序（AXI4-Lite-从机）" class="headerlink" title="10.15 后端接口时序（AXI4-Lite 从机）"></a>10.15 后端接口时序（AXI4-Lite 从机）</h3><div class="table-container"><table><thead><tr><th>通道</th><th>握手信号</th><th>最大等待</th><th>备注</th></tr></thead><tbody><tr><td>AW</td><td>ready</td><td>16 cycle</td><td>地址写</td></tr><tr><td>W</td><td>ready</td><td>16 cycle</td><td>数据写</td></tr><tr><td>B</td><td>valid</td><td>8 cycle</td><td>写响应</td></tr><tr><td>AR</td><td>ready</td><td>16 cycle</td><td>地址读</td></tr><tr><td>R</td><td>valid</td><td>8 cycle</td><td>读数据</td></tr></tbody></table></div><ul><li>约束：组合路径 ≤2 cycle，满足 250 MHz</li></ul><h3 id="10-16-动态频率调整（DVFS-表）"><a href="#10-16-动态频率调整（DVFS-表）" class="headerlink" title="10.16 动态频率调整（DVFS 表）"></a>10.16 动态频率调整（DVFS 表）</h3><div class="table-container"><table><thead><tr><th>档位</th><th>Vdd /V</th><th>f /GHz</th><th>功耗/mW</th><th>性能/%)</th></tr></thead><tbody><tr><td>0</td><td>0.80</td><td>0.8</td><td>80</td><td>80</td></tr><tr><td>1</td><td>0.90</td><td>1.0</td><td>150</td><td>100</td></tr><tr><td>2</td><td>1.00</td><td>1.2</td><td>240</td><td>120</td></tr></tbody></table></div><ul><li>转换延迟：30 μs + PLL lock 20 μs</li></ul><h2 id="十一、安全与可靠性"><a href="#十一、安全与可靠性" class="headerlink" title="十一、安全与可靠性"></a>十一、安全与可靠性</h2><h3 id="11-1-安全扩展"><a href="#11-1-安全扩展" class="headerlink" title="11.1 安全扩展"></a>11.1 安全扩展</h3><div class="table-container"><table><thead><tr><th>扩展</th><th>机制</th><th>RISC-V 实现</th></tr></thead><tbody><tr><td>PMP</td><td>物理区保护</td><td>16 项，地址掩码</td></tr><tr><td>ePMP</td><td>锁定 M 态入口</td><td>防止 U/S 刷配置</td></tr><tr><td>Shadow Stack</td><td>控制流完整性</td><td>Zicfiss 扩展，sspush/sspop</td></tr><tr><td>BTI</td><td>分支目标识别</td><td>Zicfilp，landing-pad 标记</td></tr></tbody></table></div><h3 id="11-2-安全启动（ROM-→-SPL-→-Loader）"><a href="#11-2-安全启动（ROM-→-SPL-→-Loader）" class="headerlink" title="11.2 安全启动（ROM → SPL → Loader）"></a>11.2 安全启动（ROM → SPL → Loader）</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ROM (64 KiB) → hash(SHA-256) → 验签(RSA-3072)</span><br><span class="line">↓</span><br><span class="line">SPL (SRAM 128 KiB) → 测量 bootloader</span><br><span class="line">↓</span><br><span class="line">bootloader → 测量 OS → 递送 attestation</span><br></pre></td></tr></tbody></table></figure><ul><li>测量值扩展 PCR：PCR_new = SHA256(PCR_old || 度量)</li></ul><h3 id="11-3-可靠性指标"><a href="#11-3-可靠性指标" class="headerlink" title="11.3 可靠性指标"></a>11.3 可靠性指标</h3><div class="table-container"><table><thead><tr><th>故障类型</th><th>FIT 率</th><th>缓解</th></tr></thead><tbody><tr><td>SRAM 软错</td><td>100-200 FIT/Mb</td><td>SECDED ECC</td></tr></tbody></table></div><ul><li>FIT = 1e9 小时运行一次故障</li><li>目标：≤10 FIT/CPU → 需 ECC 覆盖 &gt;95 % 存储位</li></ul><h2 id="十二、验证与设计流程"><a href="#十二、验证与设计流程" class="headerlink" title="十二、验证与设计流程"></a>十二、验证与设计流程</h2><h3 id="12-1-验证覆盖率目标"><a href="#12-1-验证覆盖率目标" class="headerlink" title="12.1 验证覆盖率目标"></a>12.1 验证覆盖率目标</h3><ul><li>指令覆盖率：100 % opcode</li><li>分支覆盖：≥90 % 条件</li><li>异常覆盖：所有 16 种 cause</li><li>随机指令生成：RISCV-DV 1 B 指令/夜</li><li>断言：&gt;5 k 条 SystemVerilog assert</li></ul><h3 id="12-2-门级仿真速度"><a href="#12-2-门级仿真速度" class="headerlink" title="12.2 门级仿真速度"></a>12.2 门级仿真速度</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Xcelium：单核 500 cycle/s (5 M 门)</span><br><span class="line">并行 8 线程 → 3 kcycle/s</span><br></pre></td></tr></tbody></table></figure><ul><li>回归 10 kcycle 需 3.3 h</li></ul><h3 id="12-3-设计检查清单"><a href="#12-3-设计检查清单" class="headerlink" title="12.3 设计检查清单"></a>12.3 设计检查清单</h3><ul><li>[ ] GPR 零寄存器硬连线？</li><li>[ ] PC 相对范围 ±1 MiB (B-type) 足够？</li><li>[ ] 所有立即数符号扩展统一？</li><li>[ ] CSR 地址保留 00xx-FFxx？</li><li>[ ] 中断向量对齐 ≥4 B？</li><li>[ ] AMO 对齐检查 4/8 B？</li><li>[ ] 压缩子集 16-b 对齐 2 B？</li></ul><h3 id="12-4-设计流程里程碑"><a href="#12-4-设计流程里程碑" class="headerlink" title="12.4 设计流程里程碑"></a>12.4 设计流程里程碑</h3><ul><li>[ ] RTL freeze</li><li>[ ] 综合 - 0 次</li><li>[ ] 形式验证 - clean</li><li>[ ] 布局布线 - 1 次</li><li>[ ] 时钟树 - 2 次</li><li>[ ] 信号完整性 - 0 违例</li><li>[ ] 功耗签收 - 达标</li><li>[ ] 测试向量 - 95 % 覆盖</li><li>[ ] GDS II 交付</li></ul><h3 id="12-5-设计签核清单"><a href="#12-5-设计签核清单" class="headerlink" title="12.5 设计签核清单"></a>12.5 设计签核清单</h3><ul><li>[ ] 综合后面积 ≤ 0.15 mm²</li><li>[ ] 时序：≤ -50 ps WNS, ≤ 0.05 TNS</li><li>[ ] 功耗：≤ 150 mW @1 GHz, 25 °C, Vdd=0.9 V</li><li>[ ] 功能覆盖率：&gt;95 % 断言</li><li>[ ] 门级仿真 1 M 周期无 X</li><li>[ ] 形式验证：RTL = 综合网表</li></ul><h3 id="12-6-设计收敛指标（最终）"><a href="#12-6-设计收敛指标（最终）" class="headerlink" title="12.6 设计收敛指标（最终）"></a>12.6 设计收敛指标（最终）</h3><ul><li>频率：≥1.0 GHz，WNS ≥+20 ps</li><li>功耗：≤150 mW @1 GHz, 25 °C, 70 % 活动</li><li>面积：≤0.15 mm² 核心（不含 SRAM）</li><li>测试：&gt;98 % 故障覆盖（stuck-at）</li><li>文档：100 % 寄存器与接口已描述</li></ul><h2 id="十三、文档与总结"><a href="#十三、文档与总结" class="headerlink" title="十三、文档与总结"></a>十三、文档与总结</h2><h3 id="13-1-文档交付清单"><a href="#13-1-文档交付清单" class="headerlink" title="13.1 文档交付清单"></a>13.1 文档交付清单</h3><ul><li>功能规格书</li><li>寄存器手册（CSR 全表）</li><li>指令延迟表</li><li>中断/异常矩阵</li><li>配置参数（Verilog + JSON）</li><li>编程指南（汇编 &amp; C 内在函数）</li><li>验证报告</li><li>功耗/面积签核报告</li><li>测试向量与覆盖率</li><li>用户 FAQ</li></ul><h3 id="13-2-参考缩写汇总"><a href="#13-2-参考缩写汇总" class="headerlink" title="13.2 参考缩写汇总"></a>13.2 参考缩写汇总</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">AMAT   Average Memory Access Time</span><br><span class="line">BTB    Branch Target Buffer</span><br><span class="line">CPI    Cycles Per Instruction</span><br><span class="line">DTLB   Data TLB</span><br><span class="line">ECALL  Environment Call</span><br><span class="line">FIFO   First-In-First-Out</span><br><span class="line">GDB    GNU Debugger</span><br><span class="line">HPM    Hardware Performance Monitor</span><br><span class="line">I$     Instruction Cache</span><br><span class="line">JTAG   Joint Test Action Group</span><br><span class="line">LR/SC  Load-Reserved/Store-Conditional</span><br><span class="line">MESI   Modified-Exclusive-Shared-Invalid</span><br><span class="line">NoC    Network-on-Chip</span><br><span class="line">PMP    Physical Memory Protection</span><br><span class="line">PCR    Platform Configuration Register</span><br><span class="line">RAS    Return Address Stack</span><br><span class="line">ROB    Re-Order Buffer</span><br><span class="line">RTL    Register Transfer Level</span><br><span class="line">SECDED Single Error Correct Double Error Detect</span><br><span class="line">SIMD   Single Instruction Multiple Data</span><br><span class="line">TLB    Translation Lookaside Buffer</span><br><span class="line">TDP    Thermal Design Power</span><br><span class="line">WNS    Worst Negative Slack</span><br></pre></td></tr></tbody></table></figure><h3 id="13-3-关键公式"><a href="#13-3-关键公式" class="headerlink" title="13.3 关键公式"></a>13.3 关键公式</h3><ul><li>CPI = Σ (p_i × CPI_i)</li><li>Speed-up = (CPI_old × IC_old) / (CPI_new × IC_new)</li><li>AMAT = HitTime + MissRate × MissPenalty</li></ul><h3 id="13-4-总结公式速记"><a href="#13-4-总结公式速记" class="headerlink" title="13.4 总结公式速记"></a>13.4 总结公式速记</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CPI  = 1 + 结构失速 + 数据失速 + 控制失速</span><br><span class="line">AMAT = Hit + MissRate × MissPenalty</span><br><span class="line">功耗 = Cdyn × V² × f + Ileak × V</span><br><span class="line">面积 = Σ(kGE) × 0.9 k μm²</span><br></pre></td></tr></tbody></table></figure><h3 id="13-5-关键方程速查（最终）"><a href="#13-5-关键方程速查（最终）" class="headerlink" title="13.5 关键方程速查（最终）"></a>13.5 关键方程速查（最终）</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CPI = Base + Mem + Branch + Struct</span><br><span class="line">AMAT = L1_hit + L1_missRate × (L2_hit + L2_missRate × DRAM)</span><br><span class="line">P  = C·V²·f + I_leak·V</span><br><span class="line">Throughput_ipc = min(Decode_width, Issue_width, Retire_width)</span><br><span class="line">MTBF = 1 / (Σ FIT)</span><br></pre></td></tr></tbody></table></figure><h3 id="13-6-结项黄金检查"><a href="#13-6-结项黄金检查" class="headerlink" title="13.6 结项黄金检查"></a>13.6 结项黄金检查</h3><ul><li>性能：SPECint ≥ 2.0 IPC @1 GHz</li><li>功耗：≤ 150 mW</li><li>面积：≤ 0.15 mm²</li><li>功能：RTL 与签核网表一致</li><li>文档：100 % 完成</li><li>风险：0 条未关闭高严重</li></ul><h3 id="13-7-常见指令延迟表（SiFive-U74-1-2-GHz）"><a href="#13-7-常见指令延迟表（SiFive-U74-1-2-GHz）" class="headerlink" title="13.7 常见指令延迟表（SiFive U74 1.2 GHz）"></a>13.7 常见指令延迟表（SiFive U74 1.2 GHz）</h3><div class="table-container"><table><thead><tr><th>指令</th><th>延迟</th><th>吞吐量/cyc</th></tr></thead><tbody><tr><td>add</td><td>1</td><td>4</td></tr><tr><td>mul</td><td>3</td><td>1</td></tr><tr><td>div</td><td>8</td><td>1/8</td></tr><tr><td>fadd.d</td><td>3</td><td>2</td></tr><tr><td>fmul.d</td><td>4</td><td>1</td></tr><tr><td>fmadd.d</td><td>5</td><td>1</td></tr><tr><td>load 使用</td><td>3</td><td>1</td></tr><tr><td>branch 预测正确</td><td>1</td><td>2</td></tr><tr><td>预测错误</td><td>10</td><td>—</td></tr></tbody></table></div></article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/assets/avatar.png" title="头像" alt="头像"><img class="post-copyright__author_img_front" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/assets/avatar.png" title="头像" alt="头像"></a><div class="post-copyright__author_name">Aurorp1g</div><div class="post-copyright__author_desc">Aurorp1g's Blog</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://aurorp1g.github.io/posts/3a102641.html">原创</a><a class="post-copyright-title"><span onclick='rm.copyPageUrl("https://aurorp1g.github.io/posts/3a102641.html")'>指令集体系结构学习笔记</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="/assets/reward/weixin.jpg" target="_blank"><img class="post-qr-code-img" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/assets/reward/weixin.jpg" alt="微信"></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/assets/reward/zhifubao.jpg" target="_blank"><img class="post-qr-code-img" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/assets/reward/zhifubao.jpg" alt="支付宝"></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/personal/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display:none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://aurorp1g.github.io/posts/3a102641.html"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=指令集体系结构学习笔记&amp;url=https://aurorp1g.github.io/posts/3a102641.html&amp;pic=/img/imjflelh.png" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl(){var e=window.location.href,t=document.createElement("input");t.setAttribute("value",e),document.body.appendChild(t),t.select(),t.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(t)}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://aurorp1g.github.io" target="_blank">Aurorp1g Blog</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"><span class="tags-punctuation"><i class="anzhiyufont anzhiyu-icon-tag"></i></span> 操作系统<span class="tagsPageCount">3</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="/img/multisim_use.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/3e7af074.html"><img class="prev-cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/img/multisim_use.jpg" onerror='onerror=null,src="/assets/gulp/post_404.jpg"' alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Multisim使用教程详尽版</div></div></a></div><div class="next-post pull-right"><a href="/posts/ff5467f1.html"><img class="next-cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/img/birth_g.jpg" onerror='onerror=null,src="/assets/gulp/post_404.jpg"' alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">生日祝福静态网站生成框架</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size:1.5rem;margin-right:4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/posts/6f6343c5.html" title="Linux操作系统"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/img/xitong.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-05-02</div><div class="title">Linux操作系统</div></div></a></div><div><a href="/posts/8d4b7ae1.html" title="计算机组成原理"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/img/jsjzcyl.jpeg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-08-09</div><div class="title">计算机组成原理</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i> <span>评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)">匿名评论</a><a href="/privacy" style="margin-left:4px">隐私政策</a></div></div><div class="comment-wrap"><div><div id="giscus-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/assets/avatar.png" onerror='this.onerror=null,this.src="/assets/gulp/friend_404.gif"' alt="avatar"><div class="author-status"><img class="g-status" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/assets/gulp/status.webp" alt="status"></div></div><div class="author-info__description"><div class="twopeople"><div class="container" style="height:170px"><canvas class="illo" width="800" height="800" style="max-width:200px;max-height:200px;touch-action:none;width:640px;height:640px"></canvas></div></div><script defer src="/js/twopeoples.js"></script><script defer src="/js/zdog.dist.js"></script><script defer src="/js/twopeople.js" id="rendered-js"></script><style>.twopeople{margin:0;align-items:center;justify-content:center;text-align:center}.twopeople canvas{display:block;margin:0 auto;cursor:move}</style></div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">Aurorp1g</h1><div class="author-info__desc">Aurorp1g's Blog</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/Aurorp1g" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/2066996205" target="_blank" title="BiliBili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a></div></div></div></div><div class="card-widget card-announcement"><div class="item-headline"><a class="faa-parent animated-hover"><i class="fas fa-bullhorn fa-shake"></i></a><span>公告</span></div><div class="announcement_content"><center><b>--- 主域名 ---<br><a href="https://aurorp1g.github.io/" title="此线路部署于github" class="anno_content"><font color="#5ea6e5">aurorp1g.github.io 🍧</font></a></b></center></div><div id="welcome-info"></div><img id="notice-gif" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/assets/gulp/notice.gif" data-lazy-src="/assets/gulp/notice.gif" style="width:100%;border-radius:10px;display:none" alt="可爱捏" title="可爱捏"><script>function mountNotice(){const e=document.getElementById("notice-gif");e&&e.remove();const t=document.createElement("img");t.id="notice-gif",t.src="/assets/gulp/notice.gif",t.alt=t.title="可爱捏",t.style.cssText="width:100%;border-radius:10px;display:none",t.onerror=()=>t.remove(),t.onload=()=>t.style.display="block";const o=document.querySelector(".card-announcement");o&&o.appendChild(t)}mountNotice(),document.addEventListener("pjax:complete",mountNotice)</script></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#ISA-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0"><span class="toc-number">1.</span> <span class="toc-text">ISA 学习笔记</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%9F%BA%E7%A1%80%E6%9E%B6%E6%9E%84%E4%B8%8E%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F"><span class="toc-number">1.1.</span> <span class="toc-text">一、基础架构与指令系统</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-%E6%8C%87%E4%BB%A4%E7%BC%96%E7%A0%81"><span class="toc-number">1.1.1.</span> <span class="toc-text">1.1 指令编码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-%E5%AF%BB%E5%9D%80%E6%A8%A1%E5%BC%8F%EF%BC%88RISC-V-%E5%9F%BA%E6%95%B4%E6%95%B0%EF%BC%89"><span class="toc-number">1.1.2.</span> <span class="toc-text">1.2 寻址模式（RISC-V 基整数）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-%E5%AF%84%E5%AD%98%E5%99%A8%E4%B8%8E%E8%B0%83%E7%94%A8%E7%BA%A6%E5%AE%9A%EF%BC%88LP64D%EF%BC%89"><span class="toc-number">1.1.3.</span> <span class="toc-text">1.3 寄存器与调用约定（LP64D）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-%E5%8F%82%E8%80%83%E5%8F%82%E6%95%B0%E9%80%9F%E6%9F%A5"><span class="toc-number">1.1.4.</span> <span class="toc-text">1.4 参考参数速查</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84%E4%B8%8E%E7%89%B9%E6%9D%83%E6%9C%BA%E5%88%B6"><span class="toc-number">1.2.</span> <span class="toc-text">二、系统架构与特权机制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E7%89%B9%E6%9D%83%E7%BA%A7%E4%B8%8E-CSR%EF%BC%88%E6%8E%A7%E5%88%B6%E4%B8%8E%E7%8A%B6%E6%80%81%E5%AF%84%E5%AD%98%E5%99%A8%EF%BC%89"><span class="toc-number">1.2.1.</span> <span class="toc-text">2.1 特权级与 CSR（控制与状态寄存器）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E4%B8%AD%E6%96%AD%E5%A7%94%E6%89%98"><span class="toc-number">1.2.2.</span> <span class="toc-text">2.2 中断委托</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E6%B5%81%E7%A8%8B%EF%BC%88%E7%B2%BE%E7%A1%AE%EF%BC%89"><span class="toc-number">1.2.3.</span> <span class="toc-text">2.3 异常处理流程（精确）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-%E5%BC%82%E5%B8%B8%E7%8E%B0%E5%9C%BA%E6%81%A2%E5%A4%8D"><span class="toc-number">1.2.4.</span> <span class="toc-text">2.4 异常现场恢复</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-%E4%B8%AD%E6%96%AD%E5%BB%B6%E8%BF%9F%E9%A2%84%E7%AE%97%EF%BC%88%E6%9C%80%E5%B0%8F%EF%BC%89"><span class="toc-number">1.2.5.</span> <span class="toc-text">2.5 中断延迟预算（最小）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86"><span class="toc-number">1.3.</span> <span class="toc-text">三、内存管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98%EF%BC%88SV39%EF%BC%89"><span class="toc-number">1.3.1.</span> <span class="toc-text">3.1 虚拟内存（SV39）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E9%A1%B5%E8%A1%A8%E9%81%8D%E5%8E%86%E5%BB%B6%E8%BF%9F%EF%BC%88%E5%AE%9E%E6%B5%8B%E6%A8%A1%E6%8B%9F%EF%BC%89"><span class="toc-number">1.3.2.</span> <span class="toc-text">3.2 页表遍历延迟（实测模拟）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-%E5%9C%B0%E5%9D%80%E7%A9%BA%E9%97%B4%E6%A0%87%E8%AF%86%EF%BC%88ASID%EF%BC%89"><span class="toc-number">1.3.3.</span> <span class="toc-text">3.3 地址空间标识（ASID）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-%E5%9C%B0%E5%9D%80%E7%A9%BA%E9%97%B4%E5%B8%83%E5%B1%80%EF%BC%88Sv39-Linux%EF%BC%89"><span class="toc-number">1.3.4.</span> <span class="toc-text">3.4 地址空间布局（Sv39 Linux）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-%E6%95%B0%E6%8D%AE%E5%AF%B9%E9%BD%90%E6%A3%80%E6%9F%A5%EF%BC%88%E7%94%A8%E6%88%B7%E6%80%81%EF%BC%89"><span class="toc-number">1.3.5.</span> <span class="toc-text">3.5 数据对齐检查（用户态）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E7%BC%93%E5%AD%98%E7%B3%BB%E7%BB%9F%E4%B8%8E%E4%B8%80%E8%87%B4%E6%80%A7"><span class="toc-number">1.4.</span> <span class="toc-text">四、缓存系统与一致性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E7%BC%93%E5%AD%98%E8%AE%BE%E8%AE%A1%E9%87%8F%E5%8C%96%EF%BC%8864-KiB-L1D-%E7%A4%BA%E4%BE%8B%EF%BC%89"><span class="toc-number">1.4.1.</span> <span class="toc-text">4.1 缓存设计量化（64 KiB L1D 示例）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E7%BC%93%E5%AD%98%E4%B8%80%E8%87%B4%E6%80%A7%EF%BC%88RVWMO%EF%BC%89"><span class="toc-number">1.4.2.</span> <span class="toc-text">4.2 缓存一致性（RVWMO）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-%E8%AE%BF%E5%AD%98%E4%B8%80%E8%87%B4%E6%80%A7%E6%A8%A1%E5%9E%8B%EF%BC%88RVWMO-%E8%A7%84%E5%88%99%E6%91%98%EF%BC%89"><span class="toc-number">1.4.3.</span> <span class="toc-text">4.3 访存一致性模型（RVWMO 规则摘）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-%E5%A4%9A%E6%A0%B8%E7%BC%93%E5%AD%98%E4%B8%80%E8%87%B4%E6%80%A7%EF%BC%88MESI-%E7%AE%80%E5%8C%96%EF%BC%89"><span class="toc-number">1.4.4.</span> <span class="toc-text">4.4 多核缓存一致性（MESI 简化）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-%E7%BC%93%E5%AD%98%E9%94%81%E5%AE%9A%EF%BC%88cache-lockdown%EF%BC%89"><span class="toc-number">1.4.5.</span> <span class="toc-text">4.5 缓存锁定（cache lockdown）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-6-%E6%8C%87%E4%BB%A4%E9%A2%84%E5%8F%96%EF%BC%88stride%EF%BC%89%E7%AE%97%E6%B3%95"><span class="toc-number">1.4.6.</span> <span class="toc-text">4.6 指令预取（stride）算法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-7-%E6%8C%87%E4%BB%A4%E5%AD%98%E5%82%A8%E8%83%BD%E9%87%8F%E4%BC%98%E5%8C%96%EF%BC%88banked-I-cache%EF%BC%89"><span class="toc-number">1.4.7.</span> <span class="toc-text">4.7 指令存储能量优化（banked I-cache）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E6%89%A9%E5%B1%95%E6%8C%87%E4%BB%A4%E9%9B%86"><span class="toc-number">1.5.</span> <span class="toc-text">五、扩展指令集</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-%E5%B8%B8%E8%A7%81%E6%89%A9%E5%B1%95"><span class="toc-number">1.5.1.</span> <span class="toc-text">5.1 常见扩展</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-%E4%BD%8D%E6%93%8D%E4%BD%9C%E6%89%A9%E5%B1%95%EF%BC%88ZB-%EF%BC%89%E6%8C%87%E4%BB%A4"><span class="toc-number">1.5.2.</span> <span class="toc-text">5.2 位操作扩展（ZB*）指令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-%E6%8C%87%E4%BB%A4%E5%8E%8B%E7%BC%A9%EF%BC%88RVC%EF%BC%89%E7%BC%96%E7%A0%81%E9%80%9F%E6%9F%A5"><span class="toc-number">1.5.3.</span> <span class="toc-text">5.3 指令压缩（RVC）编码速查</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-%E5%90%91%E9%87%8F-ISA%EF%BC%88RVV-v1-0%EF%BC%89"><span class="toc-number">1.5.4.</span> <span class="toc-text">5.4 向量 ISA（RVV v1.0）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-5-%E5%90%91%E9%87%8F%E9%95%BF%E5%BA%A6%E8%AE%A1%E7%AE%97%EF%BC%88RVV%EF%BC%89"><span class="toc-number">1.5.5.</span> <span class="toc-text">5.5 向量长度计算（RVV）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-6-%E5%90%91%E9%87%8F%E6%8E%A9%E7%A0%81%E6%89%A7%E8%A1%8C%E6%A8%A1%E5%9E%8B"><span class="toc-number">1.5.6.</span> <span class="toc-text">5.6 向量掩码执行模型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-7-%E5%90%91%E9%87%8F%E9%95%BF%E5%BA%A6%E5%AF%84%E5%AD%98%E5%99%A8%EF%BC%88vl%EF%BC%89%E9%99%90%E5%88%B6"><span class="toc-number">1.5.7.</span> <span class="toc-text">5.7 向量长度寄存器（vl）限制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-8-%E5%90%91%E9%87%8F%E5%BD%92%E7%BA%A6%EF%BC%88vredsum%EF%BC%89%E4%BC%AA%E4%BB%A3%E7%A0%81"><span class="toc-number">1.5.8.</span> <span class="toc-text">5.8 向量归约（vredsum）伪代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-9-%E5%90%91%E9%87%8F%E5%BD%92%E7%BA%A6%E5%B3%B0%E5%80%BC%E5%85%AC%E5%BC%8F"><span class="toc-number">1.5.9.</span> <span class="toc-text">5.9 向量归约峰值公式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-10-%E5%90%91%E9%87%8F%E6%B5%AE%E7%82%B9%E5%BC%82%E5%B8%B8%E8%81%9A%E5%90%88%EF%BC%88vxsat%EF%BC%89"><span class="toc-number">1.5.10.</span> <span class="toc-text">5.10 向量浮点异常聚合（vxsat）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E6%B5%81%E6%B0%B4%E7%BA%BF%E4%B8%8E%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96"><span class="toc-number">1.6.</span> <span class="toc-text">六、流水线与性能优化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-%E6%B5%81%E6%B0%B4%E7%BA%BF%E5%86%92%E9%99%A9%E4%B8%8E%E4%BC%98%E5%8C%96%EF%BC%885-%E7%BA%A7%E7%BB%8F%E5%85%B8%EF%BC%89"><span class="toc-number">1.6.1.</span> <span class="toc-text">6.1 流水线冒险与优化（5 级经典）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-%E8%B6%85%E6%A0%87%E9%87%8F-amp-%E5%8A%A8%E6%80%81%E8%B0%83%E5%BA%A6"><span class="toc-number">1.6.2.</span> <span class="toc-text">6.2 超标量 &amp; 动态调度</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-%E6%8C%87%E4%BB%A4%E5%8F%91%E5%B0%84%E7%AD%96%E7%95%A5%E5%AF%B9%E6%AF%94%EF%BC%881-wide-vs-4-wide%EF%BC%89"><span class="toc-number">1.6.3.</span> <span class="toc-text">6.3 指令发射策略对比（1-wide vs 4-wide）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-%E4%B9%B1%E5%BA%8F%E7%AA%97%E5%8F%A3%E5%A4%A7%E5%B0%8F%E6%9D%83%E8%A1%A1"><span class="toc-number">1.6.4.</span> <span class="toc-text">6.4 乱序窗口大小权衡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-%E5%88%86%E6%94%AF%E9%A2%84%E6%B5%8B%E5%99%A8%E5%AF%B9%E6%AF%94"><span class="toc-number">1.6.5.</span> <span class="toc-text">6.5 分支预测器对比</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-6-%E5%88%86%E6%94%AF%E9%A2%84%E6%B5%8B%E5%99%A8%E8%AE%AD%E7%BB%83%EF%BC%88%E5%90%AF%E5%8A%A8%EF%BC%89"><span class="toc-number">1.6.6.</span> <span class="toc-text">6.6 分支预测器训练（启动）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-7-%E5%88%86%E6%94%AF%E5%81%8F%E7%A7%BB%E8%8C%83%E5%9B%B4"><span class="toc-number">1.6.7.</span> <span class="toc-text">6.7 分支偏移范围</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-8-%E8%BF%94%E5%9B%9E%E5%9C%B0%E5%9D%80%E6%A0%88%EF%BC%88RAS%EF%BC%89"><span class="toc-number">1.6.8.</span> <span class="toc-text">6.8 返回地址栈（RAS）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-9-%E5%8F%96%E6%8C%87%E9%98%9F%E5%88%97%EF%BC%88IFQ%EF%BC%89%E6%B7%B1%E5%BA%A6%E8%AE%A1%E7%AE%97"><span class="toc-number">1.6.9.</span> <span class="toc-text">6.9 取指队列（IFQ）深度计算</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-10-%E6%8C%87%E4%BB%A4%E8%9E%8D%E5%90%88%EF%BC%88Fusion%EF%BC%89%E8%A7%84%E5%88%99-%E2%80%94-%E5%8F%8C%E5%8F%91%E5%B0%84%E7%A4%BA%E4%BE%8B"><span class="toc-number">1.6.10.</span> <span class="toc-text">6.10 指令融合（Fusion）规则 — 双发射示例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-11-%E6%8C%87%E4%BB%A4%E8%9E%8D%E5%90%88%E6%A3%80%E6%B5%8B%EF%BC%88%E7%A1%AC%E4%BB%B6%EF%BC%89"><span class="toc-number">1.6.11.</span> <span class="toc-text">6.11 指令融合检测（硬件）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E6%80%A7%E8%83%BD%E8%AE%A1%E6%95%B0%E4%B8%8E%E8%B0%83%E8%AF%95"><span class="toc-number">1.7.</span> <span class="toc-text">七、性能计数与调试</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-%E6%80%A7%E8%83%BD%E8%AE%A1%E6%95%B0%EF%BC%88%E7%A1%AC%E4%BB%B6%E4%BA%8B%E4%BB%B6%EF%BC%89"><span class="toc-number">1.7.1.</span> <span class="toc-text">7.1 性能计数（硬件事件）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-%E6%80%A7%E8%83%BD%E8%AE%A1%E6%95%B0%E5%99%A8%E4%BA%8B%E4%BB%B6%E7%BC%96%E7%A0%81%EF%BC%88RISC-V%EF%BC%89"><span class="toc-number">1.7.2.</span> <span class="toc-text">7.2 性能计数器事件编码（RISC-V）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3-%E7%A1%AC%E4%BB%B6%E6%80%A7%E8%83%BD%E8%AE%A1%E6%95%B0%E5%99%A8%EF%BC%88HPM%EF%BC%89%E5%BE%AE%E6%9E%B6%E6%9E%84"><span class="toc-number">1.7.3.</span> <span class="toc-text">7.3 硬件性能计数器（HPM）微架构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-4-%E6%80%A7%E8%83%BD%E8%AE%A1%E6%95%B0%E9%87%87%E6%A0%B7%EF%BC%88perf-record%EF%BC%89"><span class="toc-number">1.7.4.</span> <span class="toc-text">7.4 性能计数采样（perf record）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-5-%E6%80%A7%E8%83%BD%E8%B0%83%E8%AF%95%E6%A8%A1%E6%9D%BF%EF%BC%88RISC-V-Linux%EF%BC%89"><span class="toc-number">1.7.5.</span> <span class="toc-text">7.5 性能调试模板（RISC-V Linux）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-6-%E6%80%A7%E8%83%BD%E9%87%87%E6%A0%B7%E8%AE%B0%E5%BD%95%EF%BC%88Linux-perf%EF%BC%89"><span class="toc-number">1.7.6.</span> <span class="toc-text">7.6 性能采样记录（Linux perf）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-7-%E7%A1%AC%E4%BB%B6%E6%80%A7%E8%83%BD%E6%96%AD%E7%82%B9%EF%BC%88trigger-module%EF%BC%89"><span class="toc-number">1.7.7.</span> <span class="toc-text">7.7 硬件性能断点（trigger module）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-8-%E8%B0%83%E8%AF%95%E6%A8%A1%E5%9D%97%EF%BC%88RISC-V-Debug-Spec-1-0%EF%BC%89"><span class="toc-number">1.7.8.</span> <span class="toc-text">7.8 调试模块（RISC-V Debug Spec 1.0）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-9-%E7%A1%85%E5%90%8E%E8%B0%83%E8%AF%95%EF%BC%88eFUSE-%E8%A7%A6%E5%8F%91%EF%BC%89"><span class="toc-number">1.7.9.</span> <span class="toc-text">7.9 硅后调试（eFUSE 触发）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-10-%E7%A1%85%E5%90%8E%E8%B0%83%E8%AF%95%E8%A7%A6%E5%8F%91%EF%BC%88%E4%BA%A4%E5%8F%89%E8%A7%A6%E5%8F%91%EF%BC%89"><span class="toc-number">1.7.10.</span> <span class="toc-text">7.10 硅后调试触发（交叉触发）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-11-%E6%8C%87%E4%BB%A4-trace-%E5%8E%8B%E7%BC%A9%EF%BC%88TurboTrace%EF%BC%89"><span class="toc-number">1.7.11.</span> <span class="toc-text">7.11 指令 trace 压缩（TurboTrace）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-12-%E6%8C%87%E4%BB%A4-TRACE-%E6%A0%BC%E5%BC%8F%EF%BC%88Efficient-Trace%EF%BC%89"><span class="toc-number">1.7.12.</span> <span class="toc-text">7.12 指令 TRACE 格式（Efficient Trace）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AB%E3%80%81%E5%B7%A5%E5%85%B7%E9%93%BE%E4%B8%8E%E7%BC%96%E7%A8%8B%E5%AE%9E%E8%B7%B5"><span class="toc-number">1.8.</span> <span class="toc-text">八、工具链与编程实践</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-%E5%B7%A5%E5%85%B7%E9%93%BE"><span class="toc-number">1.8.1.</span> <span class="toc-text">8.1 工具链</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-%E7%BC%96%E8%AF%91%E5%99%A8%E5%86%85%E5%9C%A8%E5%87%BD%E6%95%B0%EF%BC%88RVV-%E7%A4%BA%E4%BE%8B%EF%BC%89"><span class="toc-number">1.8.2.</span> <span class="toc-text">8.2 编译器内在函数（RVV 示例）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-3-%E5%90%91%E9%87%8F%E5%8A%A0%E8%BD%BD%E5%88%86%E6%AE%B5%EF%BC%88strip-mining%EF%BC%89%E4%BB%A3%E7%A0%81"><span class="toc-number">1.8.3.</span> <span class="toc-text">8.3 向量加载分段（strip-mining）代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-%E6%8C%87%E4%BB%A4%E8%B0%83%E5%BA%A6%E7%AE%97%E6%B3%95%EF%BC%88%E7%BC%96%E8%AF%91%E5%99%A8%E5%90%8E%E7%AB%AF%EF%BC%89"><span class="toc-number">1.8.4.</span> <span class="toc-text">8.4 指令调度算法（编译器后端）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-5-%E5%AF%84%E5%AD%98%E5%99%A8%E5%88%86%E9%85%8D%E7%AE%97%E6%B3%95%EF%BC%88%E7%BA%BF%E6%80%A7%E6%89%AB%E6%8F%8F%E4%BC%AA%E7%A0%81%EF%BC%89"><span class="toc-number">1.8.5.</span> <span class="toc-text">8.5 寄存器分配算法（线性扫描伪码）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B9%9D%E3%80%81%E5%BE%AE%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0"><span class="toc-number">1.9.</span> <span class="toc-text">九、微架构设计与实现</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1-%E7%89%A9%E7%90%86%E5%AF%84%E5%AD%98%E5%99%A8%E5%A0%86%EF%BC%88PRF%EF%BC%89%E5%8F%82%E6%95%B0"><span class="toc-number">1.9.1.</span> <span class="toc-text">9.1 物理寄存器堆（PRF）参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-%E5%BF%AB%E9%80%9F%E4%B9%98%E6%B3%95%E5%AE%9E%E7%8E%B0%EF%BC%88Booth-4%EF%BC%8C64%C3%9764%EF%BC%89"><span class="toc-number">1.9.2.</span> <span class="toc-text">9.2 快速乘法实现（Booth-4，64×64）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-3-%E6%B5%AE%E7%82%B9%E4%B9%98%E5%8A%A0%EF%BC%88fmadd-d%EF%BC%89%E6%95%B0%E6%8D%AE%E8%B7%AF%E5%BE%84"><span class="toc-number">1.9.3.</span> <span class="toc-text">9.3 浮点乘加（fmadd.d）数据路径</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-4-%E6%B5%AE%E7%82%B9%E5%BC%82%E5%B8%B8%E8%81%9A%E5%90%88%EF%BC%88fcsr%EF%BC%89"><span class="toc-number">1.9.4.</span> <span class="toc-text">9.4 浮点异常聚合（fcsr）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-5-%E5%90%8C%E6%97%B6%E5%A4%9A%E7%BA%BF%E7%A8%8B%EF%BC%88SMT2%EF%BC%89%E8%B5%84%E6%BA%90%E5%A4%8D%E5%88%B6"><span class="toc-number">1.9.5.</span> <span class="toc-text">9.5 同时多线程（SMT2）资源复制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-6-%E7%89%87%E4%B8%8A%E7%BD%91%E7%BB%9C%EF%BC%88NoC%EF%BC%89%E8%B7%AF%E7%94%B1"><span class="toc-number">1.9.6.</span> <span class="toc-text">9.6 片上网络（NoC）路由</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-7-%E5%BE%AE%E7%A0%81%E4%B8%8E%E5%A4%8D%E6%9D%82%E6%8C%87%E4%BB%A4%E6%8B%86%E8%A7%A3%EF%BC%88x86-%E5%AF%B9%E6%AF%94%EF%BC%89"><span class="toc-number">1.9.7.</span> <span class="toc-text">9.7 微码与复杂指令拆解（x86 对比）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-8-%E5%BE%AE%E7%A0%81-ROM-%E6%A0%BC%E5%BC%8F%EF%BC%88x86-%E9%A3%8E%E6%A0%BC%E5%8F%82%E8%80%83%EF%BC%89"><span class="toc-number">1.9.8.</span> <span class="toc-text">9.8 微码 ROM 格式（x86 风格参考）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E3%80%81%E5%8A%9F%E8%80%97%E3%80%81%E9%9D%A2%E7%A7%AF%E4%B8%8E%E6%97%B6%E5%BA%8F"><span class="toc-number">1.10.</span> <span class="toc-text">十、功耗、面积与时序</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-1-%E5%8A%9F%E8%80%97%E5%88%86%E8%A7%A3%EF%BC%885-%E7%BA%A7-RV64GC%EF%BC%8C28-nm%EF%BC%8C1-GHz%EF%BC%89"><span class="toc-number">1.10.1.</span> <span class="toc-text">10.1 功耗分解（5 级 RV64GC，28 nm，1 GHz）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-2-%E5%8A%9F%E8%80%97%E5%A2%99%EF%BC%88Dennard-%E7%BB%88%E7%BB%93%EF%BC%89"><span class="toc-number">1.10.2.</span> <span class="toc-text">10.2 功耗墙（Dennard 终结）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-3-%E7%83%AD%E8%AE%BE%E8%AE%A1%E5%8A%9F%E8%80%97%EF%BC%88TDP%EF%BC%89%E4%BC%B0%E7%AE%97"><span class="toc-number">1.10.3.</span> <span class="toc-text">10.3 热设计功耗（TDP）估算</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-4-%E6%8C%87%E4%BB%A4%E7%BC%93%E5%AD%98%E8%83%BD%E9%87%8F-%E8%AE%BF%E9%97%AE"><span class="toc-number">1.10.4.</span> <span class="toc-text">10.4 指令缓存能量/访问</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-5-%E5%8A%9F%E8%80%97%E6%96%AD%E7%82%B9%E6%B5%8B%E9%87%8F%E6%B5%81%E7%A8%8B"><span class="toc-number">1.10.5.</span> <span class="toc-text">10.5 功耗断点测量流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-6-%E5%8A%9F%E8%80%97%E4%BC%B0%E7%AE%97%E8%84%9A%E6%9C%AC%EF%BC%88PrimeTime-PX%EF%BC%89"><span class="toc-number">1.10.6.</span> <span class="toc-text">10.6 功耗估算脚本（PrimeTime PX）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-7-%E6%97%B6%E9%92%9F%E9%97%A8%E6%8E%A7%E6%A3%80%E6%9F%A5%EF%BC%88CLP%EF%BC%89"><span class="toc-number">1.10.7.</span> <span class="toc-text">10.7 时钟门控检查（CLP）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-8-%E9%9D%A2%E7%A7%AF%E9%A2%84%E7%AE%97%EF%BC%8828-nm%EF%BC%8C%E4%B8%8D%E5%90%AB-SRAM%EF%BC%89"><span class="toc-number">1.10.8.</span> <span class="toc-text">10.8 面积预算（28 nm，不含 SRAM）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-9-%E7%89%87%E4%B8%8A-SRAM-%E9%9D%A2%E7%A7%AF%E6%A8%A1%E5%9E%8B"><span class="toc-number">1.10.9.</span> <span class="toc-text">10.9 片上 SRAM 面积模型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-10-%E7%89%87%E4%B8%8A-SRAM-%E4%BD%8D%E5%8D%95%E5%85%83%E5%8F%82%E6%95%B0%EF%BC%8828-nm%EF%BC%89"><span class="toc-number">1.10.10.</span> <span class="toc-text">10.10 片上 SRAM 位单元参数（28 nm）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-11-%E5%8F%82%E8%80%83%E5%BC%80%E6%BA%90-core-%E9%9D%A2%E7%A7%AF%E5%AF%B9%E6%AF%94"><span class="toc-number">1.10.11.</span> <span class="toc-text">10.11 参考开源 core 面积对比</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-12-%E5%85%B3%E9%94%AE%E8%B7%AF%E5%BE%84%E6%96%B9%E7%A8%8B%EF%BC%88%E6%97%B6%E5%BA%8F%EF%BC%89"><span class="toc-number">1.10.12.</span> <span class="toc-text">10.12 关键路径方程（时序）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-13-%E5%85%B3%E9%94%AE%E8%B7%AF%E5%BE%84%E6%8B%86%E8%A7%A3%EF%BC%88post-layout%EF%BC%89"><span class="toc-number">1.10.13.</span> <span class="toc-text">10.13 关键路径拆解（post-layout）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-14-%E5%85%B3%E9%94%AE%E4%BF%A1%E5%8F%B7%E5%BB%B6%E8%BF%9F%EF%BC%8828-nm%EF%BC%8C%E5%85%B8%E5%9E%8B%EF%BC%89"><span class="toc-number">1.10.14.</span> <span class="toc-text">10.14 关键信号延迟（28 nm，典型）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-15-%E5%90%8E%E7%AB%AF%E6%8E%A5%E5%8F%A3%E6%97%B6%E5%BA%8F%EF%BC%88AXI4-Lite-%E4%BB%8E%E6%9C%BA%EF%BC%89"><span class="toc-number">1.10.15.</span> <span class="toc-text">10.15 后端接口时序（AXI4-Lite 从机）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-16-%E5%8A%A8%E6%80%81%E9%A2%91%E7%8E%87%E8%B0%83%E6%95%B4%EF%BC%88DVFS-%E8%A1%A8%EF%BC%89"><span class="toc-number">1.10.16.</span> <span class="toc-text">10.16 动态频率调整（DVFS 表）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%B8%80%E3%80%81%E5%AE%89%E5%85%A8%E4%B8%8E%E5%8F%AF%E9%9D%A0%E6%80%A7"><span class="toc-number">1.11.</span> <span class="toc-text">十一、安全与可靠性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-1-%E5%AE%89%E5%85%A8%E6%89%A9%E5%B1%95"><span class="toc-number">1.11.1.</span> <span class="toc-text">11.1 安全扩展</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-2-%E5%AE%89%E5%85%A8%E5%90%AF%E5%8A%A8%EF%BC%88ROM-%E2%86%92-SPL-%E2%86%92-Loader%EF%BC%89"><span class="toc-number">1.11.2.</span> <span class="toc-text">11.2 安全启动（ROM → SPL → Loader）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-3-%E5%8F%AF%E9%9D%A0%E6%80%A7%E6%8C%87%E6%A0%87"><span class="toc-number">1.11.3.</span> <span class="toc-text">11.3 可靠性指标</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%BA%8C%E3%80%81%E9%AA%8C%E8%AF%81%E4%B8%8E%E8%AE%BE%E8%AE%A1%E6%B5%81%E7%A8%8B"><span class="toc-number">1.12.</span> <span class="toc-text">十二、验证与设计流程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#12-1-%E9%AA%8C%E8%AF%81%E8%A6%86%E7%9B%96%E7%8E%87%E7%9B%AE%E6%A0%87"><span class="toc-number">1.12.1.</span> <span class="toc-text">12.1 验证覆盖率目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-2-%E9%97%A8%E7%BA%A7%E4%BB%BF%E7%9C%9F%E9%80%9F%E5%BA%A6"><span class="toc-number">1.12.2.</span> <span class="toc-text">12.2 门级仿真速度</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-3-%E8%AE%BE%E8%AE%A1%E6%A3%80%E6%9F%A5%E6%B8%85%E5%8D%95"><span class="toc-number">1.12.3.</span> <span class="toc-text">12.3 设计检查清单</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-4-%E8%AE%BE%E8%AE%A1%E6%B5%81%E7%A8%8B%E9%87%8C%E7%A8%8B%E7%A2%91"><span class="toc-number">1.12.4.</span> <span class="toc-text">12.4 设计流程里程碑</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-5-%E8%AE%BE%E8%AE%A1%E7%AD%BE%E6%A0%B8%E6%B8%85%E5%8D%95"><span class="toc-number">1.12.5.</span> <span class="toc-text">12.5 设计签核清单</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-6-%E8%AE%BE%E8%AE%A1%E6%94%B6%E6%95%9B%E6%8C%87%E6%A0%87%EF%BC%88%E6%9C%80%E7%BB%88%EF%BC%89"><span class="toc-number">1.12.6.</span> <span class="toc-text">12.6 设计收敛指标（最终）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%B8%89%E3%80%81%E6%96%87%E6%A1%A3%E4%B8%8E%E6%80%BB%E7%BB%93"><span class="toc-number">1.13.</span> <span class="toc-text">十三、文档与总结</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#13-1-%E6%96%87%E6%A1%A3%E4%BA%A4%E4%BB%98%E6%B8%85%E5%8D%95"><span class="toc-number">1.13.1.</span> <span class="toc-text">13.1 文档交付清单</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-2-%E5%8F%82%E8%80%83%E7%BC%A9%E5%86%99%E6%B1%87%E6%80%BB"><span class="toc-number">1.13.2.</span> <span class="toc-text">13.2 参考缩写汇总</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-3-%E5%85%B3%E9%94%AE%E5%85%AC%E5%BC%8F"><span class="toc-number">1.13.3.</span> <span class="toc-text">13.3 关键公式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-4-%E6%80%BB%E7%BB%93%E5%85%AC%E5%BC%8F%E9%80%9F%E8%AE%B0"><span class="toc-number">1.13.4.</span> <span class="toc-text">13.4 总结公式速记</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-5-%E5%85%B3%E9%94%AE%E6%96%B9%E7%A8%8B%E9%80%9F%E6%9F%A5%EF%BC%88%E6%9C%80%E7%BB%88%EF%BC%89"><span class="toc-number">1.13.5.</span> <span class="toc-text">13.5 关键方程速查（最终）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-6-%E7%BB%93%E9%A1%B9%E9%BB%84%E9%87%91%E6%A3%80%E6%9F%A5"><span class="toc-number">1.13.6.</span> <span class="toc-text">13.6 结项黄金检查</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-7-%E5%B8%B8%E8%A7%81%E6%8C%87%E4%BB%A4%E5%BB%B6%E8%BF%9F%E8%A1%A8%EF%BC%88SiFive-U74-1-2-GHz%EF%BC%89"><span class="toc-number">1.13.7.</span> <span class="toc-text">13.7 常见指令延迟表（SiFive U74 1.2 GHz）</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/ff5467f1.html" title="生日祝福静态网站生成框架"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/img/birth_g.jpg" onerror='this.onerror=null,this.src="/assets/gulp/post_404.jpg"' alt="生日祝福静态网站生成框架"></a><div class="content"><a class="title" href="/posts/ff5467f1.html" title="生日祝福静态网站生成框架">生日祝福静态网站生成框架</a><time datetime="2025-11-26T15:02:48.000Z" title="发表于 2025-11-26 23:02:48">2025-11-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/3a102641.html" title="指令集体系结构学习笔记"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/img/imjflelh.png" onerror='this.onerror=null,this.src="/assets/gulp/post_404.jpg"' alt="指令集体系结构学习笔记"></a><div class="content"><a class="title" href="/posts/3a102641.html" title="指令集体系结构学习笔记">指令集体系结构学习笔记</a><time datetime="2025-11-01T04:40:48.000Z" title="发表于 2025-11-01 12:40:48">2025-11-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/3e7af074.html" title="Multisim使用教程详尽版"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/img/multisim_use.jpg" onerror='this.onerror=null,this.src="/assets/gulp/post_404.jpg"' alt="Multisim使用教程详尽版"></a><div class="content"><a class="title" href="/posts/3e7af074.html" title="Multisim使用教程详尽版">Multisim使用教程详尽版</a><time datetime="2025-10-26T10:09:12.000Z" title="发表于 2025-10-26 18:09:12">2025-10-26</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="footer_deal"><a class="deal_link" href="mailto:2447175994@qq.com" title="email"><i class="anzhiyufont anzhiyu-icon-envelope"></i></a><a class="deal_link" href="/atom.xml" title="RSS"><i class="anzhiyufont anzhiyu-icon-rss"></i></a><img class="footer_mini_logo" title="返回顶部" alt="返回顶部" onclick="anzhiyu.scrollToDest(0,500)" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/assets/avatar.png" size="50px"><a class="deal_link" target="_blank" rel="noopener" href="https://github.com/Aurorp1g" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://space.bilibili.com/2066996205" title="Bilibili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a></div><div id="workboard"><img class="workSituationImg boardsign" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/assets/footer/A小屋-科研摸鱼中.svg" alt="距离月入25k也就还差一个大佬带我~" title="距离月入25k也就还差一个大佬带我~"><div id="runtimeTextTip"></div></div><div id="anzhiyu-footer"><div class="footer-group"><div class="footer-title">服务</div><div class="footer-links"><a class="footer-item" title="51la统计" target="_blank" rel="noopener" href="https://v6.51.la/">51la统计</a><a class="footer-item" title="十年之约" target="_blank" rel="noopener" href="https://www.foreverblog.cn/">十年之约</a><a class="footer-item" title="开启星辰之旅" target="_blank" rel="noopener" href="https://stellarium.org/">开启星辰之旅</a></div></div><div class="footer-group"><div class="footer-title">本站</div><div class="footer-links"><a class="footer-item" title="主题源码" href="/update/themes/">主题源码</a><a class="footer-item" title="更新日志" href="/update/">更新日志</a></div></div><div class="footer-group"><div class="footer-title">导航</div><div class="footer-links"><a class="footer-item" title="即刻短文" href="/essay/">即刻短文</a><a class="footer-item" title="留言信箱" href="/comments/">留言信箱</a></div></div><div class="footer-group"><div class="footer-title-group"><div class="footer-title">友链</div><a class="random-friends-btn" id="footer-random-friends-btn" href="javascript:addFriendLinksInFooter();" title="换一批友情链接"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right"></i></a></div><div class="footer-links" id="friend-links-in-footer"></div></div></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo_v5.4.0" title="博客框架为Hexo_v5.4.0"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/assets/footer/Frame-Hexo-blue.svg" alt="博客框架为Hexo_v5.4.0"></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" data-title="主题版本Butterfly_v4.3.1" title="主题版本Butterfly_v4.3.1"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/assets/footer/Theme-Butterfly-6513df.svg" alt="主题版本Butterfly_v4.3.1"></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" data-title="本网站源码由Github提供存储仓库" title="本网站源码由Github提供存储仓库"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/assets/footer/Source-Github-d021d6.svg" alt="本网站源码由Github提供存储仓库"></a><a class="github-badge" target="_blank" href="https://www.jsdelivr.com/" style="margin-inline:5px" data-title="本站使用jsDelivr提供CDN加速与防护" title="本站使用jsDelivr提供CDN加速与防护"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/assets/footer/CDN-jsDelivr-orange.svg" alt="本站使用jsDelivr提供CDN加速与防护"></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/assets/footer/Copyright-BY--NC--SA--4.svg" alt="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"></a></p></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">©2025 By <a class="footer-bar-link" href="/" title="Aurorp1g" target="_blank">Aurorp1g</a></div></div><div id="footer-type-tips"></div><div class="js-pjax"><script>function subtitleType(){fetch("https://v1.hitokoto.cn").then(t=>t.json()).then(t=>{{const e="出自 "+t.from,p=["人生如镜，你对它笑，它必回你以笑颜。","蹉跎只能感动自己，行动才能打动别人。","今日风起，明日雨至，世事皆有定数。","时间不待人，勇者方能留其芳华。","生命似未完书卷，待你书写传奇。","流沙般时光，越紧握越易逝，学会放手。","想，全是问题；做，才有答案。","雨滴落，自然书温柔诗行。","勇敢地迈出第一步，是治愈焦虑的良药。","风带走一切，包括留不住的美好。","树不语，年轮诉说岁月。","成功其实很简单，就是比失败击倒你们的次数多一次。","接纳自己的不完美、肯定和认可自己，是我们这一生重要的课题。","今日之我，为明日之我铺路。","心怀梦想，脚踏实地，未来可期。","知足常乐，珍惜当下，便是幸福。","人生如棋，落子无悔，步步精进。","努力提升自己，永远比仰望别人有意义","爱如暖阳，照耀他人，亦温暖自身。","你的迷茫，大多都是因为想得太多、做得太少。","岁月悠长，愿你心怀热忱，逐光前行。","微笑面对生活，生活必馈赠你微笑。","以梦为马，不负韶华，追逐理想。","世间美好，皆需用心感受，方能领略。","每一次努力，都是对未来的投资。","心有山水，眼有星辰，灵魂自有归处。","人生如旅，重要的是沿途风景与心情。","真正的强者，能在困境中绽放光芒。","生活不只眼前的苟且，还有诗和远方。","躲起来的星星也在努力发光，你也要加油。","无论是谁，只有努力多一点，人生的遗憾才会少一点。"];p.unshift(t.hitokoto,e),window.typed=new Typed("#footer-type-tips",{strings:p,startDelay:300,typeSpeed:150,loop:!0,backSpeed:50})}})}"function"==typeof Typed?subtitleType():getScript("https://cdn.cbd.int/typed.js@2.1.0/dist/typed.umd.js").then(subtitleType)</script></div></div><div class="footer-bar-right"><a class="footer-bar-link" href="/update" title="主题">主题</a><a class="footer-bar-link" target="_blank" rel="noopener" href="https://image.anheyu.com" title="图床">图床</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">37</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">11</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">8</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">个人网站</div><div class="back-menu-list"><a class="back-menu-item" href="https://aurorp1g.github.io" title="博客"><img class="back-menu-item-icon" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/favicon.ico" alt="博客"><span class="back-menu-item-text">博客</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://github.com/Aurorp1g" title="GitHub"><img class="back-menu-item-icon" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="fab fa-github" alt="GitHub"><span class="back-menu-item-text">GitHub</span></a><a class="back-menu-item" href="https://aurorp1g.github.io/CTF_Zone/" title="CTF Zone"><img class="back-menu-item-icon" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="https://aurorp1g.github.io/CTF_Zone/assets/icon.ico" alt="CTF Zone"><span class="back-menu-item-text">CTF Zone</span></a><a class="back-menu-item" href="https://aurorp1g.github.io/Heart-Notes/" title="Heart Notes"><img class="back-menu-item-icon" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="https://aurorp1g.github.io/Heart-Notes/public/favicon.ico" alt="Heart Notes"><span class="back-menu-item-text">Heart Notes</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">实用工具</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="fas fa-cloud" alt="安知鱼图床"><span class="back-menu-item-text">安知鱼图床</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://www.vercount.one/" title="vercount计数"><img class="back-menu-item-icon" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="https://www.vercount.one/favicon.ico" alt="vercount计数"><span class="back-menu-item-text">vercount计数</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://icon.liiiu.cn/" title="万能图标"><img class="back-menu-item-icon" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="fas fa-icons" alt="万能图标"><span class="back-menu-item-text">万能图标</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://haowallpaper.com/" title="哲风壁纸"><img class="back-menu-item-icon" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="https://haowallpaper.com/favicon.ico" alt="哲风壁纸"><span class="back-menu-item-text">哲风壁纸</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>文库</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size:.9em"></i> <span>归档</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size:.9em"></i> <span>分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size:.9em"></i> <span>标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>网站</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size:.9em"></i> <span>留言信箱</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/charts/"><i class="fa fa-pie-chart faa-tada"></i> <span>博客统计</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/update/"><i class="fa fa-history faa-tada"></i> <span>更新日志</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>导航</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/laboratory/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size:.9em"></i> <span>项目展示</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size:.9em"></i> <span>友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/equipment/"><i class="anzhiyufont anzhiyu-icon-dice-d20 faa-tada" style="font-size:.9em"></i> <span>我的装备</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>生活</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size:.9em"></i> <span>音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/personal/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size:.9em"></i> <span>相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/video/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size:.9em"></i> <span>视频库</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/personal/love/"><i class="fa-beat-fade fas fa-heartbeat"></i> <span>LoveHub</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/personal/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size:.9em"></i> <span>本站</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="fa-solid fa-pen-fancy faa-tada"></i> <span>哔哔</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Daily-Life/" style="font-size:.88rem">Daily Life<sup>15</sup></a><a href="/tags/HTML/" style="font-size:.88rem">HTML<sup>1</sup></a><a href="/tags/Java/" style="font-size:.88rem">Java<sup>3</sup></a><a href="/tags/Linux/" style="font-size:.88rem">Linux<sup>1</sup></a><a href="/tags/Markdown/" style="font-size:.88rem">Markdown<sup>1</sup></a><a href="/tags/PWN/" style="font-size:.88rem">PWN<sup>1</sup></a><a href="/tags/Python/" style="font-size:.88rem">Python<sup>4</sup></a><a href="/tags/Study/" style="font-size:.88rem">Study<sup>25</sup></a><a href="/tags/%E5%A4%96%E6%8C%82%E6%A0%87%E7%AD%BE/" style="font-size:.88rem">外挂标签<sup>1</sup></a><a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" style="font-size:.88rem">操作系统<sup>3</sup></a><a href="/tags/%E6%B1%87%E7%BC%96/" style="font-size:.88rem">汇编<sup>1</sup></a></div></div><hr></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="14398786360" server="netease" type="playlist" mutex="true" preload="auto" theme="var(--anzhiyu-main)" data-lrctype="0" order="list" volume="0.75"></meting-js><script>document.addEventListener("DOMContentLoaded",()=>{anzhiyu.mergeNavMusicList()})</script></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="is-center" id="loading-database"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-pulse-icon"></i> <span>数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div><hr><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size:1rem"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-mode"><i class="anzhiyufont anzhiyu-icon-arrows-rotate"></i><span>切换单曲循环</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;/music/&quot;, &quot;_blank&quot;);" style="display:none"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><script>var now1=new Date;function createtime1(){var o=new Date("03/01/2025 00:00:00");now1.setTime(now1.getTime()+250);var c=(now1-o)/1e3/60/60/24,n=["Welcome to Aurorp1g's blog!","Computer Enthusiast 🍭🍭🍭","\n █████╗ ██╗   ██╗██████╗  ██████╗ ██████╗ ██████╗  ██╗ ██████╗ \n██╔══██╗██║   ██║██╔══██╗██╔═══██╗██╔══██╗██╔══██╗███║██╔════╝ \n███████║██║   ██║██████╔╝██║   ██║██████╔╝██████╔╝╚██║██║  ███╗\n██╔══██║██║   ██║██╔══██╗██║   ██║██╔══██╗██╔═══╝  ██║██║   ██║\n██║  ██║╚██████╔╝██║  ██║╚██████╔╝██║  ██║██║      ██║╚██████╔╝\n╚═╝  ╚═╝ ╚═════╝ ╚═╝  ╚═╝ ╚═════╝ ╚═╝  ╚═╝╚═╝      ╚═╝ ╚═════╝ \n                                                              \n\n","小站已经苟活",Math.floor(c),"天啦!","©2025 By Aurorp1g"];setTimeout(console.log.bind(console,`\n%c${n[0]} %c ${n[1]} \n %c ${n[2]} %c${n[3]}%c ${n[4]}%c ${n[5]}\n\n%c ${n[6]}\n`,"color:#39c5bb","","color:#39c5bb","color:#39c5bb","","color:#39c5bb",""))}function createtime2(){var o=["NCC2-036","调用前置摄像头拍照成功，识别为「大聪明」📷️","Photo captured: "," 🤪 "];setTimeout(console.log.bind(console,`%c ${o[0]} %c ${o[1]} %c \n${o[2]} %c\n${o[3]}`,"color:white; background-color:#0d8d8fff","","",'background:url("https://unpkg.zhimg.com/anzhiyu-assets@latest/image/common/tinggge.gif") no-repeat;font-size:600%')),setTimeout(console.log.bind(console,"%c WELCOME %c 欢迎光临，大聪明","color:white; background-color:#1ca86eff","")),setTimeout(console.log.bind(console,"%c ⚡ Powered by Aurorp1g %c 你正在访问 Aurorp1g 的博客 🐳","color:#fadfa3; background-color:#030307; padding:5px 0;","")),setTimeout(console.warn.bind(console,"%c W23-12 %c 系统监测到你已打开控制台","color:white; background-color:#2B769F","")),setTimeout(console.warn.bind(console,"%c S013-782 %c 你现在正处于监控中···","color:white; background-color:#d9534f",""))}createtime1(),createtime2(),console.log=function(){},console.error=function(){},console.warn=function(){}</script><script async src="/js/random.js"></script><script async>!function(){var e,t,n,r,a,o,i,l=new Date("03/01/2025 00:00:00"),u=new Date,s=new Date("03/01/2025 00:00:00");setInterval(()=>{!function(){u=new Date,a=u.getHours(),o=Math.trunc(234e8+(u-s)/1e3*17),i=(o/1496e5).toFixed(6);var c=(u-l)/1e3/60/60/24;e=Math.floor(c);var d=(u-l)/1e3/60/60-24*e;t=Math.floor(d),1==String(t).length&&(t="0"+t);var h=(u-l)/1e3/60-1440*e-60*t;n=Math.floor(h),1==String(n).length&&(n="0"+n);var f=(u-l)/1e3-86400*e-3600*t-60*n;r=Math.round(f),1==String(r).length&&(r="0"+r)}(),function(){if(!document.getElementById("footer"))return;let l="";if(a<18&&a>=9)l=`本站居然运行了 ${e} 天<span id='runtime'> ${t} 小时 ${n} 分 ${r} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i><br> 旅行者 1 号当前距离地球 ${o} 千米，约为 ${i} 个天文单位 🚀`;else{let a=document.querySelector("#workboard .workSituationImg");null!=a&&(a.src="/assets/footer/A小屋-下班休息啦.svg",a.title="下班了就该开开心心的玩耍，嘿嘿~",a.alt="下班了就该开开心心的玩耍，嘿嘿~"),l=`本站居然运行了 ${e} 天<span id='runtime'> ${t} 小时 ${n} 分 ${r} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i><br> 旅行者 1 号当前距离地球 ${o} 千米，约为 ${i} 个天文单位 🚀`}document.getElementById("runtimeTextTip")&&(document.getElementById("runtimeTextTip").innerHTML=l)}()},1e3)}()</script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>if(window.MathJax)MathJax.startup.document.state(0),MathJax.texReset(),MathJax.typesetPromise();else{window.MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],tags:"ams"},chtml:{scale:1.1},options:{renderActions:{findScript:[10,t=>{for(const e of document.querySelectorAll('script[type^="math/tex"]')){const a=!!e.type.match(/; *mode=display/),n=new t.options.MathItem(e.textContent,t.inputJax[0],a),s=document.createTextNode("");e.parentNode.replaceChild(s,e),n.start={node:s,delim:"",n:0},n.end={node:s,delim:"",n:0},t.math.push(n)}},""]}}};const t=document.createElement("script");t.src="https://cdn.cbd.int/mathjax@3.2.2/es5/tex-mml-chtml.js",t.id="MathJax-script",t.async=!0,document.head.appendChild(t)}</script><script>(()=>{const e=document.querySelectorAll("#article-container .mermaid-wrap");if(0===e.length)return;const t=()=>{window.loadMermaid=!0;const t="dark"===document.documentElement.getAttribute("data-theme")?"dark":"default";Array.from(e).forEach((e,n)=>{const d=e.firstElementChild,r="mermaid-"+n,a="%%{init:{ 'theme':'"+t+"'}}%%\n"+d.textContent,i=mermaid.render(r,a);var m;"string"==typeof i?(m=i,d.insertAdjacentHTML("afterend",m)):i.then(({svg:e})=>{d.insertAdjacentHTML("afterend",e)})})},n=()=>{window.loadMermaid?t():getScript("https://cdn.cbd.int/mermaid@10.2.4/dist/mermaid.min.js").then(t)};anzhiyu.addGlobalFn("themeChange",t,"mermaid"),window.pjax?n():document.addEventListener("DOMContentLoaded",n)})()</script><script>(()=>{const t=t=>"dark"===t?"noborder_dark":"light",e=()=>{const e=Object.assign({src:"https://giscus.app/client.js","data-repo":"Aurorp1g/Aurorp1g.github.io","data-repo-id":"R_kgDON_6FSw","data-category-id":"DIC_kwDON_6FS84CtLN5","data-theme":t(document.documentElement.getAttribute("data-theme")),"data-reactions-enabled":"1",crossorigin:"anonymous",async:!0},{"data-lang":"zh-CN","data-mapping":"title","data-category":"Announcements","data-input-position":"bottom"}),a=document.createElement("script");for(let t in e)a.setAttribute(t,e[t]);document.getElementById("giscus-wrap").appendChild(a)};anzhiyu.addGlobalFn("themeChange",e=>{(t=>{const e=document.querySelector("iframe.giscus-frame");e&&e.contentWindow.postMessage({giscus:t},"https://giscus.app")})({setConfig:{theme:t(e)}})},"giscus"),e()})()</script><input type="hidden" name="page-type" id="page-type" value="post"></div><script async data-pjax="" src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.1/bubble/bubble.js"></script><script>var visitorMail=""</script><script async data-pjax="" src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><script src="/js/fomal.js"></script><script src="https://unpkg.com/hexo-tag-bilibili-card/components/bilibili-card/bilibili-card.js" async></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload='this.media="all"'><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="/js/meting.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors=["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"];var pjax=new Pjax({elements:'a:not([target="_blank"])',selectors:pjaxSelectors,cacheBust:!1,analytics:!1,scrollRestoration:!1});document.addEventListener("pjax:send",function(){if(anzhiyu.removeGlobalFnEvent("pjax"),anzhiyu.removeGlobalFnEvent("themeChange"),document.getElementById("rightside").classList.remove("rightside-show"),window.aplayers)for(let e=0;e<window.aplayers.length;e++)window.aplayers[e].options.fixed||window.aplayers[e].destroy();"object"==typeof typed&&typed.destroy();const e=document.body.classList;e.contains("read-mode")&&e.remove("read-mode")}),document.addEventListener("pjax:complete",()=>{window.lazyLoadInstance?.update()}),document.addEventListener("pjax:complete",function(){window.refreshFn(),document.querySelectorAll("script[data-pjax]").forEach(e=>{const t=document.createElement("script"),a=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach(e=>t.setAttribute(e.name,e.value)),t.appendChild(document.createTextNode(a)),e.parentNode.replaceChild(t,e)}),GLOBAL_CONFIG.islazyload&&window.lazyLoadInstance.update(),"function"==typeof panguInit&&panguInit(),"function"==typeof gtag&&gtag("config","",{page_path:window.location.pathname}),"object"==typeof _hmt&&_hmt.push(["_trackPageview",window.location.pathname]),"function"==typeof loadMeting&&document.getElementsByClassName("aplayer").length&&loadMeting(),"object"==typeof Prism&&Prism.highlightAll()}),document.addEventListener("pjax:error",e=>{404===e.request.status&&pjax.loadUrl("/404.html")})</script><script async data-pjax="" src="https://events.vercount.one/js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>