<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><title>网络技术知识点 | Aurorp1g's Blog</title><meta name="keywords" content="Study"><meta name="author" content="Aurorp1g"><meta name="copyright" content="Aurorp1g"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#18171d"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="网络技术知识点"><meta name="application-name" content="网络技术知识点"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#18171d"><meta property="og:type" content="article"><meta property="og:title" content="网络技术知识点"><meta property="og:url" content="https://aurorp1g.github.io/posts/1ad824a8.html"><meta property="og:site_name" content="Aurorp1g Blog"><meta property="og:description" content="🦐对计算机网络的相关知识点进行总结"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://aurorp1g.github.io/img/net_work.avif"><meta property="article:author" content="Aurorp1g"><meta property="article:tag" content="程序设计,网络安全,CTF,算法,代码,Aurorp1g"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://aurorp1g.github.io/img/net_work.avif"><meta name="description" content="🦐对计算机网络的相关知识点进行总结"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://aurorp1g.github.io/posts/1ad824a8.html"><link rel="preconnect" href="//cdn.cbd.int"><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="google-site-verification" content="xxx"><meta name="baidu-site-verification" content="code-xxx"><meta name="msvalidate.01" content="xxx"><link rel="stylesheet" href="https://npm.elemecdn.com/justlovesmile-static/icon/font-awesome-animation-1.1.1/css/font-awesome-animation.min.css"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="/css/swiper.min.css" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG={linkPageTop:void 0,peoplecanvas:{enable:!0,img:"/assets/sticky/open-peeps-sheet.png"},postHeadAiDescription:{enable:!0,gptName:"Aurorp1g",mode:"local",switchBtn:!1,btnLink:"https://afdian.net/item/886a79d4db6711eda42a52540025c377",randomNum:3,basicWordCount:1e3,key:"xxxx",Referer:"https://xx.xx/"},diytitle:void 0,LA51:void 0,greetingBox:{enable:!0,default:"晚上好👋",list:[{greeting:"晚安😴",startTime:0,endTime:5},{greeting:"早上好鸭👋, 祝你一天好心情！",startTime:6,endTime:9},{greeting:"上午好👋, 状态很好，鼓励一下～",startTime:10,endTime:10},{greeting:"11点多啦, 在坚持一下就吃饭啦～",startTime:11,endTime:11},{greeting:"午安👋, 宝贝",startTime:12,endTime:14},{greeting:"🌈充实的一天辛苦啦！",startTime:14,endTime:18},{greeting:"19点喽, 奖励一顿丰盛的大餐吧🍔。",startTime:19,endTime:19},{greeting:"晚上好👋, 在属于自己的时间好好放松😌~",startTime:20,endTime:24}]},twikooEnvId:"",commentBarrageConfig:void 0,music_page_default:"custom",root:"/",preloader:{source:2},friends_vue_info:void 0,navMusic:!0,mainTone:void 0,authorStatus:{skills:["🤖️ 数码科技爱好者","🔍 分享与热心帮助","🏠 智能家居小能手","🔨 设计开发一条龙","🤝 专修交互与设计","🏃 脚踏实地行动派","🧱 团队小组发动机","💢 壮汉人狠话不多"]},algolia:void 0,localSearch:{path:"/search.xml",preload:!0,languages:{hits_empty:"找不到您查询的内容：${query}"}},translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"繁",msgToSimplifiedChinese:"简",rightMenuMsgToTraditionalChinese:"转为繁体",rightMenuMsgToSimplifiedChinese:"转为简体"},noticeOutdate:{limitDay:365,position:"top",messagePrev:"距离上次更新已经过去了",messageNext:"天，文章的内容可能已经过时。"},highlight:{plugin:"highlight.js",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:230},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,simplehomepage:!0,post:!1},runtime:"天",date_suffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:{copy:!0,copyrightEbable:!1,limitCount:50,languages:{author:"作者: Aurorp1g",link:"链接: ",source:"来源: Aurorp1g Blog",info:"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。",copySuccess:"复制成功，复制和转载请标注本文地址"}},lightbox:"fancybox",Snackbar:{chs_to_cht:"你已切换为繁体",cht_to_chs:"你已切换为简体",day_to_night:"你已切换为深色模式",night_to_day:"你已切换为浅色模式",bgLight:"#425AEF",bgDark:"#1f1f1f",position:"top-center"},source:{justifiedGallery:{js:"https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js",css:"https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css"}},isPhotoFigcaption:!1,islazyload:!0,isAnchor:!1,shortcutKey:void 0,autoDarkmode:!1}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={configTitle:"Aurorp1g Blog",title:"网络技术知识点",postAI:"这篇文章全面总结了计算机网络的核心知识点，涵盖网络概述、物理层、数据链路层、网络层、运输层、应用层等内容。详细讲解TCP/IP协议栈、数据通信基础、信道复用技术、IP地址与路由、TCP与UDP协议、网络安全等关键概念，并包含大量图表和实例分析，适合网络技术学习和复习。,这篇文章通过实际网络故障案例分析，阐述了TCP/IP协议栈各层常见问题的诊断方法。重点介绍了Wireshark抓包分析技巧、路由表配置实例以及网络安全防护策略，提供了从理论到实践的完整学习路径，适合网络工程师入门参考。",pageFillDescription:"第一章 概述, 1.1 计算机网络在信息时代中的作用, 1.2 互联网概述, 1.2.1 网络的网络, 1.2.2 互联基础结构发展的三个阶段, 1.2.3 互联网的标准化工作, 1.3 互联网的组成, 1.3.1 互联网的边缘部分, 客户 - 服务器方式：, 对等连接方式：P2P, 1.3.2 互联网的核心部分, 分组交换的主要特点：, 优点：, 分组交换带来的问题：, 三种交换的比较：, 1.4 计算机网络在我国的发展, 1.5 计算机网络的类别, 1.5.1 计算机网络的定义, 1.5.2 计算机网络的类别, 按照网络的作用范围进行分类：, 按照网络使用者分类：, 用来把用户接入到互联网的网络, 1.6 计算机网络的性能, 1.6.1 计算机网络的性能指标, 1.6.2 计算机网络的非性能指标, 1.7 计算机网络体系结构, 1.7.1 计算机网络体系结构的形成, 1.7.2 协议与划分层次, 1.7.3 具有五层协议的体系结构, 1.7.4 实体协议服务和服务访问点, 1.7.5 TCP/IP 的体系结构, 第二章 物理层, 2.1 物理层的基本概念, 2.2 数据通信的基础知识, 2.2.1 数据通信系统的模型, 2.2.2 有关信道的几个基本概念, 2.3 信道的极限容量, 2.3 物理层下面的传输媒体, 2.3.1 导引型传输媒体, 2.3.2 非引导型传输媒体, 2.4 信道复用技术, 2.4.1 频分复用时分复用和统计时分复用, 2.5 数字传输系统, 2.6 宽带接入技术, 2.6.1 ADSL 技术, 2.6.2 光线同轴混合网, 2.6.3 FTTx 技术, 第三章 数据链路层, 3.1 使用点对点信道的数据链路层, 3.1.1 数据链路和帧, 3.1.2 三个基本问题, 3.2 点对点协议 PPP, 3.2.1 PPP 协议的特点, 3.2.2 PPP 协议的帧格式, 3.2.3 PPP 协议的工作状态, 3.3 使用广播信道的数据链路层, 3.3.1 局域网的数据链路层, 3.3.2 CSMA/CD 协议, 3.3.3 使用集线器的星形拓扑, 3.3.4 以太网的信道利用率, 3.3.5 以太网的 MAC 的层, 3.4 扩展的以太网, 3.4.1 在物理层扩展以太网, 3.4.2 在数据链路层扩展以太网, 3.4.3 虚拟局域网, 3.5 高速以太网, 3.5.1 100BASE-T 以太网, 3.5.2 吉比特以太网, 3.5.3 10 吉比特以太网 (10GE) 和更快的以太网, 3.5.4 使用以太网进行宽带接入, 第四章 网络层, 4.1 网络层提供的两种服务, 4.2 网际协议 IP, 4.2.1 虚拟互连网络, 4.2.2 分类的 IP 地址, 4.2.3 IP 地址与硬件地址, 4.2.4 地址解析协议 ARP, 4.2.5 IP 数据报的格式, 4.3 划分子网和构造超网, 4.3.1 划分子网, 4.3.2 使用子网时分组的转发, 4.3.3 无分类编址 CIDR（构造超网）, 4.4 网际控制报文协议 ICMP, 4.4.1 ICMP 报文的种类, ICMP 报文的种类, ICMP 差错报告报文的类型：, ICMP 询问报文的类型：, 4.4.2 ICMP 的应用举例, 4.5 互联网的路由选择协议, 4.5.1 有关路由选择协议的几个基本概念, 4.5.2 内部网关协议 RIP, 4.5.3 内部网关协议 OSPF, 4.5.4 外部网关协议 BGP, 4.5.5 路由器的构成, 4.6 IPv6, 4.6.1 IPv6 的基本首部, 4.6.2 IPv6 的地址, 4.7 多播, 4.8 虚拟专用网和网络地址转换 NAT, 4.9 多协议标记交换 MPLS, 第五章 运输层, 5.1 运输层协议概述, 5.1.1 进程之间的通信, 5.1.2 运输层的两个主要协议, 5.1.3 运输层的端口, 5.2 用户数据报协议 UDP, 5.2.1 UDP 概述, 5.2.2 UDP 的首部格式, 5.3 传输控制协议 TCP 概述, 5.3.1 TCP 最主要的特点, 5.3.2 TCP 的连接, 可靠传输的工作原理, 5.4.1 停止等待协议, 5.4.2 连续 ARQ 协议, 5.5 TCP 报文段的首部格式, 5.6 TCP 可靠传输的实现, 5.6.1 TCP 以字节为单位的滑动窗口, 5.6.2 超时重传时间的选择, 5.6.3 选择确认 SACK, 5.7 TCP 流量控制, 5.7.1 利用滑动窗口实现流量控制, 5.7.2 TCP 的传输效率, 5.8 TCP 的拥塞控制, 5.8.1 拥塞控制的一般原理, 5.8.2 TCP 的拥塞控制方法, 慢开始和拥塞避免, 快重传算法：, 快恢复算法, 5.8.3 主动队列管理, 5.9 TCP 的运输连接管理, 5.9.1 TCP 的连接建立, 5.9.2 TCP 的连接释放, 第六章 应用层, 6.1 域名系统 DNS, 6.1.1 域名系统概述, 互联网采用了层次树状结构的命名方法。, 顶级域名：, 6.1.3 域名服务器, 6.2 文件传送协议, 6.2.1 FTP 概述, 6.2.2 FTP 的基本工作原理, 6.2.3 简单文件传送协议 TFTP, 6.3 远程终端协议 TELNET, 6.4 万维网 WWW, 6.4.1 万维网概述, 6.4.2 统一资源定位符 URL, 6.4.3 超文本传送协议 HTTP, 6.4.4 万维网的文档, 6.5 电子邮件, 6.5.1 电子邮件概述, 电子邮件系统组成构件：, 用户代理 UA（电子邮件客户端软件）：, 电子邮件组成：, 电子邮件地址格式：, 6.5.2 简单邮件传送协议 SMTP, SMTP通信的三个阶段：, 6.5.3 电子邮件的信息格式, 6.5.4 邮件读取协议 POP3 和 IMAP, 6.5.5 基于万维网的电子邮件, 6.6 动态主机配置协议 DHCP, 附录：常用协议与端口对照表（部分）, 总结：网络层次与协议对应关系内容有点多可能有弄错的地方注意辨别第一章概述计算机网络在信息时代中的作用世纪的重要特征数字化网络化信息化世纪是以网络为核心的信息时代常见三类网络电信网络有线电视网络计算机网络的中文译名因特网互联网由数量极大的各种计算机网络互连起来互联网具有两个重要的特点连通性和共享连通性互联网使上网用户之间不管相距多远都可以非常方便的交换各种信息好像这些用户中端是直接连通的共享就是指资源共享资源包括信息软件硬件互联网互联网概述网络的网络计算机网络由若干结点和连接这些结点的链路组成结点包括计算机集线器交换机路由器互联网网络之间通过路由器互连起来就构成了一个覆盖范围更大的计算机网络因此互联网是网络中的网络网络网络把许多计算机连接在一起而互联网则把许多网络通过路由器连接在一起与网络相连的计算机称为主机计算机网络的三种定义广义观点实现远程信息处理的系统或能进一步达到资源共享的系统资源共享观点以能够相互共享资源的方式互联起来的自治计算机系统的集合用户透明性观点存在一个能为用户自动管理资源的网络操作系统它能够调用用户所需要的资源而整个网络就像一个大的计算机系统一样对用户是透明的互联基础结构发展的三个阶段第一阶段单个网络向互连网发展的过程互联网的雏形单个的分组交换网年协议成为的标准协议互连网泛指由多个计算机网络互连而成的计算机网络互联网指当前全球最大的开放的由众多网络相互连接而成的特定互连网它采用协议族作为通信的规则且前身为美国的第二阶段三级结构的互联网三级计算机网络主干网地区网校园网或企业网第三阶段形成了多层次的结构的互联网互联网服务提供者流程向互联网管理机构申请很多地址同时拥有通信线路以及路由器等连网设备任何机构和个人只要向某个交纳规定的费用就可以从该获取所需地址的使用权并可通过该接入到互联网层次主干地区本地互联网交换点作用允许两个网络直接相连并交换分组而不需要再通过第三个网络来转发分组常采用工作在数据链路层的网络交换机这些网络交换机都用局域网互连起来万维网万维网亦作英文全称为是一个由许多互相链接的超文本组成的系统通过互联网访问在这个系统中每个有用的事物称为一样资源并且由一个全局统一资源标识符标识这些资源通过超文本传输协议传送给用户而后者通过点击链接来获得资源万维网联盟英语简称又称理事会年月在麻省理工学院计算机科学实验室成立万维网联盟的创建者是万维网的发明者蒂姆伯纳斯李百度百科互联网的标准化工作互联网协会互联网体系结构委员会互联网工程部互联网工程指导小组主要针对协议的开发和标准化互联网研究部互联网研究指导小组请求评论指定互联网标准的三个阶段互联网草案建议标准互联网标准互联网的组成从工作方式上看边缘部分用户直接使用的部分主机核心部分为边缘部分提供服务的连通性和交换网络和路由器从组成部分来看硬件软件协议从功能组成上来看通信子网数据传输交换控制存储资源子网实现硬件软件数据资源共享的设备及其软件的集合互联网的边缘部分端系统处在互联网边缘的部分就是连接在互联网上的所有的主机这些主机又称为端系统端系统之间的通信方式客户服务器方式对等方式客户服务器方式主机运行客户程序主机运行服务器程序向发出服务请求向提供服务客户是服务的请求方服务器是服务的提供方对于客户程序被用户调用后运行通信时主动向远地服务器发起通信因此客户程序必须知道服务器程序的地址不需要特殊的硬件和很复杂的操作系统对于服务器程序是一种专门来提供某种服务的程序可同时处理多个客户请求系统启动后自动调用并不断运行被动等待接受来自各地的客户的请求因此服务器不需要知道客户程序的地址一般需要有强大的硬件和高级的操作系统支持对等连接方式方式只要两台主机都运行了对等连接软件软件就能进行平等的对等连接通信互联网的核心部分在网络中心起特殊作用的是路由器它是一种专用计算机但不叫主机路由器是实现分组交换的关键构件其任务是转发收到的分组这是网络核心部分最重要的功能互联网的核心部分是由许多网络和把它们互连起来的路由器组成而主机处在互联网的边缘部分互联网核心部分中的路由器之间一般是用高速链路连接而在网络边缘的主机接入到核心部分则通常以相对较低速率的链路相连接电路交换的特点部电话机两两直接相连需对电线这种直接连接方法所需要的电线对的数量与电话机数量的平方成正比当电话机的数量增多时就要使用交换机来完成全网的交换任务电路交换每一部电话都直接连接到交换机上而交换机使用交换的方法让电话用户彼此之间可以很方便地通信交换按照某种方式动态的分配传输线路的资源电路交换必定是面向连接的电路交换的三个阶段建立连接占用通信资源通信一直占用释放连接归还通信资源在通话的全部时间内通话的两个用户始终占用端到端的通信资源利用率低计算机数据具有突发性分组交换的主要特点分组交换网采用存储转发技术分组交换是面向无连接的网络层是分组交换报文要发送的整块数据在发送端先把较长的报文划分成较短的固定长度的数据段在每一个数据段前面添加上首部构成分组分组又叫包而分组的首部也可以称为包头主机是为用户进行信息处理的路由器则是用来转发分组的即进行分组交换分组是在互联网中传送的数据单元依次把各分组发送到接收端分组的首部包含了目的地址源地址等重要控制信息分组交换网中的结点交换机根据收到的分组首部的地址信息把分组转发到下一个结点交换机每一个分组在互联网中独立地选择传输路径接收端收到分组后剥去首部还原成报文路由器处理分组的过程把收到的分组先放入缓存暂时存储查找转发表找出到某个目的地址应从哪个端口转发把分组送到适当的端口转发出去优点优点所采用的手段高效在分组传输过程中动态分配传输带宽对通信链路是逐段占用灵活为每一个分组独立地选择最合适的转发路由迅速以分组作为传送单位可以不先建立连接就能向其他主机发送分组可靠保证可靠性的网络协议分布式多路由的分组交换网使网络有很好的生存性分组交换带来的问题分组在各结点存储转发时需要排队这就会造成一定的时延分组必须携带的首部里面有必不可少的控制信息也造成了一定的开销三种交换的比较电路交换整个报文的比特流连续地从源点直达终点好像在一个管道中传送面向连接报文交换整个报文先传送到相邻结点全部存储下来后查询转发表转发到下一个结点面向无连接分组交换单个分组传送到相邻结点存储下来后查找转发表转发到下一个结点面向无连接计算机网络在我国的发展规模最大的就是下面这五个中国电信互联网也就是原来的中国公用计算机互联网中国联通互联网中国移动互联网中国教育和科研计算机网中国科学技术网计算机网络的类别计算机网络的定义定义计算机网络主要是由一些通用的可编程的硬件互连而成的而这些硬件并非专门用来实现某一特定目的例如传送数据或视频信号这些可编程的硬件能够用来传送多种不同类型的数据并能支持广泛的和日益增长的应用根据定义计算机网络所连接的硬件并不限于一般的计算机而是包括了智能手机计算机网络并非专门用来传送数据而是能够支持很多种的应用包括今后可能出现的各种应用可编程的硬件表明这种硬件一定包含有中央处理机计算机网络的类别按照网络的作用范围进行分类广域网城域网局域网个人区域网无线个人区域网若中央处理机之间的距离非常近如仅米的数量级甚至更小些则一般就称之为多处理机系统而不称它为计算机网络按照网络使用者分类公用网专用网用来把用户接入到互联网的网络接入网它又称为本地接入网或居民接入网接入网是一类比较特殊计算机网络用于讲用户接入互联网接入网本身既不属于互联网的核心部分也不属于互联网的边缘部分接入网是从某个用户端系统到互联网中的第一个路由器也称为边缘路由器之间的一种网络计算机网络的性能计算机网络的性能指标速率比特是计算机中数据量的单位也是信息论中使用的信息量的单位速率是计算机网络中最重要的一个性能指标指的是数据的传送速率它也称为数据率或比特率速率的单位是或等例如的数据率就记为速率往往是指额定速率或标称速率非实际运行速率带宽两种不同意义带宽本来是指信号具有的频带宽度其单位是赫或千赫兆赫吉赫等频域在计算机网络中带宽用来表示网络中某通道传送数据的能力表示在单位时间内网络中的某信道所能通过的最高数据率单位是即比特每秒时域吞吐量吞吐量表示在单位时间内通过某个网络或信道接口的数据量吞吐量更经常地用于对现实世界中的网络的一种测量以便知道实际上到底有多少数据量能够通过网络吞吐量受网络的带宽或网络的额定速率的限制时延时延是指数据一个报文或分组甚至比特从网络或链路的一端传送到另一端所需的时间有时也称为延迟或迟延网络中的时延由以下几个不同的部分组成发送时延传输时延指主机或路由器发送数据帧所需要的时间传播时延是电磁波在信道中传播一定的距离需要花费的时间发送时延发送在机器内部的发送器中与传输信道的长度无关传播时延发生在机器外部的传输信道媒体上与信号的发送速率无关信号传送的距离越远传播时延就越大处理时延主机或路由器在收到分组时为处理分组例如分析首部提取数据差错检验或查找路由所花费的时间排队时延分组在路由器输入输出队列中排队等待处理所经历的时延排队时延的长短往往取决于网络中当时的通信量总时延发送时延传播时延处理时延排队时延对于高速网络链路我们提高的仅仅是数据的发送速率而不是比特在链路上的传播速率提高链路带宽减小了数据的发送时延时延带宽积链路的时延带宽积又称为以比特为单位的链路长度只有在代表链路的管道都充满比特时链路才得到了充分利用往返时间互联网上的信息不仅仅单方向传输而是双向交互的因此有时很需要知道双向交互一次所需的时间往返时间表示从发送方发送数据开始到发送方收到来自接收方的确认总共经历的时间在互联网中往返时间还包括各中间结点的处理时延排队时延以及转发数据时的发送时延发送时间数据长度发送速率有效数据率数据长度发送时间利用率利用率分为信道利用率和网络利用率信道利用率不是越高越好根据排队论的理论当某信道的利用率增大时该信道引起的时延也就迅速增加若令表示网络空闲时的时延表示网络当前的时延则在适当的假定条件下可以用下面的简单公式表示和之间的关系信道或网络利用率过高会产生非常大的时延计算机网络的非性能指标费用质量标准化可靠性可扩展性和可升级性易于管理和维护计算机网络体系结构计算机网络体系结构的形成计算机网络是个非常复杂的系统相互通信的两个计算机系统必须高度协调工作才行而这种协调是相当复杂的分层可将庞大而复杂的问题转化为若干较小的局部问题而这些较小的局部问题就比较易于研究和处理年美国的公司宣布了系统网络体系结构这个著名的网络标准就是按照分层的方法制定的由于网络体系结构的不同不同公司的设备很难互相连通为了使不同体系结构的计算机网络都能互连国际标准化组织于年成立了专门机构研究该问题他们提出了一个试图使各种计算机在世界范围内互连成网的标准框架即著名的开放系统互连基本参考模型简称为只要遵循标准一个系统就可以和位于世界上任何地方的也遵循这同一标准的其他任何系统进行通信开放是指非独家垄断系统是指在现实的系统中与互连有关的各部分只获得了一些理论研究的成果在市场化方面却失败了法律上的国际标准并没有得到市场的认可非国际标准却获得了最广泛的应用常被称为事实上的国际标准协议与划分层次计算机网络中的数据交换必须遵守事先约定好的规则这些规则明确规定了所交换的数据的格式以及有关的同步问题同步含有时序的意思网络协议简称为协议是为进行网络中的数据交换而建立的规则标准或约定协议主要由以下三个要素组成语法数据与控制信息的结构或格式语义需要发出何种控制信息完成何种动作以及做出何种响应同步事件实现顺序的详细说明协议的两种形式一种是使用便于人来阅读和理解的文字描述另一种是使用让计算机能够理解的程序代码这两种不同形式的协议都必须能够对网络上信息交换过程做出精确的解释分层的好处各层之间是独立的灵活性好结构上可分割开易于实现和维护能促进标准化工作缺点降低效率有些功能会在不同的层次中重复出现因而产生了额外开销通常各层要完成的功能差错控制流量控制分段和重装复用和分用连接建立和释放计算机网络的体系结构是计算机网络的各层及其协议的集合体系结构就是这个计算机网络及其部件所应完成的功能的精确定义实现是遵循这种体系结构的前提下用何种硬件或软件完成这些功能的问题体系结构是抽象的而实现则是具体的是真正在运行的计算机硬件和软件具有五层协议的体系结构应用层通过应用进程间的交互来完成特定网络应用应用层协议定义的是应用程序间通信和交互的规则例如域名系统支持万维网应用的协议支持电子邮件的协议我们把应用层交互的数据单元称为报文运输层负责向两台主机中进程之间的通信提供通用的数据传输服务两种主要协议传输控制协议面向连接其数据传输的单位是报文段用户数据报协议面向无连接尽最大努力数据传输的单位是用户数据报网络层负责为分组交换网上的不同主机提供通信服务在发送数据时网络层把运输层产生的报文段或用户数据报封装成分组或包进行传输在协议中分组称为数据报互联网是由大量异构网络通过路由器相互连接起来的互联网使用的网络层协议是无连接的网络协议和许多种路由选择协议数据链路层数据链路层将网络层交下来的数据报组装成帧在两个相邻结点间的链路上传送帧每一帧包括数据和必要的控制信息控制信息可以使接受端能检测到所接收的帧有无差错有则丢弃物理层在物理层上所传输的数据的单位是比特协议数据单元参考模型把对等层次之间传送的数据单位称为该层的协议数据单元任何两个同样的层次把数据即数据单元加上控制信息通过水平虚线直接传递给对方这就是所谓的对等层之间的通信各层协议实际上就是在各个对等层之间传递数据时的各项规定实体协议服务和服务访问点实体表示任何可发送或接收信息的硬件或软件进程协议是控制两个对等实体进行通信的规则的集合在协议的控制下两个对等实体间的通信使得本层能够向上一层提供服务要实现本层协议还需要使用下层所提供的服务协议的实现保证了能够向上一层提供服务本层的服务用户只能看见服务而无法看见下面的协议即下面的协议对上面的服务用户是透明的协议是水平的即协议是控制对等实体之间通信的规则服务是垂直的即服务是由下层向上层通过层间接口提供的上层使用服务原语获得下层所提供的服务同一系统相邻两层的实体进行交互的地方称为服务访问点服务访问点是一个抽象的概念它实际上就是一个逻辑接口把层与层之间交换的数据的单位称为服务数据单元可以与不一样例如可以是多个合成为一个也可以是一个划分为几个协议必须把所有不利的条件事先都估计到而不能假定一切都是正常的和非常理想的看一个计算机网络协议是否正确不能光看在正常情况下是否正确还必须非常仔细地检查这个协议能否应付各种异常情况的体系结构另一种表示方法还有一种表示方法协议可以为各式各样的应用提供服务允许协议在各式各样的网络构成的互联网上运行第二章物理层物理层的基本概念物理层考虑的是怎样才能在连接各种计算机的传输媒体上传输数据比特流而不是指具体的传输媒体物理层的作用是要尽可能地屏蔽掉不同传输媒体和通信手段的差异用于物理层的协议也常称为物理层规程物理层的主要任务描述为确定与传输媒体的接口有关的一些特性机械特性指明接口所用接线器的形状和尺寸引线数目和排列固定和锁定装置等电气特性指明在接口电缆的各条线上出现的电压的范围功能特性指明某条线上出现的某一电平的电压表示何种意义过程特性指明对于不同功能的各种可能事件的出现顺序数据在计算机内部多采用并行传输方式但在通信线路的传输方式一般都是串行传输数据通信的基础知识数据通信系统的模型一个数据通信系统可以分为三个部分源系统发送端发送方传输系统传输网络目的系统接收端接受方源系统包括源点发送器接收器终点常用术语通信的目的是传送消息数据是运送消息的实体信号则是数据的电气或电磁的表现模拟信号连续信号消息的参数的取值是连续的数字信号离散信号消息的参数的取值是离散的有关信道的几个基本概念信道一般用来表示向某一个方向传送信息的媒体单向通信单工通信只能有一个方向的通信而没有反方向的交互双向交替通信半双工通信通信的双方都可以发送信息当不能双方同时发送与接收双向同时通信全双工通信通信的双方可以同时发送和接收信息基带信号来自信源的信号调制为了解决许多信道不能传输这种低频分量或直流分量基带调制仅对基带信号的波形进行变换使它能够与信道特性相适应变换后的信号仍然是基带信号把这种过程称为编码带通调制使用载波进行调制把基带信号的频率范围搬移到较高的频段并转换为模拟信号这样就能够更好地在模拟信道中传输即仅在一段频率范围内能够通过信道带通信号经过载波调制后的信号常用编码方式不归零制正电平代表负电平代表归零制正脉冲代表负脉冲代表曼彻斯特编码位周期中心的向上跳变代表位周期中心的向下跳变代表但也可反过来定义差分曼彻斯特编码在每一位的中心处始终都有跳变位开始边界有跳变代表而位开始边界没有跳变代表从信号波形中可以看出曼彻斯特编码和差分曼彻斯特编码产生的信号频率比不归零制高从自同步能力来看不归零制不能从信号波形本身中提取信号时钟频率这叫作没有自同步能力而曼彻斯特编码和差分曼彻斯特编码具有自同步能力基本的带通调制方法基带信号往往包含有较多的低频成分甚至有直流成分而许多信道并不能传输这种低频分量或直流分量为了解决这一问题就必须对基带信号进行调制最基本的二元制调制方法有以下几种调幅载波的振幅随基带数字信号而变化调频载波的频率随基带数字信号而变化调相载波的初始相位随基带数字信号而变化正交振幅调制信道的极限容量码元传输的速率越高或信号传输的距离越远或传输媒体质量越差信道的输出端的波形的失真就越严重限制码元在信道上的传输速率的因素信道能通过的频率范围码间串扰奈式准则在任何信道种码元传输的速率是有上限的传输速率超过此上限就会出现严重的码间串扰的问题使接收端对码元的判决识别成为不可能信噪比信噪比信号的平均功率噪声的平均功率常记为并用分贝作为度量单位即信噪比例如当时信噪比为而当时信噪比为年香农用信息论的理论推导出了带宽受限且有高斯白噪声干扰的信道的极限无差错的信息传输速率香农公式信道的极限信息传输速率可表达为其中为信道的带宽以为单位为信道内所传信号的平均功率为信道内部的高斯噪声功率信道的带宽或信道中的信噪比越大则信息的极限传输速率就越高只要信息传输速率低于信道的极限信息传输速率就一定可以找到某种办法来实现无差错的传输若信道带宽或信噪比没有上限当然实际信道不可能是这样的则信道的极限信息传输速率也就没有上限实际信道上能够达到的信息传输速率要比香农的极限传输速率低不少对于频带宽度已确定的信道如果信噪比不能再提高了并且码元传输速率也达到了上限值那么还有办法提高信息的传输速率这就是用编码的方法让每一个码元携带更多比特的信息量物理层下面的传输媒体传输媒体也称为传输介质或传输媒介它就是数据传输系统中在发送器和接收器之间的物理通路传输媒体可分为两大类即导引型传输媒体和非导引型传输媒体在导引型传输媒体中电磁波被导引沿着固体媒体铜线或光纤传播非导引型传输媒体就是指自由空间在非导引型传输媒体中电磁波的传输常称为无线传输导引型传输媒体双绞线最常用的传输媒体模拟传输和数字传输都可以使用双绞线其通信距离一般为几到十几公里屏蔽双绞线带金属屏蔽层无屏蔽双绞线室内传送数据的无屏蔽双绞线和屏蔽双绞线的标准布线标准更新为此标准规定了个种类的标准从类线到类线对传送数据来说现在最常用的是类线或同轴电缆同轴电缆具有很好的抗干扰特性被广泛用于传输较高速率的数据同轴电缆的带宽取决于电缆的质量同轴电缆数字传输常用同轴电缆有线电视模拟传输常用光缆光纤是光纤通信的传输媒体由于可见光的频率非常高约为的量级因此一个光纤通信系统的传输带宽远远大于目前其他各种传输媒体的带宽多模光纤单模光纤光线通信的优点通信容量非常大传输损耗小中继距离长抗雷电和电磁干扰性能好无串音干扰保密性好体积小重量轻非引导型传输媒体将自由空间称为非导引型传输媒体无线传输所使用的频段很广紫外线和更高的波段目前还不能用于通信短波通信即高频通信主要是靠电离层的反射但短波信道的通信质量较差传输速率低微波在空间主要是直线传播传统微波通信有两种方式地面微波接力通信卫星通信通信距离远传播时延大信道复用技术频分复用时分复用和统计时分复用复用是通信技术中的基本概念它允许用户使用一个共享信道进行通信降低成本提高利用率频分复用频分复用的所有用户在同样的时间占用不同的带宽资源请注意这里的带宽是频率带宽而不是数据的发送速率时分复用时分复用则是将时间划分为一段段等长的时分复用帧帧每一个时分复用的用户在每一个帧中占用固定序号的时隙每一个用户所占用的时隙是周期性地出现其周期就是帧的长度信号也称为等时信号时分复用的所有用户是在不同的时间占用同样的频带宽度使用时分复用系统传送计算机数据时由于计算机数据的突发性质用户对分配到的子信道的利用率一般是不高的在进行通信时复用器和分用器成对的使用统计时分复用异步时分复用帧不是固定分配时隙而是按需动态地分配时隙因此统计时分复用可以提高线路的利用率波分复用波分复用就是光的频分复用使用一根光纤来同时传输多个光载波信号码分复用常用的名词是码分多址各用户使用经过特殊挑选的不同码型因此彼此不会造成干扰这种系统发送的信号有很强的抗干扰能力其频谱类似于白噪声不易被敌人发现每一个比特时间划分为个短的间隔称为码片每个站被指派一个唯一的码片序列如发送比特则发送自己的码片序列如发送比特则发送该码片序列的二进制反码例如站的码片序列是发送比特时就发送序列发送比特时就发送序列站的码片序列假定站要发送信息的数据率为由于每一个比特要转换成个比特的码片因此站实际上发送的数据率提高到同时站所占用的频带宽度也提高到原来数值的倍这种通信方式是扩频通信中的一种扩频通信通常有两大类一种是直接序列扩频如上面讲的使用码片序列就是这一类另一种是跳频扩频每个站分配的码片序列不仅要各不相同并且还必须互相正交在实用的系统中是使用伪随机码序列令向量表示站的码片向量令表示其他任何站的码片向量两个不同站的码片序列正交就是向量和的规格化内积等于任何一个码片向量和该码片向量自己的规格化内积都是一个码片向量和该码片反码的向量的规格化内积值是数字传输系统与模拟通信相比数字通信无论是在传输质量上还是经济上都有明显的优势目前长途干线大都采用是数字传输方式脉码调制体制最初是为了在电话局之间的中继线上传送多路的电话由于历史原因有两个不兼容的国际标准当需要有更高的数据率时可以采用复用的方法旧的数字传输系统存在许多缺点速率标准不统一不是同步传输同步光纤网的各级时钟都来自一个非常精确的主时钟同步数字系列适用于微波和卫星传输宽带接入技术用户要接入互联网必须先连接到某个美国联邦通信委员会认为只要双向速率之和超过就是宽带从宽带接入的媒体来看可以划分为两大类有线宽带接入无线宽带接入技术非对称数字用户线用数字技术对现有的模拟电话用户线进行改造技术就是把低端频谱给传统电话使用而把原来没有被利用的高端频谱留给用户上网使用就是数字用户线的传输距离取决于数据率和用户线的途径所得到的最高数据传输速率与实际的用户线上的信噪比密切相关的特点上行用户到和下行到用户带宽不对称在用户线的两端各安装一个调制解调器我国目前采用的方案是离散多音调调制技术多音调指多载波多子信道技术采用频分复用相当于在一对用户线上使用许多小的调制解调器并行的传送数据的数据率采用自适应调制技术使用户线能够传送尽可能高的数据率不能保证固定的数据率第二代通过提高调制效率得到更高的数据率采用无缝速率自适应技术光线同轴混合网网是在目前覆盖面很广的有线电视网基础上开发的一种居民宽带接入网网对网进行了改造网将原网中的同轴电缆主干部分该换为光纤并使用模拟光纤技术在模拟光纤中采用光的振幅模拟光纤从头端连接到光纤结点即光分配结点网采用结点体系网具有双向传输功能扩展了传输频带用户接口盒要提供三种连接使用同轴电缆连接到机顶盒然后再连接到用户的电视机使用双绞线连接到用户的电话机使用电缆调制解调器来连接到用户的计算机电缆调制解调器是为网而使用的调制解调器技术是一种实现宽带居民接入网的方案代表多种宽带光纤接入方式第三章数据链路层数据链路层使用的信道主要有以下两种类型点对点信道一对一广播信道一对多采用专用的共享信道协议路由器只包含网络层链路层物理层不同链路层可能采用不同的数据链路层协议使用点对点信道的数据链路层数据链路和帧链路物理链路一条无源的点到点的物理线路段中间没有任何其他的交换结点一条链路只是一条通路的一个组成部分数据链路逻辑链路除了物理线路外还必须有通信协议软件来控制这些数据的传输若是把实现这些协议的硬件和软件加到链路上就构成了数据链路最常用的方法是使用网络适配器即网卡来实现这些协议的硬件和软件一般适配器都包括了数据链路层和物理层这两方面的功能早期的数据通信协议就做通信规程在数据链路层中规程和协议是同义语帧数据链路层的协议数据单元数据报网络层的协议数据单元数据链路层不必考虑物理层如何实现比特传输的细节只考虑数据的封装等三个基本问题封装成帧封装成帧就是在一段数据的前后分别添加首部和尾部首部和尾部的一个重要作用就是帧定界每一种链路层协议都规定了所能传送的帧的数据部分长度上限最大传送单元当数据是由可打印的码组成的文本文件时帧定界可以使用特殊的帧定界符控制字符放在一帧的最前面表示帧的首部开始另一个控制字符表示帧的结束透明传输如果数据中的某个字节的二进制代码恰好和或一样数据链路层就会错误地找到帧的边界解决方法字节填充或字符填充发送端的数据链路层在数据中出现控制字符或的前面插入一个转义字符其十六进制编码是接收端的数据链路层在将数据送往网络层之前删除插入的转义字符如果转义字符也出现在数据当中那么应在转义字符前面插入一个转义字符当接收端收到连续的两个转义字符时就删除其中前面的一个差错检验在传输过程中可能会产生比特差错可能会变成而也可能变成在一段时间内传输错误的比特占所传输比特总数的比率称为误码率为了保证数据传输的可靠性在计算机网络传输数据时必须采用各种差错检测措施循环冗余检验在发送端先把数据划分为组假定每组个比特假设待传送的一组数据现在我们在的后面再添加供差错检测用的位冗余码一起发送冗余码的计算用二进制的模运算进行乘的运算这相当于在后面添加个得到的位的数除以事先选定好的长度为位的除数得出商是而余数是余数比除数少位即是位将余数作为冗余码拼接在数据后面发送出去发送的数据是即共位在数据后面添加上的冗余码称为帧检验序列是一种常用的检错方法是添加在数据后面的冗余码可以用这种方法得出但是并非用来获得的唯一方法检验结果若得出的余数则判定这个帧没有差错就接受若余数则判定这个帧有差错就丢弃但这种检测方法并不能确定究竟是哪一个或哪几个比特出现了差错只要经过严格的挑选并使用位数足够多的除数那么出现检测不到的差错的概率就很小很小注意仅用循环冗余检验差错检测技术只能做到无差错接受无差错接受是指凡是接受的帧即不包括丢弃的帧我们都能以非常接近于的概率认为这些帧在传输过程中没有产生差错也就是说凡是接收端数据链路层接受的帧都没有传输差错有差错的帧就丢弃而不接受要做到可靠传输即发送什么就收到什么就必须再加上确认和重传机制应当明确无比特差错与无传输差错是不同的概念在数据链路层使用检验能够实现无比特差错的传输但这还不是可靠传输本章介绍的数据链路层协议都不是可靠传输的协议点对点协议协议的特点协议应满足的需求简单首要需求提高互操作性封装成帧规定特殊的字符作为帧定界符透明性必须保证数据传输的透明性多种网络层协议在同一条物理链路上同时支持多种网络层协议多种类型链路差错检验检测并丢弃有差错的帧检测连接状态最大传送单元是数据链路层的帧可以载荷的数据部分的最大长度而不是帧的总长度网络层地址协商数据压缩协商协议不需要的功能纠错因为可靠传输由运输层的协议负责流量控制序号多点线路因为只支持点对点的链路通信半双工或单双工因为只支持全双工链路协议的组成一个将数据报封装到串行链路的方法链路控制协议用来建立配置和测试数据链路的连接网络控制协议协议的帧格式各字段的意义帧的首部和尾部分别为个字段和个字段标志字段规定为即标志一个帧的开始和结束地址字段规定为即控制字段规定为即协议字段两个字节字节填充是面向字节的所有的帧的长度都是整数字节透明传输问题用在同步传输链路时协议规定采用硬件来完成比特填充当用在异步传输时就使用一种特殊的字符填充法把转义字符定义为即协议用在链路时使用同步传输这时协议采用零比特填充方法实现透明传输零比特填充只要发现有个连续的则立即填入一个因此经过这种填充后的数据不会出现六个连续的因为几个特殊字段内有协议的工作状态协议已不是纯粹的数据链路层的协议它还包含了物理层和网络层的内容链路静止状态链路建立状态链路打开状态链路终止状态使用广播信道的数据链路层局域网的数据链路层局域网最主要的特点是网络为一个单位所拥有地理范围和站点数目均有限局域网具有如下主要优点具有广播功能从一个站点可很方便地访问全网局域网上的主机可共享连接在局域网上的各种硬件和软件资源便于系统的扩展和逐渐地演变各设备的位置可灵活调整和改变提高了系统的可靠性可用性和残存性局域网按拓扑结构分类星型网集线器总线网匹配电阻环形网干线耦合器局域网中的主要传输媒体双绞线当数据率很高时往往需要使用光纤作为传输媒体媒体共享技术静态划分信道频分复用时分复用波分复用码分复用动态媒体接入控制多点接入随机接入所有用户可随机地发送信息但是同一时刻发送信息会产生碰撞冲突故需要解决碰撞的网络协议受控接入用户不能随机发送信息必须服从一定控制如多点线路探询轮询以太网的两个标准是世界上第一个局域网产品以太网的规约是第一个的以太网标准委员会就将局域网的数据链路层拆成两个子层逻辑链路控制子层媒体接入控制子层与接入到传输媒体有关的内容都放在子层而子层则与传输媒体无关不管采用何种协议的局域网对子层来说都是透明的适配器的作用网络接口板又称为通信适配器或网络接口卡或网卡适配器的重要功能进行串行并行转换对数据进行缓存在计算机的操作系统安装设备驱动程序实现以太网协议适配器在接受和发送各种帧时不适用计算机的当收到有差错的帧时直接丢弃而不必通知计算机当收到正确的帧时使用中断来通知计算机并交付协议栈中的网络层当计算机要发送数据报时就由协议栈把数据报向下交给适配器组装成帧后发送到局域网协议总线的特点当一台计算机发送数据时总线上的所有的计算机都能检测到这个数据为了在总线上实现一对一的通信可以使适配器拥有一个独一无二的地址为了通信简便以太网采用采用较为灵活的无连接的工作方式不必先建立连接就可以直接发送数据对发送的数据帧不进行编号也不要求对方发回确认这样做的理由是局域网信道的质量很好因信道质量产生差错的概率是很小的以太网提供的服务是不可靠的交付即尽最大努力的交付当目的站收到有差错的数据帧时就丢弃此帧其他什么也不做差错的纠正由高层来决定以太网发送的数据都使用曼切斯特编码缺点占用的频带宽度比原始的基带信号增加了一倍协议含义载波监听多点接入碰撞检测多点接入表示许多计算机以多点接入的方式连接在一根总线上载波监听是指每一个站在发送数据之前先要检测一下总线上是否有其他计算机在发送数据如果有则暂时不要发送数据以免发生碰撞但是由于电磁波在总线上的传播速率是有限的当某个站监听到总线是空闲时也可能总线并非真正是空闲的所以需要在发送期间进行碰撞检测以检测冲突碰撞检测是指边发送边监听总线上并没有什么载波载波监听就是用电子技术检测总线上有没有其他计算机发送的数据信号检测到碰撞后每一个正在发送数据的站一旦发现总线上出现了碰撞就要立即停止发送免得继续浪费网络资源然后等待一段随机时间后再次发送由于电磁波在总线上的传播速率是有限的当某个站监听到总线是空闲时也可能总线并非真正是空闲的所以需要在发送期间进行碰撞检测以检测冲突在使用协议时一个站不可能同时进行发送和接收但必须边发送边监听信道因此协议不可能进行全双工通信只能进行双向交替通信半双工通信每个站在发送数据之后的一小段时间内存在着遭遇碰撞的可能性这种发送的不确定性使整个以太网的平均通信量远小于以太网的最高数据率最先发送数据帧的站在发送数据帧后至多经过时间两倍的端到端往返时延就可知道发送的数据帧是否遭受了碰撞以太网的端到端往返时延称为争用期或碰撞窗口经过争用期这段时间还没有检测到碰撞才能肯定这次发送不会发生碰撞二进制指数型退避算法发生碰撞的站在停止发送数据后要推迟退避一个随机时间才能再发送数据基本退避时间取为争用期从整数集合中随机地取出一个数记为重传所需的时延就是倍的基本退避时间参数按下面的公式计算重传次数当时参数等于重传次数当重传达次仍不能成功时即丢弃该帧并向高层报告以太网在发送数据时若前字节没有发生冲突则后续的数据就不会发生冲突最短有效帧长为字节强化碰撞当发送数据的站一旦发现发生了碰撞时立即停止发送数据再继续发送若干比特的人为干扰信号以便让所有用户都知道现在已经发生了碰撞协议的要点准备发送检测信道检查碰撞使用集线器的星形拓扑特点使用集线器的以太网在逻辑上仍是一个总线网各站共享逻辑上的总线各适配器使用的还是协议并且同一时刻只允许一个站发送数据一个集线器很像一个多接口的转发器集线器工作在物理层它的每一个接口仅仅简单地转发比特不进行碰撞检测采用专门的芯片以太网的信道利用率要提高以太网的信道利用率就必须减少与之比在以太网中定义了参数它是以太网单程端到端时延与帧的发送时间表示一发生碰撞就立即可以检测出来并立即停止发送因而信道利用率很高越大表明争用期所占的比例增大每发生一次碰撞就浪费许多信道资源使得信道利用率明显降低为提高利用率以太网的参数的值应当尽可能小些对以太网参数的要求是当数据率一定时以太网的连线的长度受到限制否则的数值会太大以太网的帧长不能太短否则的值会太小使值太大只有当参数远小于才能得到尽可能高的极限信道利用率理想情况下的极限信道利用率为以太网的的层层的硬件地址在局域网中硬件地址又称为物理地址或地址标准为局域网规定了一种位的全球地址是指局域网上的每一台计算机中固化在适配器的中的地址的是局域网全球地址的法定管理结构它负责分配地址字段的个字节的前三个字节生产局域网适配器的厂家需要向购买由这三个字节构成的组织唯一标识符厂家自行指派后三个字节称为扩展标识符用这种方法得到的位地址称为规定地址字段的第一字节的最低位为位位为时地址段表示单个站地址位为时表示组地址用来多播规定地址字段第一字节的最低第二位为位位为时是全球管理为时是本地管理适配器由过滤功能从网络上每收到一个帧就先用硬件检查帧中的目的地址发往本站的帧单播帧广播帧多播帧所有的适配器都至少能够识别前两种帧即能够识别单播地址和广播地址有的适配器可用编程方法识别多播地址只有目的地址才能使用广播地址和多播地址以混杂方式工作的以太网适配器只要听到有帧在以太网上传输就都接收下来帧的格式最常用的帧是以太网格式最后一字段是字节的帧检验序列使用检验无效的帧长度不是整数个字节收到的帧检验序列查出错误数据位置错误扩展的以太网在物理层扩展以太网使用光纤扩展使用集线器扩展碰撞域优点使原来属于不同碰撞域的以太网上的计算机能够进行跨碰撞域的通信扩大了以太网覆盖的地理范围缺点碰撞域增大了但总的吞吐量并未提高如果不同的碰撞域使用不同的数据率那么就不能用集线器将它们互连起来在数据链路层扩展以太网早期使用网桥现在使用以太网交换机以太网交换机的特点实质上是一个多接口网桥工作在全双工方式相互通信的主机都是独占传输媒体无碰撞地传输数据具有并行性能使多对主机同时通信许多以太网交换机对收到的帧采用存储转发方式进行转发但是也有一些交换机采用直通的交换方式以太网交换机的自学习功能即插即用帧交换表从总线以太网到星形以太网仍然采用以太网的帧结构虚拟局域网虚拟局域网是由一些局域网网段构成的与物理位置无关的逻辑组而这些网段具有某些共同的需求每一个的帧都有一个明确的标识符指明发送这个帧的计算机是属于哪一个虚拟局域网其实只是局域网给的一种服务而并不是一种新型局域网高速以太网以太网速率达到或超过的以太网称为高速以太网以太网又叫快速以太网可在全双工方式下工作而无冲突发生吉比特以太网在半双工方式下使用协议全双工方式不使用协议载波延伸分组突发吉比特以太网和更快的以太网只工作在全双工方式使用以太网进行宽带接入可以提供双向的宽带通信可以根据用户对带宽的需求灵活地进行带宽升级可以实现端到端的以太网传输中间不需要再进行帧格式的转换这就提高了数据的传输效率且降低了传输的成本但是不支持用户身份鉴别第四章网络层网络层提供的两种服务面向连接还是无连接互联网采用的设计思路是这样的网络层向上只提供简单灵活的无连接的尽最大努力交付的数据报服务网络层不提供服务质量的承诺通信之前先建立虚电路以保证双方通信所需的一切网络资源虚电路表示这只是一条逻辑上的连接分组都沿着这条逻辑连接按照存储转发方式传送网际协议虚拟互连网络没有一种单一的网络能够适应所有用户的需求将网络互相连接起来要使用一些中间设备物理层中继系统转发器数据链路层中继系统网桥或桥接器网络层中继系统路由器网桥和路由器的混合物桥路器网络层以上的中继系统网关网络互连都是指用路由器进行网络互连和路由选择由于历史的原因许多有关的文献将网络层使用的路由器称为网关所谓虚拟互连网络也就是逻辑互连网络它的意思就是互连起来的各种物理网络的异构性本来是客观存在的但是我们利用协议就可以使这些性能各异的网络从用户看起来好像是一个统一的网络使用协议的虚拟互连网络可简称为网使用虚拟互连网络的好处是当互联网上的主机进行通信时就好像在一个网络上通信一样而看不见互连的各具体的网络异构细节如果在这种覆盖全球的网的上层使用协议那么就是现在的互联网互联网可以由多种异构网络互连组成分类的地址地址及其表示方法整个互联网就是一个单一的抽象的网络地址就是给互联网上的每一台主机或路由器的每一个接口分配一个全世界范围内是唯一的位的标识符地址现在由互联网名字和数字分配机构进行分配地址的编制方法经过三个历史阶段分类的地址子网的划分构成超网分类的地址就是将地址划分位若干个固定类类地址都是由两个固定长度的字段组成其中第一个字段是网络号是唯一的第二个字段是主机号在当前网络范围内是唯一的由此可见一个地址在整个互联网范围内是唯一的类是单播地址类地址用于多播类地址保留点分十进制记法常用的三种类别的地址类地址网络号全表示本网络全表示本地软件环回测试类地址主机号全表示本主机连接的单个网络地址全表示该网络上所有的主机一般不用的特殊的地址的特点是分等级的地址结构地址管理机构只分配网络号主机号由得到网络号的单位自行分配路由器仅根据目的主机网络号来转发分组减小了路由表所占的存储空间以及查找路由表的时间地址标志一台主机和一条链路的接口当一台主机同时连接到两个网络上时该主机就必须同时具有两个相应的地址其网络号必须不同这种主机也叫做多归属主机一个网络时指具有相同网络号的主机的集合故用转发器或网桥连接起来的若干局域网仍是一个网络具有不同网络号的局域网必须用路由器进行互连在地址中所有分配到网络号的网络都是平等的地址与硬件地址区分地址与硬件地址从层次上来看物理地址是数据链路层和物理层使用的地址而地址是网络层和以上各层使用的地址是一种逻辑地址在发送数据时数据从高层向下到低层然后才到通信链路上传输使用地址的数据报一旦交给了数据链路层就被封装成帧了帧在传送时使用的源地址和目的地址都是硬件地址这两个地址都写在帧的头部连接在通信链路上的设备在收到帧时根据帧首部的硬件地址决定抛弃与否只有在剥去帧的首部和尾部后把层的数据上交给网络层后网络层才能在数据报的首部找到源地址和目的地址注意在层抽象的互联网上只能看到数据报路由器只根据目的站的地址的网络号进行路由选择在局域网的链路层只能看见帧层抽象的互联网频闭下层这些很复杂的细节地址解析协议常被划分为网络层的协议协议的用途为了从网络层使用的地址解析出在数据链路层使用的硬件地址地址解析协议解决这个问题的方法是在主机高速缓存中存放一个从地址到硬件地址的映射表并且这个映射表还经常动态更新当主机要向本局域网上的某台主机发送数据报时就先在其高速缓存查看有无主机的地址如果有查出硬件地址并写入帧如果没有在本局域网广播发送一个请求分组在本局域网的所有主机上运行的进程都收到了请求分组主机的地址与请求分组中要查询的地址一致收下这个请求分组并向主机发送响应分组同时在这个响应分组中写入自己的硬件地址主机收到主机的分组后就在其高速缓存中写入主机的地址到硬件地址的映射每一个映射地址项目都设置生存时间是解决同一个局域网上的主机或路由器的地址和硬件地址的映射问题从地址到硬件地址的解析是自动进行的主机的用户对这种地址解析过程是不知道的数据报的格式数据报首部的固定部分中的各字段版本首部长度区分服务总长度指首部和数据之和的长度标识标志占位最低位中间位片偏移生存时间跳数限制协议首部检验和只检验数据报的首部但不包括数据部分源地址目的地址层转发分组的流程在互联网上转发分组时是从一个路由器转发到下一个路由器在路由表中对每一条路由最主要的是以下两个信息目的网络四肢下一跳地址虽然互联网所有的分组转发都是基于目的主机所在的网络但是存在着对特定的目的主机指明一个路由这种路由叫做特定主机路由默认路由减小路由表所占用的空间和搜索路由表所用的时间分组转发算法从数据报首部提取目的主机地址得到目的网络若就是与此路由器直接相连的某个网络地址则进行直接交付否则执行若路由表中有目的地址为的特定主机路由则把数据报传送给下一跳路由器若无则若路由器有到达网络的路由则把数据报传送给路由表中所指明的下一跳路由器否则若路由表中有一个默认路由则把数据报传送给路由表中所指明的默认路由器否者报告转发分组失败划分子网和构造超网划分子网从两级地址到三级地址地址设计不合理地址空间的利用率有时很低给每个物理网络分配一个网络号会是路由表变得太大两级地址不够灵活为了解决上诉问题地址中又增加了子网号字段使两级地址变成三级地址这种做法也叫划分子网或子网寻址或子网路由选择划分子网的基本思路一个拥有许多物理网络的单位可将所属的物理网络划分为若干各子网划分子网纯属一个单位内部的事情本网络以外的网络看不见这个网络是由多少各子网组成因为其对外仍然表现为一个网络划分子网的方法是从网络的主机号借用若干位作为子网号当然主机号也就减少了同样的位数于是两级地址在本单位内就变成了三级地址网络号子网号和主机号凡是从其他网络发送来的数据报仍是根据目的网络号找到路由器此路由器收到数据报后再按照目的网络号和子网号找到目的子网把数据报交付目的主机子网掩码从数据报的首部无法看出源主机或目的主机多连接的网络是否进行了子网的划分因此使用子网掩码将子网掩码与收到的数据报的目的地址逐位相与得到子网的网络地址再路由器的路由表中也必须有子网掩码如果一个网络不划分子网那么该网络的子网掩码就使用默认子网掩码子网掩码是一个网络或一个子网的重要属性划分子网增加了灵活性但却减少了能够连接在网络上的主机总机数相同的地址和不同的子网掩码可以得到相同的网络地址使用子网时分组的转发路由表中必须包含目的网络四肢子网掩码下一跳地址划分子网的情况下路由器转发分组的算法从收到的数据报的首部提取目的地址先判断是否为直接交付否则执行若路由表中有目的地址为的特定主机路由则把数据报传送给路由器中所指明的下一跳路由器否则执行对路由表中的每一行用其中的子网码和逐位相与其结果为若与该行的目的地址匹配则把数据报传送给该行指明的下一跳路由器否则执行若路由器中有一个默认路由则把数据报传送给路由表中所指明的默认路由器否则执行报告转发分组出错无分类编址构造超网网络前缀地址空间不够出现使用变长子网掩码无分类域间路由选择消除了传统的类地址以及划分子网的概念更能有效的分配地址空间将地址空间分为前后两部分前部分是网络前缀用来指明网络后面部分指明主机使用斜线记法在地址后面加一斜线后面写网络前缀所占的位数把网络前缀都相同的连续的地址组成一个地址块使用为的地址掩码例如地址块的地址掩码是即斜线后的数字是地址掩码中的个数由于地址块中有很多地址所以在路由表中就利用地址块来查找目的网络这种地址的聚合常称为路由聚合除个别外每一个地址块都包含了多个类地址这就是构成超网网络前缀越短其地址块中包含的地址数就越多最长前缀匹配在查找路由表时应当从匹配结果中选择出具有最长网络前缀的路由使用二叉线索查找路由表网际控制报文协议报文的种类为了更有效的转发数据报和提高交付成功的机会在网际层使用了网际控制报文协议允许主机或路由器报告差错情况和提供异常情况的报告报文的种类报文有两种即差错报告报文询问报文差错报告报文的类型终点不可达时间超过参数问题改变路由重定向询问报文的类型回送请求和回答时间戳请求和回答的应用举例的一个重要应用就是分组间探测用来测试两台主机之间的连通性使用了回送请求与回送回答报文互联网的路由选择协议有关路由选择协议的几个基本概念理想的路由算法算法必须是正确的和完整的算法在计算上应简单算法应能适应通信量和网络拓扑的变化算法应具有稳定性算法应是公平的算法应是最佳的分层次的路由选择协议互联网采用的路由选择协议主要是自适应分布式路由选择协议自治系统在单一技术管理下的一组路由器这些路由器使用一种自治系统内部的路由选择协议和共同的度量一个对外的其他表现出的是一个单一的和一致的路由选择策略互联网把路由选择协议划分为两大类内部网关协议内部包括外部网关协议之间例如内部网关协议工作原理是一种分布式的基于距离向量的路由选择协议协议要求网络中的每一个路由器都要维护从它自己到其他每一各目的网络的距离记录从一路由器到直接连接的网络的距离定义为从一路由器到非直接连接的网络的距离定义为所经过的路由器数加协议的距离也称为跳数只适用于小型的互联网协议的特点仅和相邻路由器交换信息路由器交换的信息是当前本路由器所知道的全部信息即自己现在的路由表按固定的时间间隔交换路由信息路由器再刚刚开始工作时它的路由表是空的然后路由器就得出到直接相连的几个网络的距离接着每一个路由器也只和数目非常有限的相邻路由器交换并更新路由信息收敛在自治系统中所有的结点都得到正确的路由选择信息的过程路由表更新的言责是找出到每一个目的网络的最短距离这种更新算法又称为距离向量算法距离向量算法路由器收到相邻路由器其地址为的一个报文先修改此报文中的所有项目把下一跳字段中的地址都改为并把所有的距离字段的值加对修改后的报文中的每一个项目重复以下步骤若项目中的目的网络不在路由表中则把该项目加到路由表中否则若下一跳字段给出的路由器地址是同样的则把收到的项目替换原路由表中的项目否则若收到项目中的距离小于路由表中的距离则进行更新否则什么也不做若分钟还没有收到相邻路由器的更新路由表则把此相邻路由器记为不可达路由器即将距离置为表示不可达返回问题当网络出现故障时要经过比较长度的时间才能将此信息传送到所有的路由器特点好消息传播的快坏消息传播的慢优点是实现简单开销较小协议的报文格式协议使用运输层的用户数据报进行传送报文由首部和路由部分组成内部网关协议协议的基本特点开放最短路径优先使用了提出的最短路径算法只是一个协议的名字它并不表示其他的路由选择协议不是最短路径优先最主要的特征是使用分布式的链路状态协议向本自治系统中所有路由器发送信息洪泛法只相自己相邻的路由器发送信息发送的信息就是与本路由器相邻的所有路由器的链路状态与哪些路由器相邻度量只有当链路状态发生变化时路由器才向所有路由器用洪泛法发送此信息所有的路由器最终都能建立一个链路状态数据库这个数据库实际上就是全网的拓扑结构图这个拓扑结构图在全网范围内是一致的链路状态数据库的同步的更新过程收敛快优点将一个自治系统划分为若干个区域主干区域区域边界路由器主干路由器自治系统边界路由器不用而是直接用数据报传送首部各字段意义版本类型分组长度路由器标识符区域标识符检验和鉴别类型鉴别的特点对于不同类型的业务看计算出不同的路由负载平衡鉴别支持让每一个链路状态带上序号序号越大状态越新的五种分组类型类型问候分组类型数据库描述分组类型链路状态请求分组类型链路状态更新分组用洪泛法对全网更新链路状态类型链路状态确认分组采用的是可靠的洪泛法收到更新分组后要发送确认每隔一段时间要刷新一次数据库中的链路状态采用的是可靠的洪泛法收到更新分组后要发送确认每隔一段时间要刷新一次数据库中的链路状态协议对多点接入的局域网采用了指定的路由器的方法外部网关协议内部网关协议主要是设法使数据报在中尽可能有效地从源站传送到目的站使用的原因互联网的规模太大使得自治系统之间路由选择非常困难自治系统之间的路由选择必须考虑有关策略边界网关协议只能是力求寻找一条能够到达目的网络且比较好的路由而并非要寻找一条最佳路由采用了路径向量路由选择协议发言人与其他的发言人要交换路由信息就要先建立连接然后在此连接上交换报文以建立会话利用会话交换路由信息使用连接交换路由信息的两个发言人彼此成为对方发邻站或对等站报文路由器的构成路由器的结构路由器是一种具有多个输入端口和多个输出端口的专用计算机其任务是转发分组按照分组要去的目的地从合适的端口转发给下一跳路由器路由器的转发分组正是网络层的主要工作路由器结构划分为两大部分路由选择部分控制部分核心构件是路由选择处理机任务根据路由选择协议构造路由表不断更新和维护路由表分组转发部分由三部分组成交换结构一组输入端口一组输出端口路由器的作用连接不同的网络交换结构也叫交换组织作用根据转发表对分组进行处理从合适的端口转发出去路由表是根据路由选择算法得出而转发表是从路由表得出的输入端口中的查找和转发功能在路由器的交换功能中是最重要的路由器的端口收到分组时就用中断方式通知路由选择处理机路由器中的输入或输出队列产生溢出是造成分组丢失的重要原因通过存储器通过总线通过纵横交换结构双栈协议向过渡隧道技术的基本首部变化更大的地址空间位扩展的地址层次结构灵活的首部格式改进的选项允许协议继续扩充支持即插即用支持资源的预分配首部改为字节对齐数据报由两大部分组成基本首部和有效载荷净负荷把原来首部中选项的功能都放在扩展首部中并将扩展首部留给路径两端的源站和目的站的主机来处理数据报途中经过的路由器都不处理这些扩展首部只有一个首部例外即逐跳选项扩展首部这样就大大提高了路由器的处理效率的地址单播多播任播将实现的主机和路由器均称为结点一个结点就可能有多个与链路相连的接口一个接口可以有多个单播地址其中的任何一个地址都可以作为到达该结点的目的地址即一个结点接口的单播地址可用来唯一地标志该结点为了使地址再稍简洁些使用冒号十六进制记法冒号十六进制记法可以允许零压缩即一连串连续的零可以为一对冒号所取代可压缩为注意在任一地址中只能使用一次零压缩多播虚拟专用网和网络地址转换多协议标记交换第五章运输层运输层协议概述进程之间的通信运输层向它上面的应用层提供通信服务它属于面向通信部分的最高层同时也是用户功能的最低层当网络的边缘部分中的两个主机使用网络的核心部分的功能进行端到端的通信时只有位于网络边缘部分的主机的协议栈才有运输层而网络核心部分中的路由器在转发分组时都只用到下三层的功能从层来说通信的两端是两台主机但是严格来说真正进行通信的实体是在主机中的进程运输层网络层是为主机之间提供逻辑通信而运输层为应用进程之间提供端到端的逻辑通信在一台主机中经常有多个应用进程同时分别和另一台主机中的多个应用进程通信这表明运输层有一个很重要的功能复用和分用根据应用程序的不同需求运输层需要有两种不同的运输协议即面向连接的和无连接的运输层向高层用户屏蔽了下面网络核心的细节如网络拓扑所采用的路由选择协议等它使应用进程看见的就是好像在两个运输层实体之间有一条端到端的逻辑通信信道当运输层采用面向连接的协议时尽管下面的网络是不可靠的只提供尽最大努力服务但这种逻辑通信信道就相当于一条全双工的可靠信道当运输层采用无连接的协议时这种逻辑通信信道是一条不可靠信道运输层的两个主要协议的运输层有两个主要协议用户数据报协议传输控制协议两个对等运输实体在通信时传送的数据单位叫作运输协议数据单元传送的数据单位协议是报文段传送的数据单位协议是报文或用户数据报传输前不需要建立连接不可靠传输数据前建立连接传输后释放其下网络是不可靠的但是提供可靠的面向连接的运输服务不提供广播多播服务运输层的端口复用应用层所有的应用进程都可以通过运输层再传送到层分用运输层从层收到发送给个应用进程的数据后必须分别交付指明的各应用进程运行在计算机中的进程是用进程标识符来标志的但运行在应用层的各种应用进程却不应当让计算机操作系统指派它的进程标识符这是因为在互联网上使用的计算机的操作系统种类很多而不同的操作系统又使用不同格式的进程标识符为了使运行不同操作系统的计算机的应用进程能够互相通信就必须用统一的方法对体系的应用进程进行标志即使用协议端口号在协议栈层间的抽象的协议端口是软件端口路由器或交换机上的端口是硬件端口端口号只具有本地意义即端口号只是为了标志本计算机应用层中的各进程由此可见两个计算机中的进程要互相通信不仅必须知道对方的地址为了找到对方的计算机而且还要知道对方的端口号为了找到对方计算机中的应用进程用户数据报协议概述具有复用分用差错检验的功能的特点是无连接的发送数据之前不需要建立连接因此减少了开销和发送数据之前的时延使用尽最大努力交付即不保证可靠交付因此主机不需要维持复杂的连接状态表是面向报文的对应用层交下来的报文既不合并也不拆分而是保留这些报文的边界一次交付一个完整的报文没有拥塞控制因此网络出现的拥塞不会使源主机的发送速率降低这对某些实时应用是很重要的很适合多媒体通信的要求选择合适大小的报文支持一对一一对多多对一和多对多的交互通信的首部开销小只有个字节比的个字节的首部要短的首部格式首部字段很简单只有个字节个字段每个字段个字节源端口目的端口长度检验和计算检验和时再用户数据报之前增加个字节的伪首部仅用于计算检验和数据报的检验和只检验数据报的首部而的检验和是把首部和数据部分一起都检验传输控制协议概述最主要的特点是面向连接的运输层协议每一条连接只能有两个端点每一条连接只能是点对点的一对一提供可靠交付的服务提供全双工通信面向字节流的连接把连接作为最基本的抽象每一条连接有两个端点连接的端点不是主机不是主机的地址不是应用进程也不是运输层的协议端口连接的端点叫做套接字或插口端口号拼接到地址即构成了套接字套接字地址端口每一条连接唯一地被通信两端的两个端点两个套接字所确定连接连接的端点是个很抽象的套接字即地址端口同一个地址可以有多个不同的连接同一个端口号也可以出现在多个不同的连接中可靠传输的工作原理理想的传输条件有以下两个特点传输信道不产生差错不管发送方以多快的速度发送数据接收方总是来得及处理收到的数据然而实际的网络都不具备以上两个理想条件必须使用一些可靠传输协议在不可靠的传输信道实现可靠传输停止等待协议停止等待每发送完一个分组就通知发送等待对方的确认在收到确认后再发送下一个分组无差错情况出现差错在接收方会出现两种情况接收时检测出了差错就丢弃其他什么也不做不通知收到有差错的分组在传输过程中丢失了这时当然什么都不知道也什么都不做在这两种情况下都不会发送任何信息如何保证正确收到了呢解决方法超时重传为每一个已发送的分组都设置了一个超时计时器只要在超时计时器到期之前收到了相应的确认就撤销该超时计时器继续发送下一个分组需要暂时保留已发送的分组的副本且必须有编号并且超时计时器设置的重传时间应当比数据在分组传输的平均往返时间更长连续协议滑动窗口协议比较复杂是协议的精髓所在发送方维持的发送窗口它的意义是位于发送窗口内的分组都可连续发送出去而不需要等待对方的确认这样信道利用率就提高了连续协议规定发送方每收到一个确认就把发送窗口向前滑动一个分组的位置接收方一般采用累积确认的方式即不必对收到的分组逐个发送确认而是对按序到达的最后一个分组发送确认这样就表示到这个分组为止的所有分组都已正确收到了优点容易实现即使确认丢失也不必重传缺点不能向发送方反映出接收方已经正确收到的所有分组的信息如果发送方发送了前个分组而中间的第个分组丢失了这时接收方只能对前两个分组发出确认发送方无法知道后面三个分组的下落而只好把后面的三个分组都再重传一次这就叫做回退表示需要再退回来重传已发送过的个分组报文段的首部格式虽然是面向字节流的但传送的数据单元却是报文段一个报文段分为首部和数据两部分而的全部功能都体现在它首部中各字段的作用报文段首部的前个字节是固定的后面有字节是根据需要而增加的选项是整数因此首部的最小长度是字节首部固定部分各字段的意义源端口和目的端口序号报文段序号每一个字节按顺序编号确认号期望收到对方下一个报文段的第一个数据字节的序号数据偏移保留紧急为时表示紧急确认为确认号字段有效推送复位同步终止窗口窗口值作为接收方让发送方设置器发送窗口的依据检验和紧急指针选项最大报文段长度每一个报文段中的数据字段的最大长度窗口扩大选项时间戳选项选择确认选项可靠传输的实现以字节为单位的滑动窗口根据给出的窗口值构造出自己的发送窗口发送窗口表示在没有收到的确认的情况下可以连续把窗口内的数据都发送出去发送窗口里面的序号表示允许发送的序号显然窗口越大发送方就可以在收到对方确认之前连续发送更多的数据因而可能获得更高的传输效率描述发送窗口的状态需要三个指针指针都指向序号收到确认后发送窗口向前滑动的发送窗口内的序号都已用完但还没有再收到确认必须停止发送发送窗口中的序号全是发送未确认的或未发送的发送窗口只是发送缓存中的一部分发送缓存用来暂时存放发送应用程序传送给发送方准备发送的数据已发送出但尚未收到确认的数据接收缓存用来暂时存放按序到达的但尚未被接收应用程序读取的数据不按序到达的数据注意第一的发送窗口并不总是和的接收窗口一样大因为有一定的时间滞后第二标准没有规定对不按序到达的数据应如何处理通常是先临时存放在接收窗口中等到字节流中所缺少的字节收到后再按序交付上层的应用进程第三要求接收方必须有累积确认的功能这样可以减小传输开销是全双工通信每一方都有自己的发送窗口和接受窗口超时重传时间的选择超时重传机制是中最重要和最复杂的问题之一每发送一个报文段就对这个报文段设置一次计时器只要计时器设置的重传时间到但还没有收到确认就要重传这一报文段重传时间的选择是最复杂的问题之一采用了一种自适应算法它记录一个报文段发出的时间以及收到相应的确认的时间这两个时间之差就是报文段的往返时间保留了的一个加权平均往返时间这又称为平滑的往返时间第一次测量到样本时值就取为所测量到的样本值以后每测量到一个新的样本就按下式重新计算一次超时重传时间应略大于上面得出的加权平均往返时间建议使用下式计算是的偏差的加权平均值建议这样计算第一次测量时值取为测量到的样本值的一半在以后的测量中则使用下式计算加权平均的是个小于的系数其推荐值是即算法在计算平均往返时间时只要报文段重传了就不采用其往返时间样本但是这又引起新的问题当报文段的时延突然增大了很多时在原来得出的重传时间内不会收到确认报文段于是就重传报文段但根据算法不考虑重传的报文段的往返时间样本这样超时重传时间就无法更新报文段修正后的算法报文段每重传一次就把超时重传的时间增大一点典型的做法是取新的重传时间为原来的重传时间的倍当不再发生报文段的重传时才根据报文段的往返时延更新平均往返时延和超时重传时间的数值选择确认接收方收到了和前面的字节流不连续的两个字节块如果这些字节的序号都在接收窗口之内那么接收方就先收下这些数据但要把这些信息准确地告诉发送方使发送方不要再重复发送这些已收到的数据流量控制利用滑动窗口实现流量控制流量控制让发送方的发送速率不要太快要让接收方来得及接收可能出现死锁向发送了零窗口的报文段后不久的接收缓存又有了一些存储空间于是向发送了的报文段但这个报文段在传送过程中丢失了一直等待收到发送的非零窗口的通知而也一直等待发送的数据如果没有其他措施这种互相等待的死锁局面将一直延续下去为了解决这个问题为每一个连接设有一个持续计时器只要连接的一方收到对方的零窗口通知就启动该持续计时器若持续计时器设置的时间到期就发送一个零窗口探测报文段仅携带字节的数据而对方就在确认这个探测报文段时给出了现在的窗口值若窗口仍然是零则收到这个报文段的一方就重新设置持续计时器若窗口不是零则死锁的僵局就可以打破了的传输效率控制报文段的发送时机第一种机制是维持一个变量它等于最大报文段长度只要缓存中存放的数据达到字节时就组装成一个报文段发送出去第二种机制是由发送方的应用进程指明要求发送报文段即支持的推送操作第三种机制是发送方的一个计时器期限到了这时就把当前已有的缓存数据装入报文段但长度不能超过发送出去算法若发送应用进程把要发送的数据逐个字节地送到的发送缓存则发送方就把第一个数据字节先发送出去把后面到达的数据字节都缓存起来当发送方收到对第一个数据字符的确认后再把发送缓存中的所有数据组装成一个报文段发送出去同时继续对随后到达的数据进行缓存只有在收到对前一个报文段的确认后才继续发送下一个报文段当到达的数据已达到发送窗口大小的一半或已达到报文段的最大长度时就立即发送一个报文段糊涂窗口综合征接收方缓存已满应用程序一次只读取一个导致发送方每次只发送一个字节数据效率降低解决方法让接收方等待一段时间使得接收缓存已有足够空间容纳一个最长的报文段或等待接收缓存已有一半空闲空间只要出现这两种情况之一接收方就发出确认报文并向发送方通知当前的窗口大小的拥塞控制拥塞控制的一般原理拥塞在某段时间若对网络中某一资源的需求超过了该资源所提供的可用部分网络性能变坏的情况问题的实质是整个系统的各个部分速率缓存大小等不匹配拥塞控制防止过多的数据注入到网络中这样可以使网络中的路由器或链路不致过载拥塞控制的前提网络能够承受现有的网络负荷这是一个全局性的过程区分流量控制和拥塞控制流量控制往往是指点对点通信量的控制是端到端的问题实践证明拥塞控制是很难设计的因为它是一个动态的而不是静态的问题当前网络正朝着高速化的方向发展这很容易出现缓存不够大而造成分组的丢失但分组的丢失是网络发生拥塞的征兆而不是原因在许多情况下甚至正是拥塞控制本身成为引起网络性能恶化甚至发生死锁的原因这点应特别引起重视分类开环控制方法就是在设计网络时事先将有关发生拥塞的因素考虑周到力求网络在工作时不产生拥塞闭环控制方法是基于反馈环路的概念属于闭环控制的有以下几种措施监测网络系统以便检测到拥塞在何时何处发生将拥塞发生的信息传送到可采取行动的地方调整网络系统的运行以解决出现的问题的拥塞控制方法采用基于窗口的方法进行拥塞控制该方法属于闭环控制方法发送方维持一个拥塞窗口拥塞窗口的大小取决于网络的拥塞程度并且动态地在变化发送端利用拥塞窗口根据网络的拥塞情况调整发送的数据量所以发送窗口大小不仅取决于接收方公告的接收窗口还取决于网络的拥塞状况判断网络拥塞的依据是出现超时进行拥塞控制的算法慢开始拥塞避免快重传快恢复慢开始和拥塞避免慢开始算法当主机开始发送数据时由于并不清楚网络的负荷情况所以如果立即把大量数据字节注入到网络那么就有可能引起网络发生拥塞经验证明较好的方法是先探测以下即由小到大逐渐增大发送窗口也就是说由小到大逐渐增大拥塞窗口数值慢开始规定在每收到一个新的报文段的确认后可以把拥塞窗口增加最多一个发送方的最大报文段的数值拥塞窗口每次的增加量使用慢开始算法后每经过一个传输轮次拥塞窗口就加倍一个传输轮次所经历的时间其实就是往返时间传输轮次更加强调把拥塞窗口所允许发送的报文段都连续发送出去并收到了对已发送的最后一个字节的确认例如拥塞窗口这时的往返时间就是发送方连续发送个报文段并收到这个报文段的确认总共经历的时间慢开始门限的用法如下当时使用慢开始算法当时停止使用慢开始算法而改用拥塞避免算法当时既可使用慢开始算法也可使用拥塞避免算法拥塞避免算法让拥塞窗口缓慢地增大即每经过一个往返时间就把发送方的拥塞窗口加而不是加倍使拥塞窗口按线性规律缓慢增长比慢开始算法的拥塞窗口增长速率缓慢得多因此在拥塞避免阶段就有加法增大的特点这表明在拥塞避免阶段拥塞窗口按线性规律缓慢增长比慢开始算法的拥塞窗口增长速率缓慢得多快重传算法采用快重传算法可以让发送方尽早知道发生了个别报文段的丢失快重传算法首先要求接收方不要等待自己发送数据时才进行捎带确认而是要立即发送确认即使收到了失序的报文段也要立即发出对已收到的报文段的重复确认发送方只要一连收到三个重复确认就知道接收方确实没有收到报文段因而应当立即进行重传即快重传这样就不会出现超时发送方也不就会误认为出现了网络拥塞使用快重传可以使整个网络的吞吐量提高约不难看出快重传并非取消重传计时器而是在某些情况下可更早地重传丢失的报文段快恢复算法主动队列管理的运输连接管理的连接建立建立连接的过程叫做握手握手需要在客户和服务器之间交换三个报文段称之为三报文握手采用三报文握手主要是为了防止已失效的连接请求报文段突然又传送到了因而产生错误一开始的服务器进程先创建传输控制块的客户进程也是首先创建传输控制模块的向发出连接请求报文段其首部中的同步位并选择序号表明传送数据时的第一个数据字节的序号是规定报文段不能携带数据但要消耗一个序号的收到连接请求报文段后如同意则发回确认在确认报文段中应使使其确认号自己选择的序号收到此报文段后向给出确认其确认号的通知上层应用进程连接已经建立的收到主机的确认后也通知其上层应用进程连接已经建立的连接释放数据传输结束后通信的双方都可释放连接连接释放过程是四报文握手连接释放报文段首部的终止控制位数据传输结束后通信的双方都可释放连接现在的应用进程先向其发出连接释放报文段并停止再发送数据主动关闭连接把连接释放报文段首部的其序号等待的确认发出确认确认号而这个报文段自己的序号服务器进程通知高层应用进程从到这个方向的连接就释放了连接处于半关闭状态若发送数据仍要接收若已经没有要向发送的数据其应用进程就通知释放连接收到连接释放报文段后必须发出确认在确认报文段中确认号自己的序号然后进入状态为什么在状态必须等待第一为了保证发送的最后一个报文段能够到达第二防止已失效的连接请求报文段出现在本连接中在发送完最后一个报文段后再经过时间就可以使本连接持续的时间内所产生的所有报文段都从网络中消失这样就可以使下一个新的连接中不会出现这种旧的连接请求报文段第六章应用层应用层协议是为了解决某一类应用问题而问题的解决往往是通过位于不同主机中的多个应用进程之间的通信和协同工作来完成的应用层的具体内容就是规定应用进程在通信时所遵循的协议应用层的许多协议都是基于模式客户和服务器都是通信中所涉及的两个应用进程域名系统域名系统概述许多应用层软件经常直接使用域名系统但计算机的用户只是间接而不是直接使用域名系统互联网采用层次结构的命名树作为主机的名字并使用分布式的域名系统名字到地址的解析是由若干个域名服务器程序完成的域名服务器程序在专设的结点上运行运行该程序的机器称为域名服务器互联网采用了层次树状结构的命名方法任何一个连接在互联网上的主机或路由器都有一个唯一的层次结构的名字即域名域名的结构由标号序列组成各标号之间用点隔开三级域名二级域名顶级域名各标号分别代表不同级别的域名域名只是个逻辑概念并不代表计算机所在的物理地点变长的域名和使用有助记忆的字符串是为了便于人来使用每一个域名中点的数目则不一定正好是三个顶级域名国家顶级域名表示中国表示美国表示英国等等通用顶级域名最早的顶级域名公司和企业网络服务机构非盈利性组织美国专用教育机构美国专用政府部门美国专用军事部门国际组织新增通用顶级域名等等基础结构域名这种顶级域名只有一个即用于反响域名解析因此又称为反向域名域名服务器一个服务器所管辖的范围叫做区各单位根据具体情况来划分自己管辖范围的区但在一个区中的所有节点必须是能够连通的每一个区设置相应的权限域名服务器用来保存该区中的所有主机的域名到地址的映射服务器的管辖范围不是以域为单位而是以区为单位域名服务器有以下四种类型根域名服务器最高层次的域名服务器也是最重要的域名服务器所有的根域名服务器都知道所有的顶级域名服务器的域名和地址不管是哪一个本地域名服务器若要对互联网上任何一个域名进行解析只要自己无法解析就首先求助于根域名服务器根域名服务器并不直接把域名直接转换成地址在使用迭代查询时根域名服务器把下一步应当找的顶级域名服务器的地址告诉本地域名服务器根域名服务器共有套装置不是个机器顶级域名服务器顶级域名服务器即服务器负责管理在该顶级域名注册的所有二级域名权限域名服务器负责一个区的域名服务器本地域名服务器当一个主机发出查询请求时这个查询请求报文就发送给本地域名服务器这种域名服务器有时也称为默认域名服务器提高域名服务器的可靠性域名服务器都把数据复制到几个域名服务器来保存其中的一个是主域名服务器其他的是辅助域名服务器当主域名服务器出故障时辅助域名服务器可以保证的查询工作不会中断主域名服务器定期把数据复制到辅助域名服务器中而更改数据只能在主域名服务器中进行这样就保证了数据的一致性域名解析过程主机向本地域名服务器的查询一般都是采用递归查询如果主机所询问的本地域名服务器不知道被查询域名的地址那么本地域名服务器就以客户的身份向其他根域名服务器继续发出查询请求报文本地域名服务器向根域名服务器的查询通常是采用迭代查询当根域名服务器收到本地域名服务器的迭代查询请求报文时要么给出所要查询的地址要么告诉本地域名服务器你下一步应当向哪一个域名服务器进行查询然后让本地域名服务器进行后续的查询每个域名服务器都维护一个高速缓存存放最近用过的名字以及从何处获得名字映射信息的记录文件传送协议概述文件传送协议是互联网上使用得最广泛的文件传送协议提供交互式的访问允许客户指明文件的类型与格式并允许文件具有存取权限屏蔽了各计算机系统的细节因而适合于在异构网络中任意计算机之间传送文件文件传送非常困难原因是众多的计算机厂商研制出的文件系统多达数百种且差别很大的基本工作原理网络环境下复制文件的复杂性计算机存储数据的格式不同文件的目录结构和文件命名的规定不同对于相同的文件存取功能操作系统使用的命令不同访问控制方法不同的特点只提供文件传送的一些基本的服务使用可靠的运输服务减少消除在不同操作系统下处理文件的不兼容性使用模式一个服务器进程可以同时为多个客户进程提供服务的服务器进程有两大部分一个主进程负责接受新的请求若干个从属进程负责处理单个请求两个连接控制连接控制进程数据连接数据传送进程当客户进程向服务器进程发出建立连接请求时要寻找连接服务器进程的熟知端口同时还要告诉服务器进程自己的另一个端口号码用于建立数据传送连接接着服务器进程用自己传送数据的熟知端口与客户进程所提供的端口号码建立数据传送连接由于使用了两个不同的端口号所以数据连接与控制连接不会发生混乱使用两个不同端口号使协议更加简单和更容易实现在传输文件时还可以利用控制连接例如客户发送请求终止传输简单文件传送协议是一个很小且易于实现的文件传送协议使用客户服务器方式和使用数据报因此需要有自己的差错改正措施只支持文件传输而不支持交互没有一个庞大的命令集没有列目录的功能也不能对用户进行身份鉴别特点每次传送的数据中有字节的数据但最后一次可不足字节数据也称为文件块每个块按序编号从开始支持码或二进制传送可对文件进行读或写使用很简单的首部的工作很像停止等待协议远程终端协议是一个简单的远程终端协议也是互联网的正式标准用户用就可在其所在地通过连接注册即登录到远地的另一个主机上使用主机名或地址也使用客户服务器方式在本地系统运行客户进程而在远地主机则运行服务器进程和的情况相似服务器中的主进程等待新的请求并产生从属进程来处理每一个连接使用网络虚拟终端格式万维网万维网概述万维网并非某种特殊的计算机网络万维网是一个大规模的联机式的储藏所万维网用链接的方法能非常方便地从互联网上的一个站点访问另一个站点从而主动地按需获取丰富的信息这种访问方式称为链接万维网提供分布式服务万维网是分布式超媒体系统它是超文本系统的扩充一个超文本由多个信息源链接成利用一个链接可使用户找到另一个文档这些文档可以位于世界上任何一个接在互联网上的超文本系统中超文本是万维网的基础超媒体与超文本的区别是文档内容不同超文本文档仅包含文本信息而超媒体文档还包含其他表示方式的信息如图形图像声音动画甚至活动视频图像万维网的工作方式万维网以客户服务器方式工作浏览器就是在用户计算机上的万维网客户程序万维网文档所驻留的计算机则运行服务器程序因此这个计算机也称为万维网服务器客户程序向服务器程序发出请求服务器程序向客户程序送回客户所要的文档在一个客户程序主窗口上显示出的万维网文档称为页面万维网解决的问题怎样标志分布在整个互联网上的万维网文档使用统一资源定位符来标志万维网上的各种文档使每一个文档在整个互联网的范围内具有唯一的标识符用何协议实现万维网上各种超链的链接在万维网客户程序与万维网服务器程序之间进行交互所使用的协议是超文本传送协议是一个应用层协议它使用连接进行可靠的传送怎样使各种万维网文档都能在互联网上的各种计算机上显示出来同时使用户清楚地知道在什么地方存在着超链超文本标记语言使得万维网页面的设计者可以很方便地用一个超链从本页面的某处链接到互联网上的任何一个万维网页面并且能够在自己的计算机屏幕上将这些页面显示出来怎样使用户能够很方便地找到所需的信息为了在万维网上方便地查找信息用户可使用各种的搜索工具即搜索引擎统一资源定位符的格式相当于一个文件名在网络范围的扩展字符对大小写无要求是格式规定主机是存放资源的主机在互联网中的域名端口路径有时可以省略的默认端口超文本传送协议的操作过程的主要特点是面向事务的客户服务器协议协议是无状态持续连接的持续连接有两种工作方式非流水线方式流水线方式协议本身也是无连接的他使用了面向连接的向上提供的服务代理服务器代理服务器又称为万维网高速缓存它代表浏览器发出请求万维网高速缓存把最近的一些请求和响应暂存在本地磁盘中当与暂时存放的请求相同的新请求到达时万维网高速缓存就把暂存的响应发送出去而不需要按的地址再去互联网访问该资源使用高速缓存可以减少访问互联网服务器的时延的报文结构有两种报文请求报文和响应报文是面向正文的因此在报文中的每一个字段都是一些码串报文由三个部分组成即开始行首部行和实体主体在请求报文中开始行就是请求行方法是面向对象技术中使用的专门名词所谓方法就是对所请求的对象进行的操作因此这些方法实际上也就是一些命令因此请求报文的类型是由它所采用的方法决定的在响应报文中开始行就是状态行状态行包括三项内容即的版本状态码以及解释状态码的简单短语状态码都是三位数字表示通知信息的如请求收到了或正在进行处理表示成功如接受或知道了表示重定向表示要完成请求还必须采取进一步的行动表示客户的差错如请求中有错误的语法或不能完成表示服务器的差错如服务器失效无法完成请求在服务器上存放用户的信息万维网站点使用来跟踪用户表示在服务器和客户之间传递的状态信息使用的网站服务器为用户产生一个唯一的识别码利用此识别码网站就能够跟踪该用户在该网站的活动万维网的文档超文本标记语言超文本标记语言中的的意思就是设置标记定义了许多用于排版的命令即标签把各种标签嵌入到万维网的页面中这样就构成了所谓的文档文档是一种可以用任何文本编辑器创建的码文件仅当文档是以或为后缀时浏览器才对此文档的各种标签进行解释还规定了链接的设置方法每个链接都有一个起点和终点远程链接超链的终点是其他网点上的页面本地链接超链指向本计算机中的某个文件是可扩展标记语言它和很相似但的设计宗旨是传输数据而不是显示数据是为了在浏览器上显示数据不是要替换而是对的补充是可扩展超文本标记语言是更为严格的版本是层叠样式表用于为文档定义布局与的区别就是用于结构化内容而则用于格式化结构化的内容动态万维网文档静态文档是指该文档创作完毕后就存放在万维网服务器中在被用户浏览的过程中内容不会改变动态文档是指文档的内容是在浏览器访问万维网服务器时才由应用程序动态创建动态文档和静态文档之间的主要差别体现在服务器一端这主要是文档内容的生成方法不同而从浏览器的角度看这两种文档并没有区别通关网关接口定义了动态文档应如何创建输入数据应如何提供给应用程序以及输出结果应如何使用程序的正式名字是脚本或脚本脚本指的是一个程序它被另一个程序解释程序而不是计算机的处理机来解释或执行脚本运行起来要比一般的编译程序要慢因为它的每一条指令先要被另一个程序来处理这就要一些附加的指令而不是直接被指令处理器来处理电子邮件电子邮件概述电子邮件是互联网上使用得最多的和最受用户欢迎的一种应用电子邮件把邮件发送到收件人使用的邮件服务器并放在其中的收件人邮箱中收件人可随时上网到自己使用的邮件服务器进行读取传递迅速费用低廉发送邮件的协议简单邮件传送协议位码邮件读取邮件的协议邮局协议和通用互联网邮件扩充在其邮件首部中说明了邮件的数据类型如文本声音图像视像等使用可在邮件中同时传送多种类型的数据电子邮件系统组成构件用户代理邮件服务器邮件发送协议邮件读取协议用户代理电子邮件客户端软件功能撰写显示处理通信邮件服务器按照客户服务器方式工作电子邮件组成信封内容电子邮件地址格式收件人邮箱名邮箱所在主机的域名符号读作表示在的意思简单邮件传送协议规定了两个相互通信的进程之间如何交换信息使用客户服务器方式发送方为客户接收方为服务器规定了条命令和种应答信息通信的三个阶段连接建立不使用中间的邮件服务器邮件传送连接释放邮件发送完毕应释放连接电子邮件的信息格式一个电子邮件分为信封和内容两大部分规定了邮件内容中首部格式主体部分由用户自由撰写邮件内容首部关键字收件人地址主题抄送盲抄送暗送发件人地址发信日期邮件读取协议和邮局协议使用方式简单离线读取网际报文存取协议使用方式支持在线操作多文件夹管理基于万维网的电子邮件浏览器与邮件服务器之间使用协议邮件服务器之间使用协议动态主机配置协议提供即插即用连网机制主机启动时广播发送发现报文服务器回应提供报文可使用中继代理实现跨网段分配附录常用协议与端口对照表部分协议端口号描述数据控制连接安全远程登录远程终端邮件发送域名解析万维网服务邮件接收邮件接收高级加密的万维网服务服务器客户端端口总结网络层次与协议对应关系七层模型四层模型主要协议应用层应用层表示层合并会话层运输层运输层网络层网际层数据链路层网络接口层物理层双绞线光纤无线调制解调提示本笔记基于计算机网络第版谢希仁整理",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2025-09-01 10:06:41",postMainColor:""}</script><noscript><style>#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:(e,t,o)=>{if(0===o)return;const a={value:t,expiry:Date.now()+864e5*o};localStorage.setItem(e,JSON.stringify(a))},get:e=>{const t=localStorage.getItem(e);if(!t)return;const o=JSON.parse(t);if(!(Date.now()>o.expiry))return o.value;localStorage.removeItem(e)}},e.getScript=(e,t={})=>new Promise((o,a)=>{const n=document.createElement("script");n.src=e,n.async=!0,n.onerror=a,n.onload=n.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,o())},Object.keys(t).forEach(e=>{n.setAttribute(e,t[e])}),document.head.appendChild(n)}),e.getCSS=(e,t=!1)=>new Promise((o,a)=>{const n=document.createElement("link");n.rel="stylesheet",n.href=e,t&&(n.id=t),n.onerror=a,n.onload=n.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,o())},document.head.appendChild(n)}),e.activateDarkMode=()=>{document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#18171d")},e.activateLightMode=()=>{document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#f7f9fe")};const t=saveToLocal.get("theme");"dark"===t?activateDarkMode():"light"===t&&activateLightMode();const o=saveToLocal.get("aside-status");void 0!==o&&("hide"===o?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><script src="/js/echarts.min.js"></script><script src="/js/jquery.min.js"></script><link rel="stylesheet" href="/css/custom.css" media="defer" onload='this.media="all"'><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="Aurorp1g Blog" type="application/atom+xml"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"><script async src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="fa-solid fa-fingerprint fa-fade"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">个人网站</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="我的博客"><img class="back-menu-item-icon" src="/favicon.ico" alt="博客"><span class="back-menu-item-text">博客</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://github.com/Aurorp1g" title="我的GitHub"><i class="fa-fw fab fa-github"></i><span class="back-menu-item-text">GitHub</span></a><a class="back-menu-item" href="https://aurorp1g.github.io/CTF_Zone/" title="自建的CTF Zone"><img class="back-menu-item-icon" src="https://aurorp1g.github.io/CTF_Zone/img/icon.ico" alt="CTF Zone"><span class="back-menu-item-text">CTF Zone</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">实用工具</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="好用的图床"><i class="fa-fw fas fa-cloud"></i><span class="back-menu-item-text">安知鱼图床</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://www.vercount.one/" title="比busuanzi更稳定的统计网站访问量工具"><img class="back-menu-item-icon" src="https://www.vercount.one/favicon.ico" alt="vercount计数"><span class="back-menu-item-text">vercount计数</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://icon.liiiu.cn/" title="好用的万能图标工具"><i class="fa-fw fas fa-icons"></i><span class="back-menu-item-text">万能图标</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://haowallpaper.com/" title="高质量壁纸网站"><img class="back-menu-item-icon" src="https://haowallpaper.com/favicon.ico" alt="哲风壁纸"><span class="back-menu-item-text">哲风壁纸</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">Aurorp1g Blog</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>文库</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size:.9em"></i> <span>归档</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size:.9em"></i> <span>分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size:.9em"></i> <span>标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>网站</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size:.9em"></i> <span>留言信箱</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/charts/"><i class="fa fa-pie-chart faa-tada"></i> <span>博客统计</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/update/"><i class="fa fa-history faa-tada"></i> <span>更新日志</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>导航</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/laboratory/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size:.9em"></i> <span>项目展示</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size:.9em"></i> <span>友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/equipment/"><i class="anzhiyufont anzhiyu-icon-dice-d20 faa-tada" style="font-size:.9em"></i> <span>我的装备</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>生活</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size:.9em"></i> <span>音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/personal/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size:.9em"></i> <span>相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/video/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size:.9em"></i> <span>视频库</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/personal/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size:.9em"></i> <span>本站</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="fa-solid fa-pen-fancy faa-tada"></i> <span>哔哔</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i> <span>搜索</span></a></div><input id="center-console" type="checkbox"><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole()"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="/assets/reward/weixin.jpg" target="_blank"><img class="post-qr-code-img" alt="微信" src="/assets/reward/weixin.jpg"></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/assets/reward/zhifubao.jpg" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="/assets/reward/zhifubao.jpg"></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title">最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Daily-Life/" style="font-size:1.05rem">Daily Life<sup>15</sup></a><a href="/tags/HTML/" style="font-size:1.05rem">HTML<sup>1</sup></a><a href="/tags/Java/" style="font-size:1.05rem">Java<sup>3</sup></a><a href="/tags/Linux/" style="font-size:1.05rem">Linux<sup>1</sup></a><a href="/tags/Markdown/" style="font-size:1.05rem">Markdown<sup>1</sup></a><a href="/tags/PWN/" style="font-size:1.05rem">PWN<sup>1</sup></a><a href="/tags/Python/" style="font-size:1.05rem">Python<sup>3</sup></a><a href="/tags/Study/" style="font-size:1.05rem">Study<sup>19</sup></a><a href="/tags/%E5%A4%96%E6%8C%82%E6%A0%87%E7%AD%BE/" style="font-size:1.05rem">外挂标签<sup>1</sup></a><a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" style="font-size:1.05rem">操作系统<sup>2</sup></a><a href="/tags/%E6%B1%87%E7%BC%96/" style="font-size:1.05rem">汇编<sup>1</sup></a></div></div><hr></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/07/"><span class="card-archive-list-date">七月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">10</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/06/"><span class="card-archive-list-date">六月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/05/"><span class="card-archive-list-date">五月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">5</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/04/"><span class="card-archive-list-date">四月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/03/"><span class="card-archive-list-date">三月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">11</span><span>篇</span></div></a></li></ul></div><hr></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/CTF/" itemprop="url">CTF</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/Study/" tabindex="-1" itemprop="url"><span><i class="anzhiyufont anzhiyu-icon-hashtag"></i> Study</span></a></span></div></div><h1 class="post-title" itemprop="name headline">网络技术知识点</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2025-07-30T09:43:17.000Z" title="发表于 2025-07-30 17:43:17">2025-07-30</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2025-09-01T02:06:41.783Z" title="更新于 2025-09-01 10:06:41">2025-09-01</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">字数总计:</span><span class="word-count" title="文章字数">3.4w</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">阅读时长:</span><span>105分钟</span></span><span class="post-meta-separator"></span><span class="post-meta-pv-cv" data-flag-title="网络技术知识点"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator"></span><span class="post-meta-position" title="作者IP属地为广东 汕头"><i class="anzhiyufont anzhiyu-icon-location-dot"></i> 广东 汕头</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s58 18 88 18 58-18 88-18 58 18 88 18v44h-352Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="/img/net_work.avif"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><div class="post-ai-description"><div class="ai-title"><i class="anzhiyufont anzhiyu-icon-bilibili"></i><div class="ai-title-text">AI-摘要</div><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right"></i><i class="anzhiyufont anzhiyu-icon-circle-dot" title="朗读摘要"></i><div id="ai-tag">Aurorp1g GPT</div></div><div class="ai-explanation">AI初始化中...</div><div class="ai-btn-box"><div class="ai-btn-item">介绍自己 🙈</div><div class="ai-btn-item">生成本文简介 👋</div><div class="ai-btn-item">推荐相关文章 📖</div><div class="ai-btn-item">前往主页 🏠</div><div class="ai-btn-item" id="go-tianli-blog">前往爱发电购买</div></div><script data-pjax="" src="/js/anzhiyu/ai_abstract.js"></script></div><article class="post-content" id="article-container" itemscope itemtype="https://aurorp1g.github.io/posts/1ad824a8.html"><header><a class="post-meta-categories" href="/categories/CTF/" itemprop="url">CTF</a><a href="/tags/Study/" tabindex="-1" itemprop="url">Study</a><h1 id="CrawlerTitle" itemprop="name headline">网络技术知识点</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">Aurorp1g</span><time itemprop="dateCreated datePublished" datetime="2025-07-30T09:43:17.000Z" title="发表于 2025-07-30 17:43:17">2025-07-30</time><time itemprop="dateCreated datePublished" datetime="2025-09-01T02:06:41.783Z" title="更新于 2025-09-01 10:06:41">2025-09-01</time></header><blockquote><p>内容有点多, 可能有弄错的地方, 注意辨别</p></blockquote><h1 id="第一章-概述"><a href="#第一章-概述" class="headerlink" title="第一章 概述"></a>第一章 概述</h1><h2 id="1-1-计算机网络在信息时代中的作用"><a href="#1-1-计算机网络在信息时代中的作用" class="headerlink" title="1.1 计算机网络在信息时代中的作用"></a>1.1 计算机网络在信息时代中的作用</h2><ol><li>21 世纪的重要特征：数字化，网络化，信息化</li><li>21 世纪是以网络为核心的信息时代</li><li>常见三类网络：电信网络，有线电视网络，计算机网络</li><li>Internet 的中文译名：</li></ol><ul><li>（1）因特网</li><li>（2）互联网：由数量极大的各种计算机网络互连起来</li></ul><ol><li>互联网具有两个重要的特点：连通性和共享</li></ol><ul><li>（1）连通性：互联网使上网用户之间不管相距多远，都可以非常方便的交换各种信息，好像这些用户中端是直接连通的</li><li>（2）共享：就是指资源共享，资源包括信息，软件，硬件</li></ul><ol><li>互联网+</li></ol><h2 id="1-2-互联网概述"><a href="#1-2-互联网概述" class="headerlink" title="1.2 互联网概述"></a>1.2 互联网概述</h2><h3 id="1-2-1-网络的网络"><a href="#1-2-1-网络的网络" class="headerlink" title="1.2.1 网络的网络"></a>1.2.1 网络的网络</h3><ol><li>计算机网络：由若干结点和连接这些结点的链路组成。<ul><li>结点包括：计算机，集线器，交换机，路由器</li></ul></li><li>互联网：网络之间通过路由器互连起来，就构成了一个覆盖范围更大的计算机网络，因此互联网是“网络中的网络”</li><li>网络：网络把许多计算机连接在一起，而互联网则把许多网络通过路由器连接在一起。与网络相连的计算机称为主机。</li><li>计算机网络的三种定义：<ul><li>广义观点：实现远程信息处理的系统或能进一步达到资源共享的系统</li><li>资源共享观点：以能够相互共享资源的方式互联起来的自治计算机系统的集合</li><li>用户透明性观点：存在一个能为用户自动管理资源的网络操作系统，它能够调用用户所需要的资源，而整个网络就像一个大的计算机系统一样对用户是透明的</li></ul></li></ol><h3 id="1-2-2-互联基础结构发展的三个阶段"><a href="#1-2-2-互联基础结构发展的三个阶段" class="headerlink" title="1.2.2 互联基础结构发展的三个阶段"></a>1.2.2 互联基础结构发展的三个阶段</h3><ol><li>第一阶段：单个网络 ARPANET 向互连网发展的过程<ul><li>互联网的雏形：单个的分组交换网 ARPANET</li><li>1983 年 TCP/IP 协议成为 ARPANET 的标准协议</li><li>internet（互连网）：泛指由多个计算机网络互连而成的计算机网络</li><li>Internet（互联网）：指当前全球最大的，开放的，由众多网络相互连接而成的特定互连网，它采用 TCP/IP 协议族作为通信的规则，且前身为美国的 ARPANET</li></ul></li><li>第二阶段：三级结构的互联网<ul><li>三级计算机网络：主干网，地区网，校园网（或企业网）</li></ul></li><li>第三阶段：形成了多层次的 ISP 结构的互联网<ul><li>互联网服务提供者 ISP</li><li>流程：<ul><li>（1）ISP 向互联网管理机构申请很多 IP 地址，同时拥有通信线路以及路由器等连网设备</li><li>（2）任何机构和个人只要向某个 ISP 交纳规定的费用，就可以从该 ISP 获取所需 IP 地址的使用权，并可通过该 ISP 接入到互联网</li></ul></li><li>ISP 层次：主干 ISP，地区 ISP，本地 ISP</li></ul></li><li>互联网交换点 IXP：<ul><li>作用：允许两个网络直接相连并交换分组，而不需要再通过第三个网络来转发分组。</li><li>IXP 常采用工作在数据链路层的网络交换机，这些网络交换机都用局域网互连起来</li></ul></li><li>万维网 WWW：<ul><li>万维网（亦作“Web”、“WWW”、“’W3’”，英文全称为“World Wide Web”），是一个由许多互相链接的超文本组成的系统，通过互联网访问。在这个系统中，每个有用的事物，称为一样“资源”；并且由一个全局“统一资源标识符”（URI）标识；这些资源通过超文本传输协议（Hypertext Transfer Protocol）传送给用户，而后者通过点击链接来获得资源。</li><li>万维网联盟（英语：World Wide Web Consortium，简称 W3C），又称 W3C 理事会。1994 年 10 月在麻省理工学院（MIT）计算机科学实验室成立。万维网联盟的创建者是万维网的发明者蒂姆・伯纳斯 - 李。<br>—百度百科</li></ul></li></ol><h3 id="1-2-3-互联网的标准化工作"><a href="#1-2-3-互联网的标准化工作" class="headerlink" title="1.2.3 互联网的标准化工作"></a>1.2.3 互联网的标准化工作</h3><ul><li>互联网协会（ISOC）<ul><li>互联网体系结构委员会 IAB<ul><li>互联网工程部 IETF<ul><li>互联网工程指导小组 IESG：主要针对协议的开发和标准化</li></ul></li><li>互联网研究部 IRTF<ul><li>互联网研究指导小组 IRSG：（RFC“请求评论”）<ul><li>指定互联网标准的三个阶段：<ul><li>（1）互联网草案</li><li>（2）建议标准</li><li>（3）互联网标准</li></ul></li></ul></li></ul></li></ul></li></ul></li></ul><h2 id="1-3-互联网的组成"><a href="#1-3-互联网的组成" class="headerlink" title="1.3 互联网的组成"></a>1.3 互联网的组成</h2><ul><li>从工作方式上看：<ul><li>（1）边缘部分：用户直接使用的部分（主机）</li><li>（2）核心部分：为边缘部分提供服务的（连通性和交换）（网络和路由器）</li></ul></li><li>从组成部分来看：<ul><li>（1）硬件</li><li>（2）软件</li><li>（3）协议</li></ul></li><li>从功能组成上来看：<ul><li>（1）通信子网（数据传输，交换，控制，存储）</li><li>（2）资源子网（实现硬件，软件，数据资源共享的设备及其软件的集合）</li></ul></li></ul><h3 id="1-3-1-互联网的边缘部分"><a href="#1-3-1-互联网的边缘部分" class="headerlink" title="1.3.1 互联网的边缘部分"></a>1.3.1 互联网的边缘部分</h3><ul><li>端系统：处在互联网边缘的部分就是连接在互联网上的所有的主机。这些主机又称为端系统</li><li>端系统之间的通信方式：客户 - 服务器方式 (C/S)；对等方式 (P2P)</li></ul><h4 id="客户-服务器方式："><a href="#客户-服务器方式：" class="headerlink" title="客户 - 服务器方式："></a>客户 - 服务器方式：</h4><ul><li>主机 A 运行客户程序 &lt; - - - - &gt; 主机 B 运行服务器程序<ul><li>A 向 B 发出服务请求，B 向 A 提供服务</li><li>客户是服务的请求方，服务器是服务的提供方</li><li>对于客户程序：<ul><li>（1）被用户调用后运行，通信时主动向远地服务器发起通信，因此客户程序必须知道服务器程序的地址</li><li>（2）不需要特殊的硬件和很复杂的操作系统</li></ul></li><li>对于服务器程序：<ul><li>（1）是一种专门来提供某种服务的程序，可同时处理多个客户请求</li><li>（2）系统启动后自动调用并不断运行，被动等待接受来自各地的客户的请求，因此服务器不需要知道客户程序的地址</li><li>（3）一般需要有强大的硬件和高级的操作系统支持</li></ul></li></ul></li></ul><h4 id="对等连接方式：P2P"><a href="#对等连接方式：P2P" class="headerlink" title="对等连接方式：P2P"></a>对等连接方式：P2P</h4><ul><li>P2P 方式：只要两台主机都运行了对等连接软件（P2P 软件），就能进行平等的，对等连接通信</li></ul><h3 id="1-3-2-互联网的核心部分"><a href="#1-3-2-互联网的核心部分" class="headerlink" title="1.3.2 互联网的核心部分"></a>1.3.2 互联网的核心部分</h3><ul><li>在网络中心起特殊作用的是路由器，它是一种专用计算机（但不叫主机）</li><li>路由器是实现分组交换的关键构件，其任务是转发收到的分组，这是网络核心部分最重要的功能</li><li>互联网的核心部分是由许多网络和把它们互连起来的路由器组成，而主机处在互联网的边缘部分</li><li>互联网核心部分中的路由器之间一般是用高速链路连接，而在网络边缘的主机接入到核心部分则通常以相对较低速率的链路相连接</li><li>电路交换的特点<ul><li>N 部电话机两两直接相连，需 N(N – 1)/2 对电线。这种直接连接方法所需要的电线对的数量与电话机数量的平方（ N2 ）成正比。</li><li>当电话机的数量增多时，就要使用交换机来完成全网的交换任务。</li><li>电路交换 (circuit switching)：每一部电话都直接连接到交换机上，而交换机使用交换的方法，让电话用户彼此之间可以很方便地通信。<ul><li>交换：按照某种方式动态的分配传输线路的资源</li></ul></li><li>电路交换必定是面向连接的</li><li>电路交换的三个阶段：<ul><li>（1）建立连接：（占用通信资源）</li><li>（2）通信：（一直占用）</li><li>（3）释放连接：（归还通信资源）</li></ul></li><li>在通话的全部时间内，通话的两个用户始终占用端到端的通信资源（利用率低）</li><li>计算机数据具有突发性</li></ul></li></ul><h4 id="分组交换的主要特点："><a href="#分组交换的主要特点：" class="headerlink" title="分组交换的主要特点："></a>分组交换的主要特点：</h4><ul><li>分组交换网采用存储转发技术</li><li>分组交换是面向无连接的</li><li>Internet 网络层是分组交换</li><li>报文：要发送的整块数据</li><li>在发送端，先把较长的报文划分成较短的，固定长度的数据段</li><li>在每一个数据段前面添加上首部构成分组，分组又叫“包”，而分组的首部也可以称为“包头”</li><li>主机是为用户进行信息处理的；路由器则是用来转发分组的，即进行分组交换</li><li>分组是在互联网中传送的数据单元。依次把各分组发送到接收端</li><li>分组的首部包含了目的地址，源地址等重要控制信息。</li><li>分组交换网中的结点交换机根据收到的分组首部的地址信息，把分组转发到下一个结点交换机</li><li>每一个分组在互联网中独立地选择传输路径</li><li>接收端收到分组后剥去首部还原成报文</li><li>路由器处理分组的过程：<ul><li>（1）把收到的分组先放入缓存（暂时存储）</li><li>（2）查找转发表，找出到某个目的地址应从哪个端口转发</li><li>（3）把分组送到适当的端口转发出去</li></ul></li></ul><h5 id="优点："><a href="#优点：" class="headerlink" title="优点："></a>优点：</h5><div class="table-container"><table><thead><tr><th>优点</th><th>所采用的手段</th></tr></thead><tbody><tr><td>高效</td><td>在分组传输过程中动态分配传输带宽，对通信链路是逐段占用</td></tr><tr><td>灵活</td><td>为每一个分组独立地选择最合适的转发路由</td></tr><tr><td>迅速</td><td>以分组作为传送单位，可以不先建立连接就能向其他主机发送分组</td></tr><tr><td>可靠</td><td>保证可靠性的网络协议；分布式多路由的分组交换网，使网络有很好的生存性</td></tr></tbody></table></div><h5 id="分组交换带来的问题："><a href="#分组交换带来的问题：" class="headerlink" title="分组交换带来的问题："></a>分组交换带来的问题：</h5><ul><li>（1）分组在各结点存储转发时需要排队，这就会造成一定的时延。</li><li>（2）分组必须携带的首部（里面有必不可少的控制信息）也造成了一定的开销。</li></ul><h4 id="三种交换的比较："><a href="#三种交换的比较：" class="headerlink" title="三种交换的比较："></a>三种交换的比较：</h4><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/Aurorp1g/CDN/img/nFaTjU.png" alt="nFaTjU.png"></p><ul><li>电路交换：整个报文的比特流连续地从源点直达终点，好像在一个管道中传送（面向连接）</li><li>报文交换：整个报文先传送到相邻结点，全部存储下来后查询转发表，转发到下一个结点。（面向无连接）</li><li>分组交换：单个分组传送到相邻结点，存储下来后查找转发表，转发到下一个结点（面向无连接）</li></ul><h2 id="1-4-计算机网络在我国的发展"><a href="#1-4-计算机网络在我国的发展" class="headerlink" title="1.4 计算机网络在我国的发展"></a>1.4 计算机网络在我国的发展</h2><ul><li>规模最大的就是下面这五个：<ul><li>(1) 中国电信互联网 CHINANET（也就是原来的中国公用计算机互联网）</li><li>(2) 中国联通互联网 UNINET</li><li>(3) 中国移动互联网 CMNET</li><li>(4) 中国教育和科研计算机网 CERNET</li><li>(5) 中国科学技术网 CSTNET</li></ul></li></ul><h2 id="1-5-计算机网络的类别"><a href="#1-5-计算机网络的类别" class="headerlink" title="1.5 计算机网络的类别"></a>1.5 计算机网络的类别</h2><h3 id="1-5-1-计算机网络的定义"><a href="#1-5-1-计算机网络的定义" class="headerlink" title="1.5.1 计算机网络的定义"></a>1.5.1 计算机网络的定义</h3><ul><li>定义：计算机网络主要是由一些通用的、可编程的硬件互连而成的，而这些硬件并非专门用来实现某一特定目的（例如，传送数据或视频信号）。这些可编程的硬件能够用来传送多种不同类型的数据，并能支持广泛的和日益增长的应用。</li><li>根据定义：<ul><li>（1）计算机网络所连接的硬件，并不限于一般的计算机，而是包括了智能手机。</li><li>（2）计算机网络并非专门用来传送数据，而是能够支持很多种的应用（包括今后可能出现的各种应用）</li></ul></li><li>可编程的硬件表明这种硬件一定包含有中央处理机 CPU</li></ul><h3 id="1-5-2-计算机网络的类别"><a href="#1-5-2-计算机网络的类别" class="headerlink" title="1.5.2 计算机网络的类别"></a>1.5.2 计算机网络的类别</h3><h4 id="按照网络的作用范围进行分类："><a href="#按照网络的作用范围进行分类：" class="headerlink" title="按照网络的作用范围进行分类："></a>按照网络的作用范围进行分类：</h4><ul><li>（1）广域网 WAN</li><li>（2）城域网 MAN</li><li>（3）局域网 LAN</li><li><p>（4）个人区域网 PAN</p><ul><li>无线个人区域网 WPAN</li></ul></li><li><p>若中央处理机之间的距离非常近（如仅 1 米的数量级甚至更小些），则一般就称之为多处理机系统，而不称它为计算机网络。</p></li></ul><h4 id="按照网络使用者分类："><a href="#按照网络使用者分类：" class="headerlink" title="按照网络使用者分类："></a>按照网络使用者分类：</h4><ul><li>（1）公用网</li><li>（2）专用网</li></ul><h4 id="用来把用户接入到互联网的网络"><a href="#用来把用户接入到互联网的网络" class="headerlink" title="用来把用户接入到互联网的网络"></a>用来把用户接入到互联网的网络</h4><ul><li>接入网 AN，它又称为本地接入网或居民接入网</li><li>接入网是一类比较特殊计算机网络，用于讲用户接入互联网</li><li>接入网本身既不属于互联网的核心部分，也不属于互联网的边缘部分。</li><li>接入网是从某个用户端系统到互联网中的第一个路由器（也称为边缘路由器）之间的一种网络。</li></ul><h2 id="1-6-计算机网络的性能"><a href="#1-6-计算机网络的性能" class="headerlink" title="1.6 计算机网络的性能"></a>1.6 计算机网络的性能</h2><h3 id="1-6-1-计算机网络的性能指标"><a href="#1-6-1-计算机网络的性能指标" class="headerlink" title="1.6.1 计算机网络的性能指标"></a>1.6.1 计算机网络的性能指标</h3><ol><li><p><strong>速率</strong>：</p><ul><li>比特（bit）是计算机中数据量的单位，也是信息论中使用的信息量的单位。</li><li>速率是计算机网络中最重要的一个性能指标，指的是数据的传送速率，它也称为数据率 (data rate)或比特率 (bit rate)。</li><li>速率的单位是 bit/s，或 kbit/s、Mbit/s、Gbit/s 等。例如 4×10¹⁰ bit/s 的数据率就记为 40 Gbit/s。</li><li>速率往往是指额定速率或标称速率，非实际运行速率。</li></ul></li><li><p><strong>带宽</strong>：</p><ul><li>两种不同意义：<ul><li>（1）“带宽”(bandwidth) 本来是指信号具有的频带宽度，其单位是赫（或千赫、兆赫、吉赫等）。（频域）</li><li>（2）在计算机网络中，带宽用来表示网络中某通道传送数据的能力。表示在单位时间内网络中的某信道所能通过的“最高数据率”。单位是 bit/s ，即 “比特每秒”（时域）</li></ul></li></ul></li><li><p><strong>吞吐量</strong>：</p><ul><li>吞吐量 (throughput) 表示在单位时间内通过某个网络（或信道、接口）的数据量。</li><li>吞吐量更经常地用于对现实世界中的网络的一种测量，以便知道实际上到底有多少数据量能够通过网络。</li><li>吞吐量受网络的带宽或网络的额定速率的限制。</li></ul></li><li><p><strong>时延</strong>：</p><ul><li>时延是指数据（一个报文或分组，甚至比特）从网络（或链路）的一端传送到另一端所需的时间。</li><li>有时也称为延迟或迟延。</li><li>网络中的时延由以下几个不同的部分组成：<ul><li>(1) 发送时延（传输时延）：指主机或路由器发送数据帧所需要的时间<ul><li><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/Aurorp1g/CDN/img/nFdpjO.png" alt="nFdpjO.png"></li></ul></li><li>(2) 传播时延：是电磁波在信道中传播一定的距离需要花费的时间<ul><li><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/Aurorp1g/CDN/img/nFdCuD.png" alt="nFdCuD.png"></li></ul></li></ul></li><li>发送时延发送在机器内部的发送器中，与传输信道的长度无关，传播时延发生在机器外部的传输信道媒体上，与信号的发送速率无关。信号传送的距离越远，传播时延就越大</li><li>(3) 处理时延<ul><li>主机或路由器在收到分组时，为处理分组（例如分析首部、提取数据、差错检验或查找路由）所花费的时间。</li></ul></li><li>(4) 排队时延<ul><li>分组在路由器输入输出队列中排队等待处理所经历的时延。</li><li>排队时延的长短往往取决于网络中当时的通信量。</li></ul></li></ul><p>总时延 = 发送时延 + 传播时延 + 处理时延 + 排队时延</p><ul><li>对于高速网络链路，我们提高的仅仅是数据的发送速率而不是比特在链路上的传播速率。</li><li>提高链路带宽减小了数据的发送时延。</li></ul></li><li><p><strong>时延带宽积</strong>：</p><ul><li>链路的时延带宽积又称为以比特为单位的链路长度。<ul><li><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/img/net_work/nFweo9.png" alt="nFweo9.png" width="300" height="auto"></li></ul></li><li>只有在代表链路的管道都充满比特时，链路才得到了充分利用。</li></ul></li><li><p><strong>往返时间 RTT</strong>：</p><ul><li>互联网上的信息不仅仅单方向传输，而是双向交互的。因此，有时很需要知道双向交互一次所需的时间。</li><li>往返时间表示从发送方发送数据开始，到发送方收到来自接收方的确认，总共经历的时间。</li><li>在互联网中，往返时间还包括各中间结点的处理时延、排队时延以及转发数据时的发送时延。</li><li>发送时间 = 数据长度 / 发送速率</li><li>有效数据率 = 数据长度 /（发送时间 + RTT）</li></ul></li><li><p><strong>利用率</strong>：</p><ul><li>利用率分为信道利用率和网络利用率</li><li>信道利用率不是越高越好，根据排队论的理论，当某信道的利用率增大时，该信道引起的时延也就迅速增加。</li><li>若令 D₀ 表示网络空闲时的时延，D 表示网络当前的时延，则在适当的假定条件下，可以用下面的简单公式表示 D 和 D₀ 之间的关系：<ul><li><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/Aurorp1g/CDN/img/nFwJdH.png" alt="nFwJdH.png"></li></ul></li><li>信道或网络利用率过高会产生非常大的时延</li></ul></li></ol><h3 id="1-6-2-计算机网络的非性能指标"><a href="#1-6-2-计算机网络的非性能指标" class="headerlink" title="1.6.2 计算机网络的非性能指标"></a>1.6.2 计算机网络的非性能指标</h3><ol><li>费用</li><li>质量</li><li>标准化</li><li>可靠性</li><li>可扩展性和可升级性</li><li>易于管理和维护</li></ol><h2 id="1-7-计算机网络体系结构"><a href="#1-7-计算机网络体系结构" class="headerlink" title="1.7 计算机网络体系结构"></a>1.7 计算机网络体系结构</h2><h3 id="1-7-1-计算机网络体系结构的形成"><a href="#1-7-1-计算机网络体系结构的形成" class="headerlink" title="1.7.1 计算机网络体系结构的形成"></a>1.7.1 计算机网络体系结构的形成</h3><ul><li>计算机网络是个非常复杂的系统。</li><li>相互通信的两个计算机系统必须高度协调工作才行，而这种“协调”是相当复杂的。</li><li>“分层”可将庞大而复杂的问题，转化为若干较小的局部问题，而这些较小的局部问题就比较易于研究和处理。</li><li>1974 年，美国的 IBM 公司宣布了系统网络体系结构 SNA (System Network Architecture)。这个著名的网络标准就是按照分层的方法制定的。</li><li>由于网络体系结构的不同，不同公司的设备很难互相连通。</li><li>为了使不同体系结构的计算机网络都能互连，国际标准化组织 ISO 于 1977 年成立了专门机构研究该问题。他们提出了一个试图使各种计算机在世界范围内互连成网的标准框架，即著名的开放系统互连基本参考模型 OSI/RM (Open Systems Interconnection Reference Model)，简称为 OSI。</li><li>只要遵循 OSI 标准，一个系统就可以和位于世界上任何地方的、也遵循这同一标准的其他任何系统进行通信。</li><li>开放是指非独家垄断，系统是指在现实的系统中与互连有关的各部分</li><li>OSI 只获得了一些理论研究的成果，在市场化方面却失败了</li><li>法律上的国际标准 OSI 并没有得到市场的认可。非国际标准 TCP/IP 却获得了最广泛的应用。TCP/IP 常被称为事实上的国际标准。</li></ul><h3 id="1-7-2-协议与划分层次"><a href="#1-7-2-协议与划分层次" class="headerlink" title="1.7.2 协议与划分层次"></a>1.7.2 协议与划分层次</h3><ul><li>计算机网络中的数据交换必须遵守事先约定好的规则。这些规则明确规定了所交换的数据的格式以及有关的同步问题（同步含有时序的意思）。</li><li>网络协议 (network protocol)，简称为协议，是为进行网络中的数据交换而建立的规则、标准或约定。</li><li>协议主要由以下三个要素组成：<ul><li>（1）语法：数据与控制信息的结构或格式</li><li>（2）语义：需要发出何种控制信息，完成何种动作以及做出何种响应</li><li>（3）同步：事件实现顺序的详细说明</li></ul></li><li>协议的两种形式：<ul><li>（1）一种是使用便于人来阅读和理解的<strong>文字描述</strong>。</li><li>（2）另一种是使用让计算机能够理解的<strong>程序代码</strong>。<ul><li>这两种不同形式的协议都必须能够对网络上信息交换过程做出精确的解释。</li></ul></li></ul></li><li>分层的好处：<ul><li>（1）各层之间是独立的。</li><li>（2）灵活性好。</li><li>（3）结构上可分割开。</li><li>（4）易于实现和维护。</li><li>（5）能促进标准化工作</li></ul></li><li>缺点：<ul><li>（1）降低效率。</li><li>（2）有些功能会在不同的层次中重复出现，因而产生了额外开销。</li></ul></li><li>通常各层要完成的功能：<ul><li>（1）差错控制</li><li>（2）流量控制</li><li>（3）分段和重装</li><li>（4）复用和分用</li><li>（5）连接建立和释放</li></ul></li><li>计算机网络的体系结构 (architecture) 是计算机网络的各层及其协议的集合。</li><li>体系结构就是这个计算机网络及其部件所应完成的功能的精确定义。</li><li>实现 (implementation) 是遵循这种体系结构的前提下用何种硬件或软件完成这些功能的问题。</li><li>体系结构是抽象的，而实现则是具体的，是真正在运行的计算机硬件和软件。</li></ul><h3 id="1-7-3-具有五层协议的体系结构"><a href="#1-7-3-具有五层协议的体系结构" class="headerlink" title="1.7.3 具有五层协议的体系结构"></a>1.7.3 具有五层协议的体系结构</h3><ul><li><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/Aurorp1g/CDN/img/nFwNFA.png" alt="nFwNFA.png"></p><ol><li><p><strong>应用层</strong>：</p><ul><li>通过应用进程间的交互来完成特定网络应用</li><li>应用层协议定义的是应用程序间通信和交互的规则</li><li>例如：域名系统 DNS，支持万维网应用的 HTTP 协议，支持电子邮件的 SMTP 协议</li><li>我们把应用层交互的数据单元称为报文</li></ul></li><li><p><strong>运输层</strong>：</p><ul><li>负责向两台主机中进程之间的通信提供通用的数据传输服务</li><li>两种主要协议：<ul><li><strong>传输控制协议 TCP</strong>：面向连接，其数据传输的单位是报文段</li><li><strong>用户数据报协议 UDP</strong>：面向无连接，尽最大努力，数据传输的单位是用户数据报</li></ul></li></ul></li><li><p><strong>网络层</strong>：</p><ul><li>负责为分组交换网上的不同主机提供通信服务</li><li>在发送数据时，网络层把运输层产生的报文段或用户数据报封装成分组或包进行传输</li><li>在 TCP/IP 协议中，分组称为 IP 数据报</li><li>互联网是由大量异构网络通过路由器相互连接起来的。</li><li>互联网使用的网络层协议是无连接的网络协议 IP 和许多种路由选择协议</li></ul></li><li><p><strong>数据链路层</strong>：</p><ul><li>数据链路层将网络层交下来的 IP 数据报组装成帧，在两个相邻结点间的链路上传送帧。每一帧包括数据和必要的控制信息</li><li>控制信息可以使接受端能检测到所接收的帧有无差错，有则丢弃。</li></ul></li><li><p><strong>物理层</strong>：</p><ul><li>在物理层上所传输的数据的单位是比特。<ul><li><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/Aurorp1g/CDN/img/nFw0Qf.png" alt="nFw0Qf.png"></li></ul></li><li>PDU (Protocol Data Unit)：协议数据单元。<ul><li>OSI 参考模型把对等层次之间传送的数据单位称为该层的协议数据单元 PDU。</li></ul></li><li>任何两个同样的层次把数据（即数据单元加上控制信息）通过水平虚线直接传递给对方。这就是所谓的“对等层”之间的通信。</li><li>各层协议实际上就是在各个对等层之间传递数据时的各项规定。</li></ul></li></ol></li></ul><h3 id="1-7-4-实体，协议，服务和服务访问点"><a href="#1-7-4-实体，协议，服务和服务访问点" class="headerlink" title="1.7.4 实体，协议，服务和服务访问点"></a>1.7.4 实体，协议，服务和服务访问点</h3><ul><li><strong>实体</strong> (entity) 表示任何可发送或接收信息的硬件或软件进程。</li><li><strong>协议</strong> 是控制两个对等实体进行通信的规则的集合。</li><li>在协议的控制下，两个对等实体间的通信使得本层能够向上一层提供服务。</li><li>要实现本层协议，还需要使用下层所提供的服务。</li><li>协议的实现保证了能够向上一层提供服务。</li><li>本层的服务用户只能看见服务而无法看见下面的协议。即下面的协议对上面的服务用户是透明的。</li><li>协议是“水平的”，即协议是控制对等实体之间通信的规则。</li><li>服务是“垂直的”，即服务是由下层向上层通过层间接口提供的。</li><li>上层使用服务原语获得下层所提供的服务。</li><li>同一系统相邻两层的实体进行交互的地方，称为服务访问点 SAP (Service Access Point)。</li><li>服务访问点 SAP 是一个抽象的概念，它实际上就是一个逻辑接口。</li><li>OSI 把层与层之间交换的数据的单位称为服务数据单元 SDU (Service Data Unit)。</li><li>SDU 可以与 PDU 不一样，例如，可以是多个 SDU 合成为一个 PDU，也可以是一个 SDU 划分为几个 PDU。</li><li>协议必须把所有不利的条件事先都估计到，而不能假定一切都是正常的和非常理想的。</li><li>看一个计算机网络协议是否正确，不能光看在正常情况下是否正确，还必须非常仔细地检查这个协议能否应付各种异常情况。</li></ul><h3 id="1-7-5-TCP-IP-的体系结构"><a href="#1-7-5-TCP-IP-的体系结构" class="headerlink" title="1.7.5 TCP/IP 的体系结构"></a>1.7.5 TCP/IP 的体系结构</h3><ul><li><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/Aurorp1g/CDN/img/nFwfS0.png" alt="图像 1"></li><li>另一种表示方法：<ul><li><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/Aurorp1g/CDN/img/nFw4yT.png" alt="图像 2"></li></ul></li><li>还有一种表示方法：<ul><li><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/Aurorp1g/CDN/img/nFwTw4.png" alt="图像 3"></li></ul></li><li>TCP/IP 协议可以为各式各样的应用提供服务，允许 IP 协议在各式各样的网络构成的互联网上运行。</li></ul><h1 id="第二章-物理层"><a href="#第二章-物理层" class="headerlink" title="第二章 物理层"></a>第二章 物理层</h1><h2 id="2-1-物理层的基本概念"><a href="#2-1-物理层的基本概念" class="headerlink" title="2.1 物理层的基本概念"></a>2.1 物理层的基本概念</h2><ol><li>物理层考虑的是怎样才能在连接各种计算机的传输媒体上传输数据比特流，而不是指具体的传输媒体。</li><li>物理层的作用是要尽可能地屏蔽掉不同传输媒体和通信手段的差异。用于物理层的协议也常称为物理层规程 (procedure)。</li><li>物理层的主要任务描述为确定与传输媒体的接口有关的一些特性：<ul><li>（1）机械特性：指明接口所用接线器的形状和尺寸、引线数目和排列、固定和锁定装置等。</li><li>（2）电气特性：指明在接口电缆的各条线上出现的电压的范围。</li><li>（3）功能特性：指明某条线上出现的某一电平的电压表示何种意义。</li><li>（4）过程特性：指明对于不同功能的各种可能事件的出现顺序。</li></ul></li><li>数据在计算机内部多采用并行传输方式，但在通信线路的传输方式一般都是串行传输</li></ol><h2 id="2-2-数据通信的基础知识"><a href="#2-2-数据通信的基础知识" class="headerlink" title="2.2 数据通信的基础知识"></a>2.2 数据通信的基础知识</h2><h3 id="2-2-1-数据通信系统的模型"><a href="#2-2-1-数据通信系统的模型" class="headerlink" title="2.2.1 数据通信系统的模型"></a>2.2.1 数据通信系统的模型</h3><ol><li>一个数据通信系统可以分为三个部分：<ul><li>（1）源系统（发送端，发送方）</li><li>（2）传输系统（传输网络）</li><li>（3）目的系统（接收端，接受方）</li></ul></li><li>源系统包括：<ul><li>源点</li><li>发送器</li><li>接收器</li><li>终点</li></ul></li><li>常用术语：<ul><li>通信的目的是传送消息。</li><li>数据是运送消息的实体</li><li>信号则是数据的电气或电磁的表现<ul><li>模拟信号（连续信号）：消息的参数的取值是连续的</li><li>数字信号（离散信号）：消息的参数的取值是离散的</li></ul></li></ul></li></ol><h3 id="2-2-2-有关信道的几个基本概念"><a href="#2-2-2-有关信道的几个基本概念" class="headerlink" title="2.2.2 有关信道的几个基本概念"></a>2.2.2 有关信道的几个基本概念</h3><ol><li>信道：一般用来表示向某一个方向传送信息的媒体。<ul><li>单向通信（单工通信）：只能有一个方向的通信而没有反方向的交互</li><li>双向交替通信（半双工通信）：通信的双方都可以发送信息，当不能双方同时发送与接收</li><li>双向同时通信（全双工通信）：通信的双方可以同时发送和接收信息</li></ul></li><li>基带信号：来自信源的信号。、</li><li>调制：为了解决许多信道不能传输这种低频分量或直流分量<ul><li>基带调制：仅对基带信号的波形进行变换，使它能够与信道特性相适应。变换后的信号仍然是基带信号。把这种过程称为编码 (coding)。</li><li>带通调制：使用载波 (carrier)进行调制，把基带信号的频率范围搬移到较高的频段，并转换为模拟信号，这样就能够更好地在模拟信道中传输（即仅在一段频率范围内能够通过信道）</li><li>带通信号 ：经过载波调制后的信号。</li></ul></li><li><p>常用编码方式：</p><ul><li>（1）不归零制：正电平代表 1，负电平代表 0。</li><li>（2）归零制：正脉冲代表 1，负脉冲代表 0。</li><li>（3）曼彻斯特编码：位周期中心的向上跳变代表 0，位周期中心的向下跳变代表 1。但也可反过来定义。</li><li>（4）差分曼彻斯特编码：在每一位的中心处始终都有跳变。位开始边界有跳变代表 0，而位开始边界没有跳变代表 1。<ul><li><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/Aurorp1g/CDN/img/nFwbk9.png" alt="nFwbk9.png"></li></ul></li><li>从信号波形中可以看出，曼彻斯特 (Manchester) 编码和差分曼彻斯特编码产生的信号频率比不归零制高。</li><li>从自同步能力来看，不归零制不能从信号波形本身中提取信号时钟频率（这叫作没有自同步能力），而曼彻斯特编码和差分曼彻斯特编码具有自同步能力。</li></ul></li><li><p>基本的带通调制方法</p><ul><li>（1）基带信号往往包含有较多的低频成分，甚至有直流成分，而许多信道并不能传输这种低频分量或直流分量。为了解决这一问题，就必须对基带信号进行调制 (modulation)。</li><li>（2）最基本的二元制调制方法有以下几种：<ul><li>调幅 (AM)：载波的振幅随基带数字信号而变化。</li><li>调频 (FM)：载波的频率随基带数字信号而变化。</li><li>调相 (PM) ：载波的初始相位随基带数字信号而变化</li></ul></li><li>（3）正交振幅调制 QAM</li></ul></li></ol><h2 id="2-3-信道的极限容量"><a href="#2-3-信道的极限容量" class="headerlink" title="2.3 信道的极限容量"></a>2.3 信道的极限容量</h2><ol><li>码元传输的速率越高，或信号传输的距离越远，或传输媒体质量越差，信道的输出端的波形的失真就越严重。</li><li><p>限制码元在信道上的传输速率的因素：</p><ul><li>（1）信道能通过的频率范围：<ul><li>码间串扰，奈式准则</li><li>在任何信道种，码元传输的速率是有上限的，传输速率超过此上限，就会出现严重的码间串扰的问题，使接收端对码元的判决（识别）成为不可能</li></ul></li><li>（2）信噪比<ul><li>信噪比 = 信号的平均功率 / 噪声的平均功率</li><li>常记为 S/N，并用分贝 (dB) 作为度量单位。即：<ul><li>信噪比 (dB) = 10 log₁₀(S/N) (dB)</li><li>例如，当 S/N = 10 时，信噪比为 10 dB，而当 S/N = 1000 时，信噪比为 30 dB。</li></ul></li></ul></li></ul></li><li><p>1984 年，香农 (Shannon) 用信息论的理论推导出了带宽受限且有高斯白噪声干扰的信道的极限、无差错的信息传输速率（香农公式）。信道的极限信息传输速率 C 可表达为：</p><ul><li>C = W log₂(1 + S/N) (bit/s)<ul><li>其中： W 为信道的带宽（以 Hz 为单位）;<ul><li>S 为信道内所传信号的平均功率；</li><li>N 为信道内部的高斯噪声功率。</li></ul></li></ul></li><li>信道的带宽或信道中的信噪比越大，则信息的极限传输速率就越高。</li><li>只要信息传输速率低于信道的极限信息传输速率，就一定可以找到某种办法来实现无差错的传输。</li><li>若信道带宽 W 或信噪比 S/N 没有上限（当然实际信道不可能是这样的），则信道的极限信息传输速率 C 也就没有上限。</li><li>实际信道上能够达到的信息传输速率要比香农的极限传输速率低不少。</li></ul></li><li>对于频带宽度已确定的信道，如果信噪比不能再提高了，并且码元传输速率也达到了上限值，那么还有办法提高信息的传输速率。这就是：<ul><li>用编码的方法让每一个码元携带更多比特的信息量。</li></ul></li></ol><h2 id="2-3-物理层下面的传输媒体"><a href="#2-3-物理层下面的传输媒体" class="headerlink" title="2.3 物理层下面的传输媒体"></a>2.3 物理层下面的传输媒体</h2><ul><li>传输媒体也称为传输介质或传输媒介，它就是数据传输系统中在发送器和接收器之间的物理通路。</li><li>传输媒体可分为两大类，即导引型传输媒体和非导引型传输媒体。</li><li>在导引型传输媒体中，电磁波被导引沿着固体媒体（铜线或光纤）传播。</li><li>非导引型传输媒体就是指自由空间。在非导引型传输媒体中，电磁波的传输常称为无线传输。</li></ul><h3 id="2-3-1-导引型传输媒体"><a href="#2-3-1-导引型传输媒体" class="headerlink" title="2.3.1 导引型传输媒体"></a>2.3.1 导引型传输媒体</h3><ol><li><p>双绞线：</p><ul><li>最常用的传输媒体。</li><li>模拟传输和数字传输都可以使用双绞线，其通信距离一般为几到十几公里。</li><li>屏蔽双绞线 STP (Shielded Twisted Pair) 带金属屏蔽层</li><li>无屏蔽双绞线 UTP (Unshielded Twisted Pair)<ul><li>室内传送数据的无屏蔽双绞线和屏蔽双绞线的标准 EIA/TIA-568。</li><li>布线标准更新为 EIA/TIA-568-A。</li><li>此标准规定了 5 个种类的 UTP 标准（从 1 类线到 5 类线）。</li><li>对传送数据来说，现在最常用的 UTP 是 5 类线（Category 5 或 CAT5）。</li></ul></li></ul></li><li><p>同轴电缆：</p><ul><li>同轴电缆具有很好的抗干扰特性，被广泛用于传输较高速率的数据。</li><li>同轴电缆的带宽取决于电缆的质量。</li><li>50 Ω 同轴电缆 —— LAN / 数字传输常用</li><li>75 Ω 同轴电缆 —— 有线电视 / 模拟传输常用</li></ul></li><li><p>光缆：</p><ul><li>光纤是光纤通信的传输媒体。</li><li>由于可见光的频率非常高，约为 10⁸ MHz 的量级，因此一个光纤通信系统的传输带宽远远大于目前其他各种传输媒体的带宽。</li><li>多模光纤</li><li>单模光纤</li><li>光线通信的优点：<ul><li>(1) 通信容量非常大。</li><li>(2) 传输损耗小，中继距离长。</li><li>(2) 抗雷电和电磁干扰性能好。</li><li>(3) 无串音干扰，保密性好。</li><li>(4) 体积小，重量轻。</li></ul></li></ul></li></ol><h3 id="2-3-2-非引导型传输媒体"><a href="#2-3-2-非引导型传输媒体" class="headerlink" title="2.3.2 非引导型传输媒体"></a>2.3.2 非引导型传输媒体</h3><ul><li>将自由空间称为“非导引型传输媒体”。</li><li>无线传输所使用的频段很广。紫外线和更高的波段目前还不能用于通信</li><li><strong>短波通信</strong>（即高频通信）主要是靠电离层的反射，但短波信道的通信质量较差，传输速率低。</li><li><strong>微波</strong>在空间主要是直线传播。</li><li>传统微波通信有两种方式：<ul><li>地面微波接力通信</li><li>卫星通信 ：通信距离远，传播时延大</li></ul></li></ul><h2 id="2-4-信道复用技术"><a href="#2-4-信道复用技术" class="headerlink" title="2.4 信道复用技术"></a>2.4 信道复用技术</h2><h3 id="2-4-1-频分复用，时分复用和统计时分复用"><a href="#2-4-1-频分复用，时分复用和统计时分复用" class="headerlink" title="2.4.1 频分复用，时分复用和统计时分复用"></a>2.4.1 频分复用，时分复用和统计时分复用</h3><ul><li><strong>复用</strong> (multiplexing) 是通信技术中的基本概念。它允许用户使用一个共享信道进行通信，降低成本，提高利用率。</li><li><strong>频分复用</strong> FDM：<ul><li>频分复用的所有用户在同样的时间占用不同的带宽资源（请注意，这里的“带宽”是频率带宽而不是数据的发送速率）。</li></ul></li><li><strong>时分复用</strong>：<ul><li>时分复用则是将时间划分为一段段等长的时分复用帧（TDM 帧）。每一个时分复用的用户在每一个 TDM 帧中占用固定序号的时隙。</li><li>每一个用户所占用的时隙是周期性地出现（其周期就是 TDM 帧的长度）。</li><li>TDM 信号也称为等时 (isochronous) 信号。</li><li>时分复用的所有用户是在不同的时间占用同样的频带宽度。</li><li>使用时分复用系统传送计算机数据时，由于计算机数据的突发性质，用户对分配到的子信道的利用率一般是不高的。</li></ul></li><li>在进行通信时，复用器和分用器成对的使用</li><li><strong>统计时分复用</strong> STDM：（异步时分复用）<ul><li>STDM 帧不是固定分配时隙，而是按需动态地分配时隙。因此统计时分复用可以提高线路的利用率。</li></ul></li><li><strong>波分复用</strong> WDM：波分复用就是光的频分复用。使用一根光纤来同时传输多个光载波信号。</li><li><strong>码分复用</strong> CDM：<ul><li>常用的名词是码分多址 CDMA (Code Division Multiple Access)。</li><li>各用户使用经过特殊挑选的不同码型，因此彼此不会造成干扰。</li><li>这种系统发送的信号有很强的抗干扰能力，其频谱类似于白噪声，不易被敌人发现。</li><li>每一个比特时间划分为 m 个短的间隔，称为码片 (chip)。</li><li>每个站被指派一个唯一的 m bit 码片序列。<ul><li>如发送比特 1，则发送自己的 m bit 码片序列。</li><li>如发送比特 0，则发送该码片序列的二进制反码。</li></ul></li><li>例如，S 站的 8 bit 码片序列是 00011011。<ul><li>发送比特 1 时，就发送序列 00011011，</li><li>发送比特 0 时，就发送序列 11100100。</li></ul></li><li>S 站的码片序列：(-1 -1 -1 +1 +1 -1 +1 +1)</li><li>假定 S 站要发送信息的数据率为 b bit/s。由于每一个比特要转换成 m 个比特的码片，因此 S 站实际上发送的数据率提高到 mb bit/s，同时 S 站所占用的频带宽度也提高到原来数值的 m 倍。</li><li>这种通信方式是扩频 (spread spectrum) 通信中的一种。</li><li>扩频通信通常有两大类：<ul><li>一种是直接序列扩频 DSSS (Direct Sequence Spread Spectrum)，如上面讲的使用码片序列就是这一类。</li><li>另一种是跳频扩频 FHSS (Frequency Hopping Spread Spectrum)。</li></ul></li><li>每个站分配的码片序列不仅要各不相同，并且还必须互相正交 (orthogonal)。</li><li>在实用的系统中是使用伪随机码序列。</li><li>令向量 S 表示站 S 的码片向量，令 T 表示其他任何站的码片向量。</li><li>两个不同站的码片序列正交，就是向量 S 和 T 的规格化内积 (inner product) 等于 0：</li><li>任何一个码片向量和该码片向量自己的规格化内积都是 1。</li><li>一个码片向量和该码片反码的向量的规格化内积值是 –1。</li></ul></li></ul><h2 id="2-5-数字传输系统"><a href="#2-5-数字传输系统" class="headerlink" title="2.5 数字传输系统"></a>2.5 数字传输系统</h2><ul><li>与模拟通信相比，数字通信无论是在传输质量上还是经济上都有明显的优势</li><li>目前，长途干线大都采用 PCM 是数字传输方式</li><li>脉码调制 PCM 体制，最初是为了在电话局之间的中继线上传送多路的电话</li><li>由于历史原因 PCM 有两个不兼容的国际标准：T1，E1</li><li>当需要有更高的数据率时，可以采用复用的方法</li><li>旧的数字传输系统存在许多缺点:<ul><li>(1) 速率标准不统一</li><li>(2) 不是同步传输</li></ul></li><li>同步光纤网 SONET 的各级时钟都来自一个非常精确的主时钟</li><li>同步数字系列 SDH，适用于微波和卫星传输</li></ul><h2 id="2-6-宽带接入技术"><a href="#2-6-宽带接入技术" class="headerlink" title="2.6 宽带接入技术"></a>2.6 宽带接入技术</h2><ul><li>用户要接入互联网，必须先连接到某个 ISP</li><li>美国联邦通信委员会 FCC 认为只要双向速率之和超过 200 kbit/s 就是宽带</li><li>从宽带接入的媒体来看，可以划分为两大类：<ul><li>有线宽带接入</li><li>无线宽带接入</li></ul></li></ul><h3 id="2-6-1-ADSL-技术"><a href="#2-6-1-ADSL-技术" class="headerlink" title="2.6.1 ADSL 技术"></a>2.6.1 ADSL 技术</h3><ul><li>非对称数字用户线 ADSL：用数字技术对现有的模拟电话用户线进行改造</li><li>ADSL 技术就是把 0~4 kHz 低端频谱给传统电话使用，而把原来没有被利用的高端频谱留给用户上网使用</li><li>DSL 就是数字用户线</li><li>ADSL 的传输距离取决于数据率和用户线的途径</li><li>ADSL 所得到的最高数据传输速率与实际的用户线上的信噪比密切相关</li><li>ADSL 的特点：<ul><li>上行（用户到 ISP）和下行（ISP 到用户）带宽不对称</li><li>ADSL 在用户线的两端各安装一个 ADSL 调制解调器</li><li>我国目前采用的方案是离散多音调 DMT 调制技术<ul><li>多音调：指多载波 / 多子信道</li><li>DMT 技术：<ul><li>采用频分复用</li><li>相当于在一对用户线上使用许多小的调制解调器并行的传送数据。</li></ul></li></ul></li></ul></li><li>ADSL 的数据率：<ul><li>ADSL 采用自适应调制技术使用户线能够传送尽可能高的数据率</li><li>ADSL 不能保证固定的数据率</li></ul></li><li>第二代 ADSL：<ul><li>通过提高调制效率得到更高的数据率</li><li>采用无缝速率自适应技术</li></ul></li></ul><h3 id="2-6-2-光线同轴混合网"><a href="#2-6-2-光线同轴混合网" class="headerlink" title="2.6.2 光线同轴混合网"></a>2.6.2 光线同轴混合网</h3><ul><li>HFC 网是在目前覆盖面很广的有线电视网 CATV 基础上开发的一种居民宽带接入网</li><li>HFC 网对 CATV 网进行了改造</li><li>HFC 网将原 CATV 网中的同轴电缆主干部分该换为光纤，并使用模拟光纤技术</li><li>在模拟光纤中采用光的振幅 AM</li><li>模拟光纤从头端连接到光纤结点，即光分配结点 ODN</li><li>HFC 网采用结点体系</li><li>HFC 网具有双向传输功能，扩展了传输频带</li><li>用户接口盒 UIB 要提供三种连接：<ul><li>使用同轴电缆连接到机顶盒，然后再连接到用户的电视机</li><li>使用双绞线连接到用户的电话机</li><li>使用电缆调制解调器来连接到用户的计算机<ul><li>电缆调制解调器是为 HFC 网而使用的调制解调器</li></ul></li></ul></li></ul><h3 id="2-6-3-FTTx-技术"><a href="#2-6-3-FTTx-技术" class="headerlink" title="2.6.3 FTTx 技术"></a>2.6.3 FTTx 技术</h3><ul><li>FTTx 是一种实现宽带居民接入网的方案，代表多种宽带光纤接入方式</li></ul><h1 id="第三章-数据链路层"><a href="#第三章-数据链路层" class="headerlink" title="第三章 数据链路层"></a>第三章 数据链路层</h1><ul><li>数据链路层使用的信道主要有以下两种类型：<ul><li>点对点信道 ===》 一对一</li><li>广播信道 ===》 一对多，采用专用的共享信道协议</li></ul></li><li>路由器只包含网络层，链路层，物理层</li><li>不同链路层可能采用不同的数据链路层协议</li></ul><h2 id="3-1-使用点对点信道的数据链路层"><a href="#3-1-使用点对点信道的数据链路层" class="headerlink" title="3.1 使用点对点信道的数据链路层"></a>3.1 使用点对点信道的数据链路层</h2><h3 id="3-1-1-数据链路和帧"><a href="#3-1-1-数据链路和帧" class="headerlink" title="3.1.1 数据链路和帧"></a>3.1.1 数据链路和帧</h3><ul><li>链路（物理链路）：一条无源的点到点的物理线路段，中间没有任何其他的交换结点</li><li>一条链路只是一条通路的一个组成部分</li><li>数据链路（逻辑链路）：除了物理线路外，还必须有通信协议软件来控制这些数据的传输。若是把实现这些协议的硬件和软件加到链路上，就构成了数据链路。<ul><li>最常用的方法是使用网络适配器（即网卡）来实现这些协议的硬件和软件。</li><li>一般适配器都包括了数据链路层和物理层这两方面的功能</li></ul></li><li>早期的数据通信协议就做通信规程，在数据链路层中，规程和协议是同义语。</li><li>帧 - 数据链路层的协议数据单元</li><li>IP 数据报：网络层的协议数据单元</li><li>数据链路层不必考虑物理层如何实现比特传输的细节，只考虑数据的封装等</li></ul><h3 id="3-1-2-三个基本问题"><a href="#3-1-2-三个基本问题" class="headerlink" title="3.1.2 三个基本问题"></a>3.1.2 三个基本问题</h3><ol><li><p><strong>封装成帧</strong>：</p><ul><li>封装成帧就是在一段数据的前后分别添加首部和尾部；</li><li>首部和尾部的一个重要作用就是帧定界</li><li>每一种链路层协议都规定了所能传送的帧的数据部分长度上限 — 最大传送单元 MTU</li><li>当数据是由可打印的 ASCII 码组成的文本文件时，帧定界可以使用特殊的帧定界符。</li><li>控制字符 SOH (Start Of Header) 放在一帧的最前面，表示帧的首部开始。另一个控制字符 EOT (End Of Transmission) 表示帧的结束。</li></ul></li><li><p><strong>透明传输</strong>：</p><ul><li>如果数据中的某个字节的二进制代码恰好和 SOH 或 EOT 一样，数据链路层就会错误地“找到帧的边界”。</li><li>解决方法：字节填充 (byte stuffing) 或字符填充 (character stuffing)。</li><li>发送端的数据链路层在数据中出现控制字符“SOH”或“EOT”的前面插入一个转义字符“ESC” (其十六进制编码是 1B)。</li><li>接收端的数据链路层在将数据送往网络层之前删除插入的转义字符。</li><li>如果转义字符也出现在数据当中，那么应在转义字符前面插入一个转义字符 ESC。当接收端收到连续的两个转义字符时，就删除其中前面的一个。</li></ul></li><li><p><strong>差错检验</strong>：</p><ul><li>在传输过程中可能会产生比特差错：1 可能会变成 0 而 0 也可能变成 1。</li><li>在一段时间内，传输错误的比特占所传输比特总数的比率称为误码率 BER (Bit Error Rate)。</li><li>为了保证数据传输的可靠性，在计算机网络传输数据时，必须采用各种差错检测措施。</li><li>循环冗余检验：<ul><li>在发送端，先把数据划分为组。假定每组 k 个比特。</li><li>假设待传送的一组数据 M = 101001（现在 k = 6）。我们在 M 的后面再添加供差错检测用的 n 位冗余码一起发送。</li><li>冗余码的计算：<ul><li>用二进制的模 2 运算进行 2ⁿ 乘 M 的运算，这相当于在 M 后面添加 n 个 0。</li><li>得到的 (k + n) 位的数除以事先选定好的长度为 (n + 1) 位的除数 P，得出商是 Q 而余数是 R，余数 R 比除数 P 少 1 位，即 R 是 n 位。</li><li>将余数 R 作为冗余码拼接在数据 M 后面发送出去。发送的数据是：2ⁿ*M + R 即：101001001，共 (k + n) 位。</li></ul></li><li>在数据后面添加上的冗余码称为帧检验序列 FCS</li><li>CRC 是一种常用的检错方法，FCS 是添加在数据后面的冗余码</li><li>FCS 可以用 CRC 这种方法得出，但是 CRC 并非用来获得 FCS 的唯一方法</li><li>检验结果：<ul><li>若得出的余数 R = 0，则判定这个帧没有差错，就接受 (accept)。</li><li>若余数 R ≠ 0，则判定这个帧有差错，就丢弃。</li></ul></li><li>但这种检测方法并不能确定究竟是哪一个或哪几个比特出现了差错。</li><li>只要经过严格的挑选，并使用位数足够多的除数 P，那么出现检测不到的差错的概率就很小很小。</li></ul></li><li>注意：<ul><li>仅用循环冗余检验 CRC 差错检测技术只能做到无差错接受。</li><li>“无差错接受”是指：“凡是接受的帧（即不包括丢弃的帧），我们都能以非常接近于 1 的概率认为这些帧在传输过程中没有产生差错”。</li><li>也就是说：“凡是接收端数据链路层接受的帧都没有传输差错”（有差错的帧就丢弃而不接受）。</li><li>要做到“可靠传输”（即发送什么就收到什么）就必须再加上确认和重传机制。</li></ul></li><li>应当明确，“无比特差错”与“无传输差错”是不同的概念。</li><li>在数据链路层使用 CRC 检验，能够实现无比特差错的传输，但这还不是可靠传输。</li><li>本章介绍的数据链路层协议都不是可靠传输的协议。</li></ul></li></ol><h2 id="3-2-点对点协议-PPP"><a href="#3-2-点对点协议-PPP" class="headerlink" title="3.2 点对点协议 PPP"></a>3.2 点对点协议 PPP</h2><h3 id="3-2-1-PPP-协议的特点"><a href="#3-2-1-PPP-协议的特点" class="headerlink" title="3.2.1 PPP 协议的特点"></a>3.2.1 PPP 协议的特点</h3><ol><li><p>PPP 协议应满足的需求：</p><ul><li>（1）简单：首要需求，提高互操作性</li><li>（2）封装成帧：规定特殊的字符作为帧定界符</li><li>（3）透明性：必须保证数据传输的透明性</li><li>（4）多种网络层协议：在同一条物理链路上同时支持多种网络层协议</li><li>（5）多种类型链路：</li><li>（6）差错检验：检测并丢弃有差错的帧</li><li>（7）检测连接状态：</li><li>（8）最大传送单元：MTU 是数据链路层的帧可以载荷的数据部分的最大长度，而不是帧的总长度</li><li>（9）网络层地址协商：</li><li>（10）数据压缩协商：</li></ul></li><li><p>PPP 协议不需要的功能：</p><ul><li>（1）纠错：因为可靠传输由运输层的 TCP 协议负责</li><li>（2）流量控制</li><li>（3）序号</li><li>（4）多点线路：因为 PPP 只支持点对点的链路通信</li><li>（5）半双工或单双工：因为 PPP 只支持全双工链路</li></ul></li><li><p>PPP 协议的组成：</p><ul><li>（1）一个将 IP 数据报封装到串行链路的方法</li><li>（2）链路控制协议 LCP：用来建立，配置，和测试数据链路的连接</li><li>（3）网络控制协议 NCP：</li></ul></li></ol><h3 id="3-2-2-PPP-协议的帧格式"><a href="#3-2-2-PPP-协议的帧格式" class="headerlink" title="3.2.2 PPP 协议的帧格式"></a>3.2.2 PPP 协议的帧格式</h3><ol><li><p>各字段的意义：</p><ul><li>ppp 帧的首部和尾部分别为 4 个字段和 2 个字段</li><li>标志字段 F 规定为 0x7E（即 01111110），标志一个帧的开始和结束</li><li>地址字段 A 规定为 0xFF（即 11111111）</li><li>控制字段 C 规定为 0x03（即 00000011）</li><li>协议字段，两个字节</li></ul></li><li><p>字节填充</p><ul><li>PPP 是面向字节的，所有的 PPP 帧的长度都是整数字节</li><li>透明传输问题：<ul><li>PPP 用在同步传输链路时，协议规定采用硬件来完成比特填充</li><li>当 PPP 用在异步传输时，就使用一种特殊的字符填充法</li><li>把转义字符定义为 0x7D（即 011111101）</li><li>PPP 协议用在 SONET/SDH 链路时，使用同步传输，这时 PPP 协议采用零比特填充方法实现透明传输</li></ul></li></ul></li><li><p>零比特填充</p><ul><li>只要发现有 5 个连续的 1，则立即填入一个 0，因此经过这种填充后的数据不会出现六个连续的 1.（因为几个特殊字段内有 111111）</li></ul></li></ol><h3 id="3-2-3-PPP-协议的工作状态"><a href="#3-2-3-PPP-协议的工作状态" class="headerlink" title="3.2.3 PPP 协议的工作状态"></a>3.2.3 PPP 协议的工作状态</h3><ul><li>PPP 协议已不是纯粹的数据链路层的协议，它还包含了物理层和网络层的内容。</li><li>链路静止状态</li><li>链路建立状态</li><li>链路打开状态</li><li>链路终止状态</li></ul><h2 id="3-3-使用广播信道的数据链路层"><a href="#3-3-使用广播信道的数据链路层" class="headerlink" title="3.3 使用广播信道的数据链路层"></a>3.3 使用广播信道的数据链路层</h2><h3 id="3-3-1-局域网的数据链路层"><a href="#3-3-1-局域网的数据链路层" class="headerlink" title="3.3.1 局域网的数据链路层"></a>3.3.1 局域网的数据链路层</h3><ul><li>局域网最主要的特点是：<ul><li>网络为一个单位所拥有；</li><li>地理范围和站点数目均有限。</li></ul></li><li>局域网具有如下主要优点：<ul><li>具有广播功能，从一个站点可很方便地访问全网。局域网上的主机可共享连接在局域网上的各种硬件和软件资源。</li><li>便于系统的扩展和逐渐地演变，各设备的位置可灵活调整和改变。</li><li>提高了系统的可靠性、可用性和残存性。</li></ul></li><li>局域网按拓扑结构分类：<ul><li>星型网，集线器</li><li>总线网，匹配电阻</li><li>环形网，干线耦合器</li></ul></li><li>局域网中的主要传输媒体： 双绞线</li><li>当数据率很高时，往往需要使用光纤作为传输媒体</li><li><p>媒体共享技术：</p><ul><li>静态划分信道：频分复用，时分复用，波分复用，码分复用</li><li>动态媒体接入控制（多点接入）：<ul><li>随机接入：所有用户可随机地发送信息。但是同一时刻发送信息，会产生碰撞（冲突），故需要解决碰撞的网络协议。</li><li>受控接入：用户不能随机发送信息，必须服从一定控制：如多点线路探询，轮询。</li></ul></li></ul></li><li><p>以太网的两个标准：</p><ul><li>DIX Ethernet V2 是世界上第一个局域网产品（以太网）的规约。</li><li>IEEE 802.3 是第一个 IEEE 的以太网标准。</li><li>IEEE 802 委员会就将局域网的数据链路层拆成两个子层：<ul><li>逻辑链路控制 LLC (Logical Link Control) 子层；</li><li>媒体接入控制 MAC (Medium Access Control) 子层。</li></ul></li><li>与接入到传输媒体有关的内容都放在 MAC 子层，而 LLC 子层则与传输媒体无关。</li><li>不管采用何种协议的局域网，对 LLC 子层来说都是透明的</li></ul></li><li><p>适配器的作用：</p><ul><li>网络接口板又称为通信适配器 (adapter) 或网络接口卡 NIC (Network Interface Card)，或“网卡”。</li><li>适配器的重要功能：<ul><li>进行串行 / 并行转换。</li><li>对数据进行缓存。</li><li>在计算机的操作系统安装设备驱动程序。</li><li>实现以太网协议。</li></ul></li><li>适配器在接受和发送各种帧时，不适用计算机的 CPU。当收到有差错的帧时，直接丢弃而不必通知计算机。当收到正确的帧时，使用中断来通知计算机，并交付协议栈中的网络层 。当计算机要发送 IP 数据报时，，就由协议栈把 IP 数据报向下交给适配器，组装成帧后发送到局域网</li></ul></li></ul><h3 id="3-3-2-CSMA-CD-协议"><a href="#3-3-2-CSMA-CD-协议" class="headerlink" title="3.3.2 CSMA/CD 协议"></a>3.3.2 CSMA/CD 协议</h3><ul><li>总线的特点：当一台计算机发送数据时，总线上的所有的计算机都能检测到这个数据</li><li>为了在总线上实现一对一的通信，可以使适配器拥有一个独一无二的地址</li><li>为了通信简便，以太网采用：<ul><li>采用较为灵活的无连接的工作方式<ul><li>不必先建立连接就可以直接发送数据。</li><li>对发送的数据帧不进行编号，也不要求对方发回确认。</li><li>这样做的理由是局域网信道的质量很好，因信道质量产生差错的概率是很小的。</li><li>以太网提供的服务是不可靠的交付，即尽最大努力的交付。</li><li>当目的站收到有差错的数据帧时就丢弃此帧，其他什么也不做。差错的纠正由高层来决定。</li></ul></li><li>以太网发送的数据都使用曼切斯特编码：<ul><li>缺点：占用的频带宽度比原始的基带信号增加了一倍</li></ul></li><li>CSMA/CD 协议：<ul><li>CSMA/CD 含义：载波监听多点接入 / 碰撞检测 (Carrier Sense Multiple Access with Collision Detection) 。</li><li>“多点接入”表示许多计算机以多点接入的方式连接在一根总线上。</li><li>“载波监听”是指每一个站在发送数据之前先要检测一下总线上是否有其他计算机在发送数据，如果有，则暂时不要发送数据，以免发生碰撞。但是，由于电磁波在总线上的传播速率是有限的，当某个站监听到总线是空闲时，也可能总线并非真正是空闲的所以需要在发送期间进行碰撞检测，以检测冲突。</li><li>“碰撞检测”是指边发送边监听</li><li>总线上并没有什么“载波”。“载波监听”就是用电子技术检测总线上有没有其他计算机发送的数据信号</li><li>检测到碰撞后 ： 每一个正在发送数据的站，一旦发现总线上出现了碰撞，就要立即停止发送，免得继续浪费网络资源，然后等待一段随机时间后再次发送。</li><li>由于电磁波在总线上的传播速率是有限的，当某个站监听到总线是空闲时，也可能总线并非真正是空闲的所以需要在发送期间进行碰撞检测，以检测冲突。</li></ul></li></ul></li><li>在使用 CSMA/CD 协议时，一个站不可能同时进行发送和接收（但必须边发送边监听信道）</li><li>因此 CSMA/CD 协议不可能进行全双工通信只能进行双向交替通信（半双工通信）</li><li>每个站在发送数据之后的一小段时间内，存在着遭遇碰撞的可能性。</li><li>这种发送的不确定性使整个以太网的平均通信量远小于以太网的最高数据率。</li><li>最先发送数据帧的站，在发送数据帧后至多经过时间 2τ （两倍的端到端往返时延） 就可知道发送的数据帧是否遭受了碰撞。</li><li>以太网的端到端往返时延 2τ 称为争用期，或碰撞窗口。</li><li>经过争用期这段时间还没有检测到碰撞，才能肯定这次发送不会发生碰撞。</li><li>二进制指数型退避算法：<ul><li>发生碰撞的站在停止发送数据后，要推迟（退避）一个随机时间才能再发送数据。</li><li>基本退避时间取为争用期 2τ。</li><li>从整数集合 [0, 1, … , (2k-1)] 中随机地取出一个数，记为 r。重传所需的时延就是 r 倍的基本退避时间。</li><li>参数 k 按下面的公式计算：<ul><li>k = Min[重传次数, 10]</li></ul></li><li>当 k ≤ 10 时，参数 k 等于重传次数。</li><li>当重传达 16 次仍不能成功时即丢弃该帧，并向高层报告。</li><li>以太网在发送数据时，若前 64 字节没有发生冲突，则后续的数据就不会发生冲突。最短有效帧长为 64 字节</li></ul></li><li>强化碰撞：当发送数据的站一旦发现发生了碰撞时：<ul><li>立即停止发送数据；</li><li>再继续发送若干比特的人为干扰信号以便让所有用户都知道现在已经发生了碰撞。</li></ul></li><li>CSMA/CD 协议的要点：<ul><li>（1）准备发送</li><li>（2）检测信道</li><li>（3）检查碰撞</li></ul></li></ul><h3 id="3-3-3-使用集线器的星形拓扑"><a href="#3-3-3-使用集线器的星形拓扑" class="headerlink" title="3.3.3 使用集线器的星形拓扑"></a>3.3.3 使用集线器的星形拓扑</h3><ul><li>特点：<ul><li>（1）使用集线器的以太网在逻辑上仍是一个总线网，各站共享逻辑上的总线，各适配器使用的还是 CSMA/CD 协议，并且同一时刻只允许一个站发送数据</li><li>（2）一个集线器很像一个多接口的转发器</li><li>（3）集线器工作在物理层，它的每一个接口仅仅简单地转发比特，不进行碰撞检测</li><li>（4）采用专门的芯片</li></ul></li></ul><h3 id="3-3-4-以太网的信道利用率"><a href="#3-3-4-以太网的信道利用率" class="headerlink" title="3.3.4 以太网的信道利用率"></a>3.3.4 以太网的信道利用率</h3><ul><li>要提高以太网的信道利用率，就必须减少 τ 与 T0 之比，在以太网中定义了参数 a，它是以太网单程端到端时延 τ 与帧的发送时间 T0：<ul><li>a = τ / T0；</li></ul></li><li>α →0，表示一发生碰撞就立即可以检测出来，并立即停止发送，因而信道利用率很高。</li><li>α 越大，表明争用期所占的比例增大，每发生一次碰撞就浪费许多信道资源，使得信道利用率明显降低。</li><li>为提高利用率，以太网的参数 a 的值应当尽可能小些。</li><li>对以太网参数 α 的要求是：<ul><li>（1）当数据率一定时，以太网的连线的长度受到限制，否则 τ 的数值会太大。</li><li>（2）以太网的帧长不能太短，否则 T0 的值会太小，使 α 值太大。</li><li>（3）只有当参数 a 远小于 1 才能得到尽可能高的极限信道利用率。</li></ul></li><li>理想情况下的极限信道利用率 Smax 为：<ul><li>Smax = T0 / (T0 + τ ) = 1 / (1 + a )</li></ul></li></ul><h3 id="3-3-5-以太网的-MAC-的层"><a href="#3-3-5-以太网的-MAC-的层" class="headerlink" title="3.3.5 以太网的 MAC 的层"></a>3.3.5 以太网的 MAC 的层</h3><ol><li><p>MAC 层的硬件地址：</p><ul><li>在局域网中，硬件地址又称为物理地址，或 MAC 地址。</li><li>IEEE 802 标准为局域网规定了一种 48 位的全球地址，是指局域网上的每一台计算机中固化在适配器的 ROM 中的地址</li><li>IEEE 的 RA 是局域网全球地址的法定管理结构，它负责分配地址字段的 6 个字节的前三个字节。生产局域网适配器的厂家需要向 IEEE 购买由这三个字节构成的组织唯一标识符 OUI</li><li>厂家自行指派后三个字节，称为扩展标识符，用这种方法得到的 48 位地址称为 EUI-48</li><li>IEEE 规定地址字段的第一字节的最低位为 I/G 位：I/G 位为 0 时，地址段表示单个站地址；I/G 位为 1 时表示组地址，用来多播</li><li>IEEE 规定地址字段第一字节的最低第二位为 G/L 位：G/L 位为 0 时是全球管理，为 1 时是本地管理</li><li>适配器由过滤功能，从网络上每收到一个 MAC 帧就先用硬件检查 MAC 帧中的目的地址。</li><li>发往本站的帧：单播帧，广播帧，多播帧</li><li>所有的适配器都至少能够识别前两种帧，即能够识别单播地址和广播地址。</li><li>有的适配器可用编程方法识别多播地址。</li><li>只有目的地址才能使用广播地址和多播地址。</li><li>以混杂方式 (promiscuous mode) 工作的以太网适配器只要“听到”有帧在以太网上传输就都接收下来。</li></ul></li><li><p>MAC 帧的格式</p><ul><li>最常用的 MAC 帧是以太网 V2 格式</li><li>最后一字段是 4 字节的帧检验序列 FCS（使用 CRC 检验）</li><li>无效的 MAC 帧：<ul><li>长度不是整数个字节</li><li>收到的 FCS 帧检验序列查出错误</li><li>数据位置错误</li></ul></li></ul></li></ol><h2 id="3-4-扩展的以太网"><a href="#3-4-扩展的以太网" class="headerlink" title="3.4 扩展的以太网"></a>3.4 扩展的以太网</h2><h3 id="3-4-1-在物理层扩展以太网"><a href="#3-4-1-在物理层扩展以太网" class="headerlink" title="3.4.1 在物理层扩展以太网"></a>3.4.1 在物理层扩展以太网</h3><ol><li>使用光纤扩展</li><li>使用集线器扩展（碰撞域）<ul><li>优点<ul><li>（1）使原来属于不同碰撞域的以太网上的计算机能够进行跨碰撞域的通信。</li><li>（2）扩大了以太网覆盖的地理范围。</li></ul></li><li>缺点<ul><li>（1）碰撞域增大了，但总的吞吐量并未提高。</li><li>（2）如果不同的碰撞域使用不同的数据率，那么就不能用集线器将它们互连起来。</li></ul></li></ul></li></ol><h3 id="3-4-2-在数据链路层扩展以太网"><a href="#3-4-2-在数据链路层扩展以太网" class="headerlink" title="3.4.2 在数据链路层扩展以太网"></a>3.4.2 在数据链路层扩展以太网</h3><ul><li>早期使用网桥，现在使用以太网交换机</li></ul><ol><li><p>以太网交换机的特点</p><ul><li>实质上是一个多接口网桥</li><li>工作在全双工方式</li><li>相互通信的主机都是独占传输媒体，无碰撞地传输数据<ul><li>具有并行性，能使多对主机同时通信</li></ul></li><li>许多以太网交换机对收到的帧采用存储转发方式进行转发，但是也有一些交换机采用直通的交换方式</li></ul></li><li><p>以太网交换机的自学习功能</p><ul><li>即插即用，帧交换表</li></ul></li><li><p>从总线以太网到星形以太网</p><ul><li>仍然采用以太网的帧结构</li></ul></li></ol><h3 id="3-4-3-虚拟局域网"><a href="#3-4-3-虚拟局域网" class="headerlink" title="3.4.3 虚拟局域网"></a>3.4.3 虚拟局域网</h3><ul><li>虚拟局域网 VLAN 是由一些局域网网段构成的与物理位置无关的逻辑组，而这些网段具有某些共同的需求。每一个 VLAN 的帧都有一个明确的标识符，指明发送这个帧的计算机是属于哪一个 VLAN。</li><li>虚拟局域网其实只是局域网给的一种服务，而并不是一种新型局域网。</li></ul><h2 id="3-5-高速以太网"><a href="#3-5-高速以太网" class="headerlink" title="3.5 高速以太网"></a>3.5 高速以太网</h2><h3 id="3-5-1-100BASE-T-以太网"><a href="#3-5-1-100BASE-T-以太网" class="headerlink" title="3.5.1 100BASE-T 以太网"></a>3.5.1 100BASE-T 以太网</h3><ul><li>速率达到或超过 100Mbit/s 的以太网称为高速以太网</li><li>100BASE-T 以太网又叫快速以太网</li><li>可在全双工方式下工作而无冲突发生</li></ul><h3 id="3-5-2-吉比特以太网"><a href="#3-5-2-吉比特以太网" class="headerlink" title="3.5.2 吉比特以太网"></a>3.5.2 吉比特以太网</h3><ul><li>在半双工方式下使用 CSMA/CD 协议，全双工方式不使用 CSMA/CD 协议。</li><li>载波延伸</li><li>分组突发</li></ul><h3 id="3-5-3-10-吉比特以太网-10GE-和更快的以太网"><a href="#3-5-3-10-吉比特以太网-10GE-和更快的以太网" class="headerlink" title="3.5.3 10 吉比特以太网 (10GE) 和更快的以太网"></a>3.5.3 10 吉比特以太网 (10GE) 和更快的以太网</h3><ul><li>只工作在全双工方式</li></ul><h3 id="3-5-4-使用以太网进行宽带接入"><a href="#3-5-4-使用以太网进行宽带接入" class="headerlink" title="3.5.4 使用以太网进行宽带接入"></a>3.5.4 使用以太网进行宽带接入</h3><ul><li>可以提供双向的宽带通信。</li><li>可以根据用户对带宽的需求灵活地进行带宽升级。</li><li>可以实现端到端的以太网传输，中间不需要再进行帧格式的转换。这就提高了数据的传输效率且降低了传输的成本。</li><li>但是不支持用户身份鉴别。</li></ul><h1 id="第四章-网络层"><a href="#第四章-网络层" class="headerlink" title="第四章 网络层"></a>第四章 网络层</h1><h2 id="4-1-网络层提供的两种服务"><a href="#4-1-网络层提供的两种服务" class="headerlink" title="4.1 网络层提供的两种服务"></a>4.1 网络层提供的两种服务</h2><ul><li>面向连接还是无连接</li><li>互联网采用的设计思路是这样的：网络层向上只提供简单灵活的，无连接的，尽最大努力交付的数据报服务。</li><li>网络层不提供服务质量的承诺</li><li>通信之前先建立虚电路，以保证双方通信所需的一切网络资源。</li><li>虚电路表示这只是一条逻辑上的连接，分组都沿着这条逻辑连接按照存储转发方式传送</li></ul><h2 id="4-2-网际协议-IP"><a href="#4-2-网际协议-IP" class="headerlink" title="4.2 网际协议 IP"></a>4.2 网际协议 IP</h2><h3 id="4-2-1-虚拟互连网络"><a href="#4-2-1-虚拟互连网络" class="headerlink" title="4.2.1 虚拟互连网络"></a>4.2.1 虚拟互连网络</h3><ul><li>没有一种单一的网络能够适应所有用户的需求</li><li>将网络互相连接起来要使用一些中间设备：<ul><li>物理层中继系统：转发器 (repeater)。</li><li>数据链路层中继系统：网桥 或 桥接器 (bridge)。</li><li>网络层中继系统：路由器 (router)。</li><li>网桥和路由器的混合物：桥路器 (brouter)。</li><li>网络层以上的中继系统：网关 (gateway)。</li></ul></li><li>网络互连都是指用路由器进行网络互连和路由选择。</li><li>由于历史的原因，许多有关 TCP/IP 的文献将网络层使用的路由器称为网关。</li><li>所谓虚拟互连网络也就是逻辑互连网络，它的意思就是互连起来的各种物理网络的异构性本来是客观存在的，但是我们利用 IP 协议就可以使这些性能各异的网络从用户看起来好像是一个统一的网络。</li><li>使用 IP 协议的虚拟互连网络可简称为 IP 网。</li><li>使用虚拟互连网络的好处是：当互联网上的主机进行通信时，就好像在一个网络上通信一样，而看不见互连的各具体的网络异构细节。</li><li>如果在这种覆盖全球的 IP 网的上层使用 TCP 协议，那么就是现在的互联网 (Internet)。</li><li>互联网可以由多种异构网络互连组成</li></ul><h3 id="4-2-2-分类的-IP-地址"><a href="#4-2-2-分类的-IP-地址" class="headerlink" title="4.2.2 分类的 IP 地址"></a>4.2.2 分类的 IP 地址</h3><ol><li><p>IP 地址及其表示方法：</p><ul><li>整个互联网就是一个单一的，抽象的网络。IP 地址就是给互联网上的每一台主机（或路由器）的每一个接口分配一个全世界范围内是唯一的 32 位的标识符</li><li>IP 地址现在由互联网名字和数字分配机构 ICANN 进行分配</li><li>IP 地址的编制方法经过三个历史阶段：<ul><li>（1）分类的 IP 地址</li><li>（2）子网的划分</li><li>（3）构成超网</li></ul></li><li>分类的 IP 地址：就是将 IP 地址划分位若干个固定类。</li><li>A，B，C 类地址都是由两个固定长度的字段组成，其中第一个字段是网络号，是唯一的。第二个字段是主机号，在当前网络范围内是唯一的</li><li>由此可见，一个 IP 地址在整个互联网范围内是唯一的</li><li>A，B，C 类是单播地址，D 类地址用于多播，E 类地址保留</li><li>点分十进制记法</li></ul></li><li><p>常用的三种类别的 IP 地址</p><ul><li>A 类地址，网络号全 0 表示本网络，全 1 表示本地软件环回测试</li><li>A 类地址，主机号全 0 表示本主机连接的单个网络地址，全 1 表示该网络上所有的主机</li><li>一般不用的特殊的 IP</li><li>IP 地址的特点：<ul><li>（1）IP 是分等级的地址结构，IP 地址管理机构只分配网络号，主机号由得到网络号的单位自行分配，路由器仅根据目的主机网络号来转发分组，减小了路由表所占的存储空间以及查找路由表的时间</li><li>（2）IP 地址标志一台主机和一条链路的接口，当一台主机同时连接到两个网络上时，该主机就必须同时具有两个相应的 IP 地址，其网络号必须不同。这种主机也叫做多归属主机</li><li>（3）一个网络时指具有相同网络号 net-id 的主机的集合，故，用转发器或网桥连接起来的若干局域网仍是一个网络。具有不同网络号的局域网必须用路由器进行互连</li><li>（4）在 IP 地址中，所有分配到网络号的网络都是平等的</li></ul></li></ul></li></ol><h3 id="4-2-3-IP-地址与硬件地址"><a href="#4-2-3-IP-地址与硬件地址" class="headerlink" title="4.2.3 IP 地址与硬件地址"></a>4.2.3 IP 地址与硬件地址</h3><ul><li>区分 IP 地址与硬件地址：从层次上来看，物理地址是数据链路层和物理层使用的地址，而 IP 地址是网络层和以上各层使用的地址，是一种逻辑地址。</li><li>在发送数据时，数据从高层向下到低层，然后才到通信链路上传输。使用 IP 地址的 IP 数据报一旦交给了数据链路层，就被封装成 MAC 帧了。MAC 帧在传送时使用的源地址和目的地址都是硬件地址，这两个地址都写在 MAC 帧的头部。连接在通信链路上的设备在收到 MAC 帧时，根据 MAC 帧首部的硬件地址决定抛弃与否，只有在剥去 MAC 帧的首部和尾部后把 MAC 层的数据上交给网络层后，网络层才能在 IP 数据报的首部找到源 IP 地址和目的 IP 地址</li><li>注意：<ul><li>（1）在 IP 层抽象的互联网上只能看到 IP 数据报</li><li>（2）路由器只根据目的站的 IP 地址的网络号进行路由选择</li><li>（3）在局域网的链路层，只能看见 MAC 帧</li><li>（4）IP 层抽象的互联网频闭下层这些很复杂的细节。</li></ul></li></ul><h3 id="4-2-4-地址解析协议-ARP"><a href="#4-2-4-地址解析协议-ARP" class="headerlink" title="4.2.4 地址解析协议 ARP"></a>4.2.4 地址解析协议 ARP</h3><ul><li>ARP 常被划分为网络层的协议</li><li>ARP 协议的用途：为了从网络层使用的 IP 地址，解析出在数据链路层使用的硬件地址。</li><li>地址解析协议 ARP 解决这个问题的方法是在主机 ARP 高速缓存中存放一个从 IP 地址到硬件地址的映射表，并且这个映射表还经常动态更新</li><li>当主机 A 要向本局域网上的某台主机 B 发送 IP 数据报时，就先在其 ARP 高速缓存查看有无主机 B 的 IP 地址。如果有，查出硬件地址并写入 MAC 帧，如果没有，（1） ARP 在本局域网广播发送一个 ARP 请求分组（2）在本局域网的所有主机上运行的 ARP 进程都收到了请求分组（3）主机 B 的 IP 地址与请求分组中要查询的 IP 地址一致，收下这个请求分组，并向主机 A 发送 ARP 响应分组，同时在这个 ARP 响应分组中写入自己的硬件地址（4）主机 A 收到主机 B 的 ARP 分组后，就在其 ARP 高速缓存中写入主机 B 的 IP 地址到硬件地址的映射</li><li>每一个映射地址项目都设置生存时间</li><li>ARP 是解决同一个局域网上的主机或路由器的 IP 地址和硬件地址的映射问题</li><li>从 IP 地址到硬件地址的解析是自动进行的，主机的用户对这种地址解析过程是不知道的</li></ul><h3 id="4-2-5-IP-数据报的格式"><a href="#4-2-5-IP-数据报的格式" class="headerlink" title="4.2.5 IP 数据报的格式"></a>4.2.5 IP 数据报的格式</h3><ol><li><p>IP 数据报首部的固定部分中的各字段</p><ul><li>（1）版本</li><li>（2）首部长度</li><li>（3）区分服务</li><li>（4）总长度：指首部和数据之和的长度</li><li>（5）标识</li><li>（6）标志：占 3 位，最低位 MF；中间位 DF</li><li>（7）片偏移</li><li>（8）生存时间 TTL：跳数限制</li><li>（9）协议</li><li>（10）首部检验和：只检验数据报的首部，但不包括数据部分</li><li>（11）源地址</li><li>（12）目的地址</li></ul></li><li><p>IP 层转发分组的流程</p><ul><li>在互联网上转发分组时，是从一个路由器转发到下一个路由器</li><li>在路由表中，对每一条路由最主要的是以下两个信息：目的网络四肢，下一跳地址。</li><li>虽然互联网所有的分组转发都是基于目的主机所在的网络，但是存在着对特定的目的主机指明一个路由。这种路由叫做特定主机路由。</li><li>默认路由：减小路由表所占用的空间和搜索路由表所用的时间</li><li>分组转发算法：<ul><li>（1）从数据报首部提取目的主机 IP 地址 D，得到目的网络 N</li><li>（2）若 N 就是与此路由器直接相连的某个网络地址，则进行直接交付，否则执行（3）</li><li>（3）若路由表中有目的地址为 D 的特定主机路由，则把数据报传送给下一跳路由器，若无则（4）</li><li>（4）若路由器有到达网络 N 的路由，则把数据报传送给路由表中所指明的下一跳路由器，否则（5）</li><li>（5）若路由表中有一个默认路由，则把数据报传送给路由表中所指明的默认路由器，否者（6）</li><li>（6）报告转发分组失败</li></ul></li></ul></li></ol><h2 id="4-3-划分子网和构造超网"><a href="#4-3-划分子网和构造超网" class="headerlink" title="4.3 划分子网和构造超网"></a>4.3 划分子网和构造超网</h2><h3 id="4-3-1-划分子网"><a href="#4-3-1-划分子网" class="headerlink" title="4.3.1 划分子网"></a>4.3.1 划分子网</h3><ol><li><p>从两级 IP 地址到三级 IP 地址</p><ul><li>IP 地址设计不合理：<ul><li>（1）IP 地址空间的利用率有时很低</li><li>（2）给每个物理网络分配一个网络号会是路由表变得太大</li><li>（3）两级 IP 地址不够灵活</li></ul></li><li>为了解决上诉问题，IP 地址中又增加了“子网号字段”，使两级地址变成三级地址—-这种做法也叫划分子网或子网寻址或子网路由选择</li><li>划分子网的基本思路：<ul><li>（1）一个拥有许多物理网络的单位，可将所属的物理网络划分为若干各子网。划分子网纯属一个单位内部的事情。本网络以外的网络看不见这个网络是由多少各子网组成，因为其对外仍然表现为一个网络</li><li>（2）划分子网的方法是从网络的主机号借用若干位作为子网号，当然主机号也就减少了同样的位数，于是两级 IP 地址在本单位内就变成了三级 IP 地址，网络号，子网号和主机号</li><li>（3）凡是从其他网络发送来的 IP 数据报，仍是根据目的网络号找到路由器，此路由器收到 IP 数据报后，再按照目的网络号和子网号找到目的子网，把 IP 数据报交付目的主机</li></ul></li></ul></li><li><p>子网掩码</p><ul><li>从 IP 数据报的首部无法看出源主机或目的主机多连接的网络是否进行了子网的划分。因此使用子网掩码。</li><li>将子网掩码与收到的数据报的目的 IP 地址逐位相与，得到子网的网络地址</li><li>再路由器的路由表中也必须有子网掩码，如果一个网络不划分子网，那么该网络的子网掩码就使用默认子网掩码</li><li>子网掩码是一个网络或一个子网的重要属性</li><li>划分子网增加了灵活性，但却减少了能够连接在网络上的主机总机数</li><li>相同的 IP 地址和不同的子网掩码可以得到相同的网络地址</li></ul></li></ol><h3 id="4-3-2-使用子网时分组的转发"><a href="#4-3-2-使用子网时分组的转发" class="headerlink" title="4.3.2 使用子网时分组的转发"></a>4.3.2 使用子网时分组的转发</h3><ul><li>路由表中必须包含：目的网络四肢，子网掩码，下一跳地址</li><li>划分子网的情况下，路由器转发分组的算法:<ul><li>（1）从收到的 IP 数据报的首部提取目的 IP 地址 D</li><li>（2）先判断是否为直接交付，否则执行（3）</li><li>（3）若路由表中有目的地址为 D 的特定主机路由，则把数据报传送给路由器中所指明的下一跳路由器，否则执行（4）</li><li>（4）对路由表中的每一行，用其中的子网码和 D 逐位相“与”，其结果为 N。若 N 与该行的目的地址匹配，则把数据报传送给该行指明的下一跳路由器；否则执行（5）</li><li>（5）若路由器中有一个默认路由，则把数据报传送给路由表中所指明的默认路由器；否则执行（6）</li><li>（6）报告转发分组出错</li></ul></li></ul><h3 id="4-3-3-无分类编址-CIDR（构造超网）"><a href="#4-3-3-无分类编址-CIDR（构造超网）" class="headerlink" title="4.3.3 无分类编址 CIDR（构造超网）"></a>4.3.3 无分类编址 CIDR（构造超网）</h3><ol><li><p>网络前缀</p><ul><li>IPv4 地址空间不够，IPv6 出现</li><li>使用变长子网掩码 VLSM</li><li>无分类域间路由选择 CIDR：<ul><li>（1）消除了传统的 ABC 类地址以及划分子网的概念，更能有效的分配地址空间。CIDR 将地址空间分为前后两部分，前部分是网络前缀，用来指明网络，后面部分指明主机。CIDR 使用斜线记法，在 IP 地址后面加一斜线，后面写网络前缀所占的位数</li><li>（2）CIDR 把网络前缀都相同的连续的 IP 地址组成一个“CIDR 地址块”，CIDR 使用 32 为的地址掩码，例如：/20 地址块的地址掩码是：11111111 11111111 11110000 00000000（即斜线后的数字是地址掩码中 1 的个数）</li></ul></li><li>由于 CIDR 地址块中有很多地址，所以在路由表中就利用 CIDR 地址块来查找目的网络。这种地址的聚合常称为路由聚合。</li><li>除个别外，每一个 CIDR 地址块都包含了多个 C 类地址，这就是构成超网</li><li>网络前缀越短，其地址块中包含的地址数就越多</li></ul></li><li><p>最长前缀匹配</p><ul><li>在查找路由表时，应当从匹配结果中选择出具有最长网络前缀的路由。</li></ul></li><li><p>使用二叉线索查找路由表</p></li></ol><h2 id="4-4-网际控制报文协议-ICMP"><a href="#4-4-网际控制报文协议-ICMP" class="headerlink" title="4.4 网际控制报文协议 ICMP"></a>4.4 网际控制报文协议 ICMP</h2><h3 id="4-4-1-ICMP-报文的种类"><a href="#4-4-1-ICMP-报文的种类" class="headerlink" title="4.4.1 ICMP 报文的种类"></a>4.4.1 ICMP 报文的种类</h3><ul><li>为了更有效的转发 IP 数据报和提高交付成功的机会，在网际层使用了网际控制报文协议 ICMP</li><li>ICMP 允许主机或路由器报告差错情况和提供异常情况的报告</li></ul><h4 id="ICMP-报文的种类"><a href="#ICMP-报文的种类" class="headerlink" title="ICMP 报文的种类"></a>ICMP 报文的种类</h4><ul><li>ICMP 报文有两种，即 ICMP 差错报告报文，ICMP 询问报文</li></ul><h5 id="ICMP-差错报告报文的类型："><a href="#ICMP-差错报告报文的类型：" class="headerlink" title="ICMP 差错报告报文的类型："></a>ICMP 差错报告报文的类型：</h5><ul><li>（1）终点不可达</li><li>（2）时间超过</li><li>（3）参数问题</li><li>（4）改变路由（重定向）</li></ul><h5 id="ICMP-询问报文的类型："><a href="#ICMP-询问报文的类型：" class="headerlink" title="ICMP 询问报文的类型："></a>ICMP 询问报文的类型：</h5><ul><li>（1）回送请求和回答</li><li>（2）时间戳请求和回答</li></ul><h3 id="4-4-2-ICMP-的应用举例"><a href="#4-4-2-ICMP-的应用举例" class="headerlink" title="4.4.2 ICMP 的应用举例"></a>4.4.2 ICMP 的应用举例</h3><ul><li>ICMP 的一个重要应用就是分组间探测 PING，用来测试两台主机之间的连通性</li><li>ping 使用了 ICMP 回送请求与回送回答报文</li><li>traceroute/tracert</li></ul><h2 id="4-5-互联网的路由选择协议"><a href="#4-5-互联网的路由选择协议" class="headerlink" title="4.5 互联网的路由选择协议"></a>4.5 互联网的路由选择协议</h2><h3 id="4-5-1-有关路由选择协议的几个基本概念"><a href="#4-5-1-有关路由选择协议的几个基本概念" class="headerlink" title="4.5.1 有关路由选择协议的几个基本概念"></a>4.5.1 有关路由选择协议的几个基本概念</h3><ol><li><p>理想的路由算法</p><ul><li>（1）算法必须是正确的和完整的</li><li>（2）算法在计算上应简单</li><li>（3）算法应能适应通信量和网络拓扑的变化</li><li>（4）算法应具有稳定性</li><li>（5）算法应是公平的</li><li>（6）算法应是最佳的</li></ul></li><li><p>分层次的路由选择协议</p><ul><li>互联网采用的路由选择协议主要是自适应，分布式路由选择协议</li><li>自治系统 AS：在单一技术管理下的一组路由器，这些路由器使用一种自治系统内部的路由选择协议和共同的度量。</li><li>一个 AS 对外的其他 AS 表现出的是一个单一的和一致的路由选择策略</li><li>互联网把路由选择协议划分为两大类：<ul><li>内部网关协议 IGP（AS 内部）：包括 RIP，OSPF</li><li>外部网关协议 EGP（AS 之间）：例如：BGP</li></ul></li></ul></li></ol><h3 id="4-5-2-内部网关协议-RIP"><a href="#4-5-2-内部网关协议-RIP" class="headerlink" title="4.5.2 内部网关协议 RIP"></a>4.5.2 内部网关协议 RIP</h3><ol><li><p>工作原理：</p><ul><li>RIP 是一种分布式的基于距离向量的路由选择协议</li><li>RIP 协议要求网络中的每一个路由器都要维护从它自己到其他每一各目的网络的“距离记录”：<ul><li>从一路由器到直接连接的网络的距离定义为 1</li><li>从一路由器到非直接连接的网络的距离定义为所经过的路由器数加 1</li><li>RIP 协议的“距离”也称为“跳数”，只适用于小型的互联网</li></ul></li><li>RIP 协议的特点：<ul><li>（1）仅和相邻路由器交换信息</li><li>（2）路由器交换的信息是当前本路由器所知道的全部信息，即自己现在的路由表</li><li>（3）按固定的时间间隔交换路由信息</li></ul></li><li>路由器再刚刚开始工作时，它的路由表是空的，然后路由器就得出到直接相连的几个网络的距离。接着每一个路由器也只和数目非常有限的相邻路由器交换，并更新路由信息</li><li>“收敛”：在自治系统中所有的结点都得到正确的路由选择信息的过程</li><li>路由表更新的言责是找出到每一个目的网络的最短距离。这种更新算法又称为距离向量算法。</li></ul></li><li><p>距离向量算法</p><ul><li>路由器收到相邻路由器（其地址为 X）的一个 RIP 报文：<ul><li>（1）先修改此 RIP 报文中的所有项目：把“下一跳”字段中的地址都改为 X，并把所有的“距离”字段的值加 1。</li><li>（2）对修改后的 RIP 报文中的每一个项目，重复以下步骤：<ul><li>若项目中的目的网络不在路由表中，则把该项目加到路由表中。</li><li>否则<ul><li>若下一跳字段给出的路由器地址是同样的，则把收到的项目替换原路由表中的项目。</li><li>否则<ul><li>若收到项目中的距离小于路由表中的距离，则进行更新，</li></ul></li></ul></li><li>否则，什么也不做。</li></ul></li><li>（3）若 3 分钟还没有收到相邻路由器的更新路由表，则把此相邻路由器记为不可达路由器，即将距离置为 16（表示不可达）。</li><li>（4）返回。</li></ul></li><li>问题：当网络出现故障时，要经过比较长度的时间才能将此信息传送到所有的路由器</li><li>特点：好消息传播的快，坏消息传播的慢</li><li>优点：是实现简单，开销较小</li></ul></li><li><p>RIP 协议的报文格式</p><ul><li>RIP 协议使用运输层的用户数据报 UDP 进行传送</li><li>RIP 报文由首部和路由部分组成</li></ul></li></ol><h3 id="4-5-3-内部网关协议-OSPF"><a href="#4-5-3-内部网关协议-OSPF" class="headerlink" title="4.5.3 内部网关协议 OSPF"></a>4.5.3 内部网关协议 OSPF</h3><ol><li><p>OSPF 协议的基本特点：</p><ul><li>开放最短路径优先 OSPF：使用了 Dijkstra 提出的最短路径算法 SPF</li><li>OSPF 只是一个协议的名字，它并不表示其他的路由选择协议不是“最短路径优先”</li><li>OSPF 最主要的特征是使用分布式的链路状态协议<ul><li>（1）向本自治系统中所有路由器发送信息，洪泛法（RIP 只相自己相邻的路由器发送信息）</li><li>（2）发送的信息就是与本路由器相邻的所有路由器的链路状态（与哪些路由器相邻 + 度量）</li><li>（3）只有当链路状态发生变化时，路由器才向所有路由器用洪泛法发送此信息</li></ul></li><li>所有的路由器最终都能建立一个链路状态数据库，这个数据库实际上就是全网的拓扑结构图，这个拓扑结构图在全网范围内是一致的（链路状态数据库的同步）</li><li>OSPF 的更新过程收敛快—-优点</li><li>OSPF 将一个自治系统划分为若干个区域</li><li>主干区域，区域边界路由器（R3，R4，R7），主干路由器（R3，R4，R5，R6，R7），自治系统边界路由器（R6）</li><li>OSPF 不用 UDP 而是直接用 IP 数据报传送</li><li>OSPF 首部各字段意义：<ul><li>（1）版本</li><li>（2）类型</li><li>（3）分组长度</li><li>（4）路由器标识符</li><li>（5）区域标识符</li><li>（6）检验和</li><li>（7）鉴别类型</li><li>（8）鉴别</li></ul></li><li>OSPF 的特点：<ul><li>（1）OSPF 对于不同类型的业务看计算出不同的路由</li><li>（2）负载平衡</li><li>（3）鉴别</li><li>（4）OSPF 支持 CIDR</li><li>（5）OSPF 让每一个链路状态带上序号，序号越大，状态越新</li></ul></li></ul></li><li><p>OSPF 的五种分组类型</p><ul><li>（1）类型 1，问候 (Hello) 分组。</li><li>（2）类型 2，数据库描述 (Database Description) 分组。</li><li>（3）类型 3，链路状态请求 (Link State Request) 分组。</li><li>（4）类型 4，链路状态更新 (Link State Update) 分组，用洪泛法对全网更新链路状态。</li><li>（5）类型 5，链路状态确认 (Link State Acknowledgment) 分组。</li><li>OSPF 采用的是可靠的洪泛法（收到更新分组后要发送确认）</li><li>OSPF 每隔一段时间要刷新一次数据库中的链路状态</li></ul></li><li><p>OSPF 采用的是可靠的洪泛法（收到更新分组后要发送确认）</p><ul><li>OSPF 每隔一段时间要刷新一次数据库中的链路状态</li><li>OSPF 协议对多点接入的局域网采用了指定的路由器的方法</li></ul></li></ol><h3 id="4-5-4-外部网关协议-BGP"><a href="#4-5-4-外部网关协议-BGP" class="headerlink" title="4.5.4 外部网关协议 BGP"></a>4.5.4 外部网关协议 BGP</h3><ul><li>内部网关协议主要是设法使数据报在 AS 中尽可能有效地从源站传送到目的站</li><li>使用 BGP 的原因：<ul><li>（1）互联网的规模太大，使得自治系统 AS 之间路由选择非常困难</li><li>（2）自治系统 AS 之间的路由选择必须考虑有关策略</li></ul></li><li>边界网关协议 BGP 只能是力求寻找一条能够到达目的网络且比较好 的路由，而并非要寻找一条最佳路由</li><li>BGP 采用了路径向量路由选择协议</li><li>BGP 发言人与其他 AS 的 BGP 发言人要交换路由信息，就要先建立 TCP 连接，然后在此连接上交换 BGP 报文以建立 BGP 会话，利用 BGP 会话交换路由信息。</li><li>使用 TCP 连接交换路由信息的两个 BGP 发言人彼此成为对方发邻站或对等站</li><li>BGP 报文：OPEN，UPDATE，KEEPALIVE，NOTIFICATION</li></ul><h3 id="4-5-5-路由器的构成"><a href="#4-5-5-路由器的构成" class="headerlink" title="4.5.5 路由器的构成"></a>4.5.5 路由器的构成</h3><ol><li><p>路由器的结构</p><ul><li>路由器是一种具有多个输入端口和多个输出端口的专用计算机，其任务是转发分组，按照分组要去的目的地，从合适的端口转发给下一跳路由器。</li><li>路由器的转发分组正是网络层的主要工作</li><li>路由器结构划分为两大部分：<ul><li>（1）路由选择部分：控制部分，核心构件是路由选择处理机，任务：①根据路由选择协议构造路由表②不断更新和维护路由表</li><li>（2）分组转发部分：由三部分组成：交换结构，一组输入端口，一组输出端口，</li></ul></li><li>路由器的作用：连接不同的网络</li></ul></li><li><p>交换结构</p><ul><li>也叫（交换组织），作用：根据转发表对分组进行处理，从合适的端口转发出去。</li><li>路由表是根据路由选择算法得出，而转发表是从路由表得出的</li><li>输入端口中的查找和转发功能在路由器的交换功能中是最重要的。</li><li>路由器的端口收到分组时，就用中断方式通知路由选择处理机</li><li>路由器中的输入或输出队列产生溢出是造成分组丢失的重要原因。</li><li>通过存储器</li><li>通过总线</li><li>通过纵横交换结构</li></ul></li></ol><h2 id="4-6-IPv6"><a href="#4-6-IPv6" class="headerlink" title="4.6 IPv6"></a>4.6 IPv6</h2><ul><li>双栈协议：IPv4 向 IPv6 过渡</li><li>隧道技术</li></ul><h3 id="4-6-1-IPv6-的基本首部"><a href="#4-6-1-IPv6-的基本首部" class="headerlink" title="4.6.1 IPv6 的基本首部"></a>4.6.1 IPv6 的基本首部</h3><ul><li>变化：<ul><li>（1）更大的地址空间，128 位</li><li>（2）扩展的地址层次结构</li><li>（3）灵活的首部格式</li><li>（4）改进的选项</li><li>（5）允许协议继续扩充</li><li>（6）支持即插即用</li><li>（7）支持资源的预分配</li><li>（8）IPv6 首部改为 8 字节对齐</li></ul></li><li>IPv6 数据报由两大部分组成：基本首部和有效载荷（净负荷）</li><li>IPv6 把原来 IPv4 首部中选项的功能都放在扩展首部中，并将扩展首部留给路径两端的源站和目的站的主机来处理。</li><li>数据报途中经过的路由器都不处理这些扩展首部（只有一个首部例外，即逐跳选项扩展首部）。</li><li>这样就大大提高了路由器的处理效率。</li></ul><h3 id="4-6-2-IPv6-的地址"><a href="#4-6-2-IPv6-的地址" class="headerlink" title="4.6.2 IPv6 的地址"></a>4.6.2 IPv6 的地址</h3><ul><li>单播</li><li>多播</li><li>任播</li><li>IPv6 将实现 IPv6 的主机和路由器均称为结点。</li><li>一个结点就可能有多个与链路相连的接口。<ul><li>一个接口可以有多个单播地址。</li><li>其中的任何一个地址都可以作为到达该结点的目的地址。即一个结点接口的单播地址可用来唯一地标志该结点。</li></ul></li><li>为了使地址再稍简洁些，IPv6 使用冒号十六进制记法</li><li>冒号十六进制记法可以允许零压缩 (zero compression)，即一连串连续的零可以为一对冒号所取代。<ul><li>FF05:0:0:0:0:0:0:B3 可压缩为：</li><li>FF05::B3</li></ul></li><li>注意：在任一地址中只能使用一次零压缩。</li></ul><h2 id="4-7-多播"><a href="#4-7-多播" class="headerlink" title="4.7 多播"></a>4.7 多播</h2><h2 id="4-8-虚拟专用网和网络地址转换-NAT"><a href="#4-8-虚拟专用网和网络地址转换-NAT" class="headerlink" title="4.8 虚拟专用网和网络地址转换 NAT"></a>4.8 虚拟专用网和网络地址转换 NAT</h2><h2 id="4-9-多协议标记交换-MPLS"><a href="#4-9-多协议标记交换-MPLS" class="headerlink" title="4.9 多协议标记交换 MPLS"></a>4.9 多协议标记交换 MPLS</h2><h1 id="第五章-运输层"><a href="#第五章-运输层" class="headerlink" title="第五章 运输层"></a>第五章 运输层</h1><h2 id="5-1-运输层协议概述"><a href="#5-1-运输层协议概述" class="headerlink" title="5.1 运输层协议概述"></a>5.1 运输层协议概述</h2><h3 id="5-1-1-进程之间的通信"><a href="#5-1-1-进程之间的通信" class="headerlink" title="5.1.1 进程之间的通信"></a>5.1.1 进程之间的通信</h3><ul><li>运输层向它上面的应用层提供通信服务</li><li>它属于面向通信部分的最高层，同时也是用户功能的最低层</li><li>当网络的边缘部分中的两个主机使用网络的核心部分的功能进行端到端的通信时，只有位于网络边缘部分的主机的协议栈才有运输层，而网络核心部分中的路由器在转发分组时都只用到下三层的功能。</li><li>从 IP 层来说，通信的两端是两台主机，但是严格来说，真正进行通信的实体是在主机中的进程（运输层）</li><li>网络层是为主机之间提供逻辑通信，而运输层为应用进程之间提供端到端的逻辑通信</li><li>在一台主机中经常有多个应用进程同时分别和另一台主机中的多个应用进程通信。</li><li>这表明运输层有一个很重要的功能 —— 复用 (multiplexing) 和分用 (demultiplexing)。</li><li>根据应用程序的不同需求，运输层需要有两种不同的运输协议，即面向连接的 TCP 和无连接的 UDP。</li><li>运输层向高层用户屏蔽了下面网络核心的细节（如网络拓扑、所采用的路由选择协议等），它使应用进程看见的就是好像在两个运输层实体之间有一条端到端的逻辑通信信道。</li><li>当运输层采用面向连接的 TCP 协议时，尽管下面的网络是不可靠的（只提供尽最大努力服务），但这种逻辑通信信道就相当于一条全双工的可靠信道。</li><li>当运输层采用无连接的 UDP 协议时，这种逻辑通信信道是一条不可靠信道。</li></ul><h3 id="5-1-2-运输层的两个主要协议"><a href="#5-1-2-运输层的两个主要协议" class="headerlink" title="5.1.2 运输层的两个主要协议"></a>5.1.2 运输层的两个主要协议</h3><ul><li>TCP/IP 的运输层有两个主要协议：<ul><li>（1）用户数据报协议 UDP (User Datagram Protocol)</li><li>（2）传输控制协议 TCP (Transmission Control Protocol)</li></ul></li><li>两个对等运输实体在通信时传送的数据单位叫作运输协议数据单元 TPDU</li><li>TCP 传送的数据单位协议是 TCP 报文段</li><li>UDP 传送的数据单位协议是 UDP 报文或用户数据报。</li><li>UDP：传输前不需要建立连接，不可靠</li><li>TCP：传输数据前建立连接，传输后释放，其下网络是不可靠的，但是 TCP 提供可靠的面向连接的运输服务，TCP 不提供广播，多播服务</li></ul><h3 id="5-1-3-运输层的端口"><a href="#5-1-3-运输层的端口" class="headerlink" title="5.1.3 运输层的端口"></a>5.1.3 运输层的端口</h3><ul><li>复用：应用层所有的应用进程都可以通过运输层再传送到 IP 层</li><li>分用：运输层从 IP 层收到发送给个应用进程的数据后，必须分别交付指明的各应用进程</li><li>运行在计算机中的进程是用进程标识符来标志的。</li><li>但运行在应用层的各种应用进程却不应当让计算机操作系统指派它的进程标识符。这是因为在互联网上使用的计算机的操作系统种类很多，而不同的操作系统又使用不同格式的进程标识符。</li><li>为了使运行不同操作系统的计算机的应用进程能够互相通信，就必须用统一的方法对 TCP/IP 体系的应用进程进行标志。 即使用协议端口号</li><li>在协议栈层间的抽象的协议端口是软件端口。路由器或交换机上的端口是硬件端口。</li><li>端口号只具有本地意义，即端口号只是为了标志本计算机应用层中的各进程</li><li>由此可见，两个计算机中的进程要互相通信，不仅必须知道对方的 IP 地址（为了找到对方的计算机），而且还要知道对方的端口号（为了找到对方计算机中的应用进程）。</li></ul><h2 id="5-2-用户数据报协议-UDP"><a href="#5-2-用户数据报协议-UDP" class="headerlink" title="5.2 用户数据报协议 UDP"></a>5.2 用户数据报协议 UDP</h2><h3 id="5-2-1-UDP-概述"><a href="#5-2-1-UDP-概述" class="headerlink" title="5.2.1 UDP 概述"></a>5.2.1 UDP 概述</h3><ul><li>UDP 具有复用，分用，差错检验的功能</li><li>UDP 的特点：<ul><li>（1）UDP 是无连接的，发送数据之前不需要建立连接，因此减少了开销和发送数据之前的时延。</li><li>（2）UDP 使用尽最大努力交付，即不保证可靠交付，因此主机不需要维持复杂的连接状态表。</li><li>（3）UDP 是面向报文的。UDP 对应用层交下来的报文，既不合并，也不拆分，而是保留这些报文的边界。UDP 一次交付一个完整的报文。</li><li>（4）UDP 没有拥塞控制，因此网络出现的拥塞不会使源主机的发送速率降低。这对某些实时应用是很重要的。很适合多媒体通信的要求。 选择合适大小的报文</li><li>（5）UDP 支持一对一、一对多、多对一和多对多的交互通信</li><li>（6）UDP 的首部开销小，只有 8 个字节，比 TCP 的 20 个字节的首部要短。</li></ul></li></ul><h3 id="5-2-2-UDP-的首部格式"><a href="#5-2-2-UDP-的首部格式" class="headerlink" title="5.2.2 UDP 的首部格式"></a>5.2.2 UDP 的首部格式</h3><ul><li>首部字段很简单，只有 8 个字节（4 个字段，每个字段 2 个字节）：<ul><li>（1）源端口</li><li>（2）目的端口</li><li>（3）长度</li><li>（4）检验和</li></ul></li><li>计算检验和时，再 UDP 用户数据报之前增加 12 个字节的伪首部（仅用于计算检验和）</li><li>IP 数据报的检验和只检验 IP 数据报的首部，而 UDP 的检验和是把首部和数据部分一起都检验</li></ul><h2 id="5-3-传输控制协议-TCP-概述"><a href="#5-3-传输控制协议-TCP-概述" class="headerlink" title="5.3 传输控制协议 TCP 概述"></a>5.3 传输控制协议 TCP 概述</h2><h3 id="5-3-1-TCP-最主要的特点"><a href="#5-3-1-TCP-最主要的特点" class="headerlink" title="5.3.1 TCP 最主要的特点"></a>5.3.1 TCP 最主要的特点</h3><ul><li>（1）TCP 是面向连接的运输层协议。</li><li>（2）每一条 TCP 连接只能有两个端点，每一条 TCP 连接只能是点对点的（一对一）。</li><li>（3）TCP 提供可靠交付的服务。</li><li>（4）TCP 提供全双工通信。</li><li>（5）面向字节流</li></ul><h3 id="5-3-2-TCP-的连接"><a href="#5-3-2-TCP-的连接" class="headerlink" title="5.3.2 TCP 的连接"></a>5.3.2 TCP 的连接</h3><ul><li>TCP 把连接作为最基本的抽象。</li><li>每一条 TCP 连接有两个端点。</li><li>TCP 连接的端点不是主机，不是主机的 IP 地址，不是应用进程，也不是运输层的协议端口。</li><li>TCP 连接的端点叫做套接字 (socket) 或插口。</li><li>端口号拼接到 (contatenated with) IP 地址即构成了套接字。</li><li>套接字 socket = （IP 地址：端口）</li><li>每一条 TCP 连接唯一地被通信两端的两个端点（两个套接字）所确定。</li><li>TCP 连接 ::= {socket1, socket2} = {(IP1: port1)，(IP2: port2)}</li><li>TCP 连接的端点是个很抽象的套接字，即（IP 地址：端口）。</li><li>同一个 IP 地址可以有多个不同的 TCP 连接。</li><li>同一个端口号也可以出现在多个不同的 TCP 连接中。</li></ul><h2 id="可靠传输的工作原理"><a href="#可靠传输的工作原理" class="headerlink" title="可靠传输的工作原理"></a>可靠传输的工作原理</h2><ul><li>理想的传输条件有以下两个特点：<ul><li>（1）传输信道不产生差错。</li><li>（2）不管发送方以多快的速度发送数据，接收方总是来得及处理收到的数据。</li></ul></li><li>然而实际的网络都不具备以上两个理想条件。必须使用一些可靠传输协议，在不可靠的传输信道实现可靠传输。</li></ul><h3 id="5-4-1-停止等待协议"><a href="#5-4-1-停止等待协议" class="headerlink" title="5.4.1 停止等待协议"></a>5.4.1 停止等待协议</h3><ul><li>停止等待：每发送完一个分组就通知发送，等待对方的确认。在收到确认后再发送下一个分组</li><li>无差错情况</li><li>出现差错<ul><li>在接收方 B 会出现两种情况：<ul><li>B 接收 M1 时检测出了差错，就丢弃 M1，其他什么也不做（不通知 A 收到有差错的分组）。</li><li>M1 在传输过程中丢失了，这时 B 当然什么都不知道，也什么都不做。</li></ul></li><li>在这两种情况下，B 都不会发送任何信息。</li><li>如何保证 B 正确收到了 M1 呢？</li><li>解决方法：超时重传<ul><li>A 为每一个已发送的分组都设置了一个超时计时器。</li><li>A 只要在超时计时器到期之前收到了相应的确认，就撤销该超时计时器，继续发送下一个分组 M2 。</li></ul></li><li>A 需要暂时保留已发送的分组的副本，且必须有编号，并且超时计时器设置的重传时间应当比数据在分组传输的平均往返时间更长</li></ul></li></ul><h3 id="5-4-2-连续-ARQ-协议"><a href="#5-4-2-连续-ARQ-协议" class="headerlink" title="5.4.2 连续 ARQ 协议"></a>5.4.2 连续 ARQ 协议</h3><ul><li>滑动窗口协议比较复杂，是 TCP 协议的精髓所在。</li><li>发送方维持的发送窗口，它的意义是：位于发送窗口内的分组都可连续发送出去，而不需要等待对方的确认。这样，信道利用率就提高了。</li><li>连续 ARQ 协议规定，发送方每收到一个确认，就把发送窗口向前滑动一个分组的位置。</li><li>接收方一般采用累积确认的方式。即不必对收到的分组逐个发送确认，而是对按序到达的最后一个分组发送确认，这样就表示：到这个分组为止的所有分组都已正确收到了。</li><li>优点：容易实现，即使确认丢失也不必重传。</li><li>缺点：不能向发送方反映出接收方已经正确收到的所有分组的信息。</li><li>如果发送方发送了前 5 个分组，而中间的第 3 个分组丢失了。这时接收方只能对前两个分组发出确认。发送方无法知道后面三个分组的下落，而只好把后面的三个分组都再重传一次。这就叫做 Go-back-N （回退 N），表示需要再退回来重传已发送过的 N 个分组。</li></ul><h2 id="5-5-TCP-报文段的首部格式"><a href="#5-5-TCP-报文段的首部格式" class="headerlink" title="5.5 TCP 报文段的首部格式"></a>5.5 TCP 报文段的首部格式</h2><ul><li>TCP 虽然是面向字节流的，但 TCP 传送的数据单元却是报文段。</li><li>一个 TCP 报文段分为首部和数据两部分，而 TCP 的全部功能都体现在它首部中各字段的作用。</li><li>TCP 报文段首部的前 20 个字节是固定的，后面有 4n 字节是根据需要而增加的选项 (n 是整数)。因此 TCP 首部的最小长度是 20 字节。</li><li>首部固定部分各字段的意义：<ul><li>（1）源端口和目的端口</li><li>（2）序号：报文段序号，每一个字节按顺序编号</li><li>（3）确认号：期望收到对方下一个报文段的第一个数据字节的序号</li><li>（4）数据偏移：</li><li>（5）保留：</li><li>（6）紧急 URG：为 1 时，表示紧急</li><li>（7）确认 ACK：为 1 确认号字段有效</li><li>（8）推送 PSH：</li><li>（9）复位 RST</li><li>（10）同步 SYN</li><li>（11）终止 FIN</li><li>（12）窗口：窗口值作为接收方让发送方设置器发送窗口的依据</li><li>（13）检验和</li><li>（14）紧急指针</li><li>（15）选项：<ul><li>①最大报文段长度 MSS，每一个 TCP 报文段中的数据字段的最大长度</li><li>②窗口扩大选项③时间戳选项④选择确认选项</li></ul></li></ul></li></ul><h2 id="5-6-TCP-可靠传输的实现"><a href="#5-6-TCP-可靠传输的实现" class="headerlink" title="5.6 TCP 可靠传输的实现"></a>5.6 TCP 可靠传输的实现</h2><h3 id="5-6-1-TCP-以字节为单位的滑动窗口"><a href="#5-6-1-TCP-以字节为单位的滑动窗口" class="headerlink" title="5.6.1 TCP 以字节为单位的滑动窗口"></a>5.6.1 TCP 以字节为单位的滑动窗口</h3><ul><li>根据 B 给出的窗口值，A 构造出自己的发送窗口。</li><li>发送窗口表示：在没有收到 B 的确认的情况下，A 可以连续把窗口内的数据都发送出去。</li><li>发送窗口里面的序号表示允许发送的序号。</li><li>显然，窗口越大，发送方就可以在收到对方确认之前连续发送更多的数据，因而可能获得更高的传输效率。</li><li>描述发送窗口的状态：需要三个指针，p1，p2，p3，指针都指向序号</li><li>收到确认后，发送窗口向前滑动</li><li>A 的发送窗口内的序号都已用完，但还没有再收到确认，必须停止发送。</li><li>发送窗口中的序号全是发送未确认的或未发送的</li><li>发送窗口只是发送缓存中的一部分</li><li>发送缓存用来暂时存放：<ul><li>发送应用程序传送给发送方 TCP 准备发送的数据；</li><li>TCP 已发送出但尚未收到确认的数据。</li></ul></li><li>接收缓存用来暂时存放：<ul><li>按序到达的、但尚未被接收应用程序读取的数据；</li><li>不按序到达的数据。</li></ul></li><li>注意：<ul><li>（1）第一，A 的发送窗口并不总是和 B 的接收窗口一样大（因为有一定的时间滞后）。</li><li>（2）第二，TCP 标准没有规定对不按序到达的数据应如何处理。通常是先临时存放在接收窗口中，等到字节流中所缺少的字节收到后，再按序交付上层的应用进程。</li><li>（3）第三，TCP 要求接收方必须有累积确认的功能，这样可以减小传输开销。</li></ul></li><li>TCP 是全双工通信，每一方都有自己的发送窗口和接受窗口</li></ul><h3 id="5-6-2-超时重传时间的选择"><a href="#5-6-2-超时重传时间的选择" class="headerlink" title="5.6.2 超时重传时间的选择"></a>5.6.2 超时重传时间的选择</h3><ul><li>超时重传机制是 TCP 中最重要和最复杂的问题之一。TCP 每发送一个报文段，就对这个报文段设置一次计时器。只要计时器设置的重传时间到但还没有收到确认，就要重传这一报文段。重传时间的选择是 TCP 最复杂的问题之一。</li><li>TCP 采用了一种自适应算法，它记录一个报文段发出的时间，以及收到相应的确认的时间。这两个时间之差就是报文段的往返时间 RTT。</li><li>TCP 保留了 RTT 的一个加权平均往返时间 RTTS（这又称为平滑的往返时间）。</li><li>第一次测量到 RTT 样本时，RTTS 值就取为所测量到的 RTT 样本值。以后每测量到一个新的 RTT 样本，就按下式重新计算一次 RTTS：</li><li>超时重传时间 RTO (Retransmission Time-Out) 应略大于上面得出的加权平均往返时间 RTTS。RFC 2988 建议使用下式计算 RTO：</li><li>RTTD 是 RTT 的偏差的加权平均值。</li><li>RFC 2988 建议这样计算 RTTD。第一次测量时，RTTD 值取为测量到的 RTT 样本值的一半。在以后的测量中，则使用下式计算加权平均的 RTTD：<ul><li>β 是个小于 1 的系数，其推荐值是 1/4，即 0.25。</li></ul></li><li>Karn 算法：在计算平均往返时间 RTT 时，只要报文段重传了，就不采用其往返时间样本，但是这又引起新的问题。当报文段的时延突然增大了很多时，在原来得出的重传时间内，不会收到确认报文段。于是就重传报文段。但根据 Karn 算法，不考虑重传的报文段的往返时间样本。这样，超时重传时间就无法更新报文段</li><li>修正后的 Karn 算法：报文段每重传一次，就把超时重传的时间 RTO 增大一点。典型的做法是取新的重传时间为原来的重传时间的 2 倍，当不再发生报文段的重传时，才根据报文段的往返时延更新平均往返时延 RTT 和超时重传时间 RTO 的数值。</li></ul><h3 id="5-6-3-选择确认-SACK"><a href="#5-6-3-选择确认-SACK" class="headerlink" title="5.6.3 选择确认 SACK"></a>5.6.3 选择确认 SACK</h3><ul><li>接收方收到了和前面的字节流不连续的两个字节块。如果这些字节的序号都在接收窗口之内，那么接收方就先收下这些数据，但要把这些信息准确地告诉发送方，使发送方不要再重复发送这些已收到的数据。</li></ul><h2 id="5-7-TCP-流量控制"><a href="#5-7-TCP-流量控制" class="headerlink" title="5.7 TCP 流量控制"></a>5.7 TCP 流量控制</h2><h3 id="5-7-1-利用滑动窗口实现流量控制"><a href="#5-7-1-利用滑动窗口实现流量控制" class="headerlink" title="5.7.1 利用滑动窗口实现流量控制"></a>5.7.1 利用滑动窗口实现流量控制</h3><ul><li>流量控制：让发送方的发送速率不要太快，要让接收方来得及接收</li><li>可能出现死锁：B 向 A 发送了零窗口的报文段后不久，B 的接收缓存又有了一些存储空间。于是 B 向 A 发送了 rwnd = 400 的报文段。但这个报文段在传送过程中丢失了。A 一直等待收到 B 发送的非零窗口的通知，而 B 也一直等待 A 发送的数据。如果没有其他措施，这种互相等待的死锁局面将一直延续下去。</li><li>为了解决这个问题，TCP 为每一个连接设有一个持续计时器 (persistence timer)。只要 TCP 连接的一方收到对方的零窗口通知，就启动该持续计时器。若持续计时器设置的时间到期，就发送一个零窗口探测报文段（仅携带 1 字节的数据），而对方就在确认这个探测报文段时给出了现在的窗口值。<ul><li>若窗口仍然是零，则收到这个报文段的一方就重新设置持续计时器。</li><li>若窗口不是零，则死锁的僵局就可以打破了。</li></ul></li></ul><h3 id="5-7-2-TCP-的传输效率"><a href="#5-7-2-TCP-的传输效率" class="headerlink" title="5.7.2 TCP 的传输效率"></a>5.7.2 TCP 的传输效率</h3><ul><li>控制 TCP 报文段的发送时机:<ul><li>（1）第一种机制是 TCP 维持一个变量，它等于最大报文段长度 MSS。只要缓存中存放的数据达到 MSS 字节时，就组装成一个 TCP 报文段发送出去。</li><li>（2）第二种机制是由发送方的应用进程指明要求发送报文段，即 TCP 支持的推送 (push) 操作。</li><li>（3）第三种机制是发送方的一个计时器期限到了，这时就把当前已有的缓存数据装入报文段（但长度不能超过 MSS）发送出去。</li></ul></li><li>Nagle 算法：<ul><li>若发送应用进程把要发送的数据逐个字节地送到 TCP 的发送缓存，则发送方就把第一个数据字节先发送出去，把后面到达的数据字节都缓存起来。</li><li>当发送方收到对第一个数据字符的确认后，再把发送缓存中的所有数据组装成一个报文段发送出去，同时继续对随后到达的数据进行缓存。</li><li>只有在收到对前一个报文段的确认后才继续发送下一个报文段。</li><li>当到达的数据已达到发送窗口大小的一半或已达到报文段的最大长度时，就立即发送一个报文段。</li></ul></li><li>糊涂窗口综合征：接收方缓存已满，应用程序一次只读取一个，导致发送方每次只发送一个字节数据，效率降低<ul><li>解决方法：让接收方等待一段时间，使得接收缓存已有足够空间容纳一个最长的报文段，或等待接收缓存已有一半空闲空间，只要出现这两种情况之一，接收方就发出确认报文，并向发送方通知当前的窗口大小</li></ul></li></ul><h2 id="5-8-TCP-的拥塞控制"><a href="#5-8-TCP-的拥塞控制" class="headerlink" title="5.8 TCP 的拥塞控制"></a>5.8 TCP 的拥塞控制</h2><h3 id="5-8-1-拥塞控制的一般原理"><a href="#5-8-1-拥塞控制的一般原理" class="headerlink" title="5.8.1 拥塞控制的一般原理"></a>5.8.1 拥塞控制的一般原理</h3><ul><li>拥塞：在某段时间，若对网络中某一资源的需求超过了该资源所提供的可用部分，网络性能变坏的情况</li><li>问题的实质是整个系统的各个部分（速率，缓存大小等）不匹配</li><li>拥塞控制：防止过多的数据注入到网络中，这样可以使网络中的路由器或链路不致过载</li><li>拥塞控制的前提：网络能够承受现有的网络负荷，这是一个全局性的过程</li><li>区分流量控制和拥塞控制：流量控制往往是指点对点通信量的控制，是端到端的问题</li><li>实践证明，拥塞控制是很难设计的，因为它是一个动态的（而不是静态的）问题。</li><li>当前网络正朝着高速化的方向发展，这很容易出现缓存不够大而造成分组的丢失。但分组的丢失是网络发生拥塞的征兆而不是原因。</li><li>在许多情况下，甚至正是拥塞控制本身成为引起网络性能恶化甚至发生死锁的原因。这点应特别引起重视。</li><li>分类：<ul><li>开环控制方法就是在设计网络时事先将有关发生拥塞的因素考虑周到，力求网络在工作时不产生拥塞。</li><li>闭环控制方法是基于反馈环路的概念。属于闭环控制的有以下几种措施：<ul><li>（1）监测网络系统以便检测到拥塞在何时、何处发生。</li><li>（2）将拥塞发生的信息传送到可采取行动的地方。</li><li>（3）调整网络系统的运行以解决出现的问题。</li></ul></li></ul></li></ul><h3 id="5-8-2-TCP-的拥塞控制方法"><a href="#5-8-2-TCP-的拥塞控制方法" class="headerlink" title="5.8.2 TCP 的拥塞控制方法"></a>5.8.2 TCP 的拥塞控制方法</h3><ul><li>TCP 采用基于窗口的方法进行拥塞控制。该方法属于闭环控制方法。</li><li>TCP 发送方维持一个拥塞窗口 CWND (Congestion Window) 拥塞窗口的大小取决于网络的拥塞程度，并且动态地在变化。</li><li>发送端利用拥塞窗口根据网络的拥塞情况调整发送的数据量。</li><li>所以，发送窗口大小不仅取决于接收方公告的接收窗口，还取决于网络的拥塞状况</li><li>判断网络拥塞的依据是出现超时</li><li>TCP 进行拥塞控制的算法：慢开始，拥塞避免，快重传，快恢复</li></ul><h4 id="慢开始和拥塞避免"><a href="#慢开始和拥塞避免" class="headerlink" title="慢开始和拥塞避免"></a>慢开始和拥塞避免</h4><ul><li>慢开始算法：当主机开始发送数据时，由于并不清楚网络的负荷情况，所以如果立即把大量数据字节注入到网络，那么就有可能引起网络发生拥塞，经验证明，较好的方法是先探测以下，即由小到大逐渐增大发送窗口，也就是说，由小到大逐渐增大拥塞窗口数值</li><li>慢开始规定，在每收到一个新的报文段的确认后，可以把拥塞窗口增加最多一个 SMSS（发送方的最大报文段）的数值。<ul><li>拥塞窗口每次的增加量：min（N，SMSS）</li></ul></li><li>使用慢开始算法后，每经过一个传输轮次 (transmission round)，拥塞窗口 cwnd 就加倍。</li><li>一个传输轮次所经历的时间其实就是往返时间 RTT。</li><li>“传输轮次”更加强调：把拥塞窗口 cwnd 所允许发送的报文段都连续发送出去，并收到了对已发送的最后一个字节的确认。</li><li>例如，拥塞窗口 cwnd = 4，这时的往返时间 RTT 就是发送方连续发送 4 个报文段，并收到这 4 个报文段的确认，总共经历的时间。</li><li>慢开始门限 ssthresh 的用法如下：<ul><li>当 cwnd &lt; ssthresh 时，使用慢开始算法。</li><li>当 cwnd &gt; ssthresh 时，停止使用慢开始算法而改用拥塞避免算法。</li><li>当 cwnd = ssthresh 时，既可使用慢开始算法，也可使用拥塞避免算法。</li></ul></li><li>拥塞避免算法：让拥塞窗口 cwnd 缓慢地增大，即每经过一个往返时间 RTT 就把发送方的拥塞窗口 cwnd 加 1，而不是加倍，使拥塞窗口 cwnd 按线性规律缓慢增长，比慢开始算法的拥塞窗口增长速率缓慢得多。</li><li>因此在拥塞避免阶段就有“加法增大” (Additive Increase) 的特点。这表明在拥塞避免阶段，拥塞窗口 cwnd 按线性规律缓慢增长，比慢开始算法的拥塞窗口增长速率缓慢得多。</li></ul><h4 id="快重传算法："><a href="#快重传算法：" class="headerlink" title="快重传算法："></a>快重传算法：</h4><ul><li>采用快重传 FR (Fast Retransmission) 算法可以让发送方尽早知道发生了个别报文段的丢失。</li><li>快重传 算法首先要求接收方不要等待自己发送数据时才进行捎带确认，而是要立即发送确认，即使收到了失序的报文段也要立即发出对已收到的报文段的重复确认</li><li>发送方只要一连收到三个重复确认，就知道接收方确实没有收到报文段，因而应当立即进行重传（即“快重传”），这样就不会出现超时，发送方也不就会误认为出现了网络拥塞。</li><li>使用快重传可以使整个网络的吞吐量提高约 20%。</li><li>不难看出，快重传并非取消重传计时器，而是在某些情况下可更早地重传丢失的报文段。</li></ul><h4 id="快恢复算法"><a href="#快恢复算法" class="headerlink" title="快恢复算法"></a>快恢复算法</h4><h3 id="5-8-3-主动队列管理"><a href="#5-8-3-主动队列管理" class="headerlink" title="5.8.3 主动队列管理"></a>5.8.3 主动队列管理</h3><h2 id="5-9-TCP-的运输连接管理"><a href="#5-9-TCP-的运输连接管理" class="headerlink" title="5.9 TCP 的运输连接管理"></a>5.9 TCP 的运输连接管理</h2><h3 id="5-9-1-TCP-的连接建立"><a href="#5-9-1-TCP-的连接建立" class="headerlink" title="5.9.1 TCP 的连接建立"></a>5.9.1 TCP 的连接建立</h3><ul><li>TCP 建立连接的过程叫做握手</li><li>握手需要在客户和服务器之间交换三个 TCP 报文段。称之为三报文握手。</li><li>采用三报文握手主要是为了防止已失效的连接请求报文段突然又传送到了，因而产生错误。</li><li>一开始 B 的 TCP 服务器进程先创建传输控制块 TCB，A 的 TCP 客户进程也是首先创建传输控制模块 TCB</li><li>A 的 TCP 向 B 发出连接请求报文段，其首部中的同步位 SYN = 1，并选择序号 seq = x，表明传送数据时的第一个数据字节的序号是 x。TCP 规定 SYN 报文段不能携带数据，但要消耗一个序号</li><li>B 的 TCP 收到连接请求报文段后，如同意，则发回确认。B 在确认报文段中应使 SYN = 1，使 ACK = 1，其确认号 ack = x + 1，自己选择的序号 seq = y。</li><li>A 收到此报文段后向 B 给出确认，其 ACK = 1，确认号 ack = y + 1。A 的 TCP 通知上层应用进程，连接已经建立。 B 的 TCP 收到主机 A 的确认后，也通知其上层应用进程：TCP 连接已经建立。</li></ul><h3 id="5-9-2-TCP-的连接释放"><a href="#5-9-2-TCP-的连接释放" class="headerlink" title="5.9.2 TCP 的连接释放"></a>5.9.2 TCP 的连接释放</h3><ul><li>数据传输结束后，通信的双方都可释放连接。</li><li>TCP 连接释放过程是四报文握手。</li><li>连接释放报文段首部的终止控制位 FIN</li><li>数据传输结束后，通信的双方都可释放连接。</li><li>现在 A 的应用进程先向其 TCP 发出连接释放报文段，并停止再发送数据，主动关闭 TCP 连接。</li><li>A 把连接释放报文段首部的 FIN = 1，其序号 seq = u，等待 B 的确认。</li><li>B 发出确认，确认号 ack = u + 1，而这个报文段自己的序号 seq = v。</li><li>TCP 服务器进程通知高层应用进程。</li><li>从 A 到 B 这个方向的连接就释放了，TCP 连接处于半关闭状态。B 若发送数据，A 仍要接收。</li><li>若 B 已经没有要向 A 发送的数据，其应用进程就通知 TCP 释放连接。</li><li>A 收到连接释放报文段后，必须发出确认。在确认报文段中 ACK = 1，确认号 ack = w + 1，自己的序号 seq = u + 1，然后进入 TIME-WAIT 状态。</li><li>为什么 A 在 TIME-WAIT 状态必须等待 2MSL：<ul><li>（1）第一，为了保证 A 发送的最后一个 ACK 报文段能够到达 B。</li><li>（2）第二，防止 “已失效的连接请求报文段” 出现在本连接中。A 在发送完最后一个 ACK 报文段后，再经过时间 2MSL，就可以使本连接持续的时间内所产生的所有报文段，都从网络中消失。这样就可以使下一个新的连接中不会出现这种旧的连接请求报文段。</li></ul></li></ul><h1 id="第六章-应用层"><a href="#第六章-应用层" class="headerlink" title="第六章 应用层"></a>第六章 应用层</h1><ul><li>应用层协议是为了解决某一类应用问题，而问题的解决往往是通过位于不同主机中的多个应用进程之间的通信和协同工作来完成的。</li><li>应用层的具体内容就是规定应用进程在通信时所遵循的协议</li><li>应用层的许多协议都是基于 C/S 模式，客户和服务器都是通信中所涉及的两个应用进程</li></ul><h2 id="6-1-域名系统-DNS"><a href="#6-1-域名系统-DNS" class="headerlink" title="6.1 域名系统 DNS"></a>6.1 域名系统 DNS</h2><h3 id="6-1-1-域名系统概述"><a href="#6-1-1-域名系统概述" class="headerlink" title="6.1.1 域名系统概述"></a>6.1.1 域名系统概述</h3><ul><li>许多应用层软件经常直接使用域名系统 DNS (Domain Name System)，但计算机的用户只是间接而不是直接使用域名系统。</li><li>互联网采用层次结构的命名树作为主机的名字，并使用分布式的域名系统 DNS。</li><li>名字到 IP 地址的解析是由若干个域名服务器程序完成的。域名服务器程序在专设的结点上运行，运行该程序的机器称为域名服务器。</li></ul><h4 id="互联网采用了层次树状结构的命名方法。"><a href="#互联网采用了层次树状结构的命名方法。" class="headerlink" title="互联网采用了层次树状结构的命名方法。"></a>互联网采用了层次树状结构的命名方法。</h4><ul><li>任何一个连接在互联网上的主机或路由器，都有一个唯一 的层次结构的名字，即域名。</li><li>域名的结构由标号序列组成，各标号之间用点隔开：… . 三级域名 . 二级域名 . 顶级域名</li><li>各标号分别代表不同级别的域名。</li><li>域名只是个逻辑概念，并不代表计算机所在的物理地点。</li><li>变长的域名和使用有助记忆的字符串，是为了便于人来使用</li><li>每一个域名中“点”的数目则不一定正好是三个</li></ul><h4 id="顶级域名："><a href="#顶级域名：" class="headerlink" title="顶级域名："></a>顶级域名：</h4><ul><li>（1）国家顶级域名 nTLD<ul><li>.cn 表示中国</li><li>.us 表示美国</li><li>.uk 表示英国</li><li>等等</li></ul></li><li>（2）通用顶级域名 gTLD<ul><li>最早的顶级域名<ul><li>.com 公司和企业</li><li>.net 网络服务机构</li><li>.org 非盈利性组织</li><li>.edu 美国专用教育机构</li><li>.gov 美国专用政府部门</li><li>.mil 美国专用军事部门</li><li>.int 国际组织</li></ul></li><li>新增通用顶级域名<ul><li>.aero</li><li>.biz</li><li>.cat</li><li>.name</li><li>等等</li></ul></li></ul></li><li>（3）基础结构域名<ul><li>这种顶级域名只有一个，即 arpa 用于反响域名解析，因此又称为反向域名</li></ul></li></ul><h3 id="6-1-3-域名服务器"><a href="#6-1-3-域名服务器" class="headerlink" title="6.1.3 域名服务器"></a>6.1.3 域名服务器</h3><ul><li>一个服务器所管辖的范围叫做区</li><li>各单位根据具体情况来划分自己管辖范围的区。但在一个区中的所有节点必须是能够连通的。</li><li>每一个区设置相应的权限域名服务器，用来保存该区中的所有主机的域名到 IP 地址的映射。</li><li>DNS 服务器的管辖范围不是以“域”为单位，而是以“区”为单位。</li><li>域名服务器有以下四种类型：<ul><li>根域名服务器<ul><li>最高层次的域名服务器，也是最重要的域名服务器。所有的根域名服务器都知道所有的顶级域名服务器的域名和 IP 地址。</li><li>不管是哪一个本地域名服务器，若要对互联网上任何一个域名进行解析，只要自己无法解析，就首先求助于根域名服务器。</li><li>根域名服务器并不直接把域名直接转换成 IP 地址。</li><li>在使用迭代查询时，根域名服务器把下一步应当找的顶级域名服务器的 IP 地址告诉本地域名服务器。</li><li>根域名服务器共有 13 套装置，不是 13 个机器（a~m）</li></ul></li><li>顶级域名服务器<ul><li>顶级域名服务器（即 TLD 服务器）负责管理在该顶级域名注册的所有二级域名。</li></ul></li><li>权限域名服务器<ul><li>负责一个区的域名服务器</li></ul></li><li>本地域名服务器<ul><li>当一个主机发出 DNS 查询请求时，这个查询请求报文就发送给本地域名服务器</li><li>这种域名服务器有时也称为默认域名服务器；</li></ul></li></ul></li><li>提高域名服务器的可靠性：<ul><li>DNS 域名服务器都把数据复制到几个域名服务器来保存，其中的一个是主域名服务器，其他的是辅助域名服务器。</li><li>当主域名服务器出故障时，辅助域名服务器可以保证 DNS 的查询工作不会中断。</li><li>主域名服务器定期把数据复制到辅助域名服务器中，而更改数据只能在主域名服务器中进行。这样就保证了数据的一致性。</li></ul></li><li>域名解析过程：<ul><li>主机向本地域名服务器的查询一般都是采用递归查询。如果主机所询问的本地域名服务器不知道被查询域名的 IP 地址，那么本地域名服务器就以 DNS 客户的身份，向其他根域名服务器继续发出查询请求报文。</li><li>本地域名服务器向根域名服务器的查询通常是采用迭代查询。当根域名服务器收到本地域名服务器的迭代查询请求报文时，要么给出所要查询的 IP 地址，要么告诉本地域名服务器：“你下一步应当向哪一个域名服务器进行查询”。然后让本地域名服务器进行后续的查询。</li></ul></li><li>每个域名服务器都维护一个高速缓存，存放最近用过的名字以及从何处获得名字映射信息的记录</li></ul><h2 id="6-2-文件传送协议"><a href="#6-2-文件传送协议" class="headerlink" title="6.2 文件传送协议"></a>6.2 文件传送协议</h2><h3 id="6-2-1-FTP-概述"><a href="#6-2-1-FTP-概述" class="headerlink" title="6.2.1 FTP 概述"></a>6.2.1 FTP 概述</h3><ul><li>文件传送协议 FTP (File Transfer Protocol) 是互联网上使用得最广泛的文件传送协议。</li><li>FTP 提供交互式的访问，允许客户指明文件的类型与格式，并允许文件具有存取权限。</li><li>FTP 屏蔽了各计算机系统的细节，因而适合于在异构网络中任意计算机之间传送文件。</li><li>文件传送非常困难。原因是众多的计算机厂商研制出的文件系统多达数百种，且差别很大</li></ul><h3 id="6-2-2-FTP-的基本工作原理"><a href="#6-2-2-FTP-的基本工作原理" class="headerlink" title="6.2.2 FTP 的基本工作原理"></a>6.2.2 FTP 的基本工作原理</h3><ul><li>网络环境下复制文件的复杂性：<ul><li>（1）计算机存储数据的格式不同。</li><li>（2）文件的目录结构和文件命名的规定不同。</li><li>（3）对于相同的文件存取功能，操作系统使用的命令不同。</li><li>（4）访问控制方法不同。</li></ul></li><li>FTP 的特点：<ul><li>（1）只提供文件传送的一些基本的服务</li><li>（2）使用 TCP 可靠的运输服务</li><li>（3）减少消除在不同操作系统下处理文件的不兼容性</li><li>（4）FTP 使用 C/S 模式。一个 FTP 服务器进程可以同时为多个客户进程提供服务。</li><li>（5）FTP 的服务器进程有两大部分：<ul><li>一个主进程，负责接受新的请求；</li><li>若干个从属进程，负责处理单个请求</li></ul></li></ul></li><li>两个连接：<ul><li>控制连接：控制进程</li><li>数据连接：数据传送进程</li></ul></li><li>当客户进程向服务器进程发出建立连接请求时，要寻找连接服务器进程的熟知端口 (21)，同时还要告诉服务器进程自己的另一个端口号码，用于建立数据传送连接。接着，服务器进程用自己传送数据的熟知端口 (20) 与客户进程所提供的端口号码建立数据传送连接。由于 FTP 使用了两个不同的端口号，所以数据连接与控制连接不会发生混乱。</li><li>使用两个不同端口号：<ul><li>使协议更加简单和更容易实现。</li><li>在传输文件时还可以利用控制连接（例如，客户发送请求终止传输）。</li></ul></li></ul><h3 id="6-2-3-简单文件传送协议-TFTP"><a href="#6-2-3-简单文件传送协议-TFTP" class="headerlink" title="6.2.3 简单文件传送协议 TFTP"></a>6.2.3 简单文件传送协议 TFTP</h3><ul><li>TFTP (Trivial File Transfer Protocol) 是一个很小且易于实现的文件传送协议。</li><li>TFTP 使用客户服务器方式和使用 UDP 数据报，因此 TFTP 需要有自己的差错改正措施。</li><li>TFTP 只支持文件传输而不支持交互。</li><li>TFTP 没有一个庞大的命令集，没有列目录的功能，也不能对用户进行身份鉴别。</li><li>特点：<ul><li>（1）每次传送的数据 PDU 中有 512 字节的数据，但最后一次可不足 512 字节。</li><li>（2）数据 PDU 也称为文件块 (block)，每个块按序编号，从 1 开始。</li><li>（3）支持 ASCII 码或二进制传送。</li><li>（4）可对文件进行读或写。</li><li>（5）使用很简单的首部。</li></ul></li><li>TFTP 的工作很像停止等待协议</li></ul><h2 id="6-3-远程终端协议-TELNET"><a href="#6-3-远程终端协议-TELNET" class="headerlink" title="6.3 远程终端协议 TELNET"></a>6.3 远程终端协议 TELNET</h2><ul><li>TELNET 是一个简单的远程终端协议，也是互联网的正式标准。</li><li>用户用 TELNET 就可在其所在地通过 TCP 连接注册（即登录）到远地的另一个主机上（使用主机名或 IP 地址）。</li><li>TELNET 也使用客户服务器方式。在本地系统运行 TELNET 客户进程，而在远地主机则运行 TELNET 服务器进程。</li><li>和 FTP 的情况相似，服务器中的主进程等待新的请求，并产生从属进程来处理每一个连接</li><li>TELNET 使用网络虚拟终端 NVT 格式</li></ul><h2 id="6-4-万维网-WWW"><a href="#6-4-万维网-WWW" class="headerlink" title="6.4 万维网 WWW"></a>6.4 万维网 WWW</h2><h3 id="6-4-1-万维网概述"><a href="#6-4-1-万维网概述" class="headerlink" title="6.4.1 万维网概述"></a>6.4.1 万维网概述</h3><ul><li>万维网 WWW (World Wide Web) 并非某种特殊的计算机网络。</li><li>万维网是一个大规模的、联机式的储藏所。</li><li>万维网用链接的方法能非常方便地从互联网上的一个站点访问另一个站点，从而主动地按需获取丰富的信息。这种访问方式称为“链接”。</li><li>万维网提供分布式服务：</li><li>万维网是分布式超媒体系统，它是超文本系统的扩充。</li><li>一个超文本由多个信息源链接成。利用一个链接可使用户找到另一个文档。这些文档可以位于世界上任何一个接在互联网上的超文本系统中。超文本是万维网的基础。</li><li>超媒体与超文本的区别是文档内容不同。超文本文档仅包含文本信息，而超媒体文档还包含其他表示方式的信息，如图形、图像、声音、动画，甚至活动视频图像。</li><li>万维网的工作方式：<ul><li>（1）万维网以客户 - 服务器方式工作。</li><li>（2）浏览器就是在用户计算机上的万维网客户程序。万维网文档所驻留的计算机则运行服务器程序，因此这个计算机也称为万维网服务器。</li><li>（3）客户程序向服务器程序发出请求，服务器程序向客户程序送回客户所要的文档。</li><li>（4）在一个客户程序主窗口上显示出的万维网文档称为页面。</li></ul></li><li>万维网解决的问题：<ul><li>怎样标志分布在整个互联网上的万维网文档？<ul><li>使用统一资源定位符 URL 来标志万维网上的各种文档。</li><li>使每一个文档在整个互联网的范围内具有唯一的标识符 URL。</li></ul></li><li>用何协议实现万维网上各种超链的链接？<ul><li>在万维网客户程序与万维网服务器程序之间进行交互所使用的协议，是超文本传送协议 HTTP。</li><li>HTTP 是一个应用层协议，它使用 TCP 连接进行可靠的传送。</li></ul></li><li>怎样使各种万维网文档都能在互联网上的各种计算机上显示出来，同时使用户清楚地知道在什么地方存在着超链？<ul><li>超文本标记语言 HTML 使得万维网页面的设计者可以很方便地用一个超链从本页面的某处链接到互联网上的任何一个万维网页面，并且能够在自己的计算机屏幕上将这些页面显示出来。</li></ul></li><li>怎样使用户能够很方便地找到所需的信息？<ul><li>为了在万维网上方便地查找信息，用户可使用各种的搜索工具（即搜索引擎）。</li></ul></li></ul></li></ul><h3 id="6-4-2-统一资源定位符-URL"><a href="#6-4-2-统一资源定位符-URL" class="headerlink" title="6.4.2 统一资源定位符 URL"></a>6.4.2 统一资源定位符 URL</h3><ol><li>URL 的格式：URL 相当于一个文件名在网络范围的扩展<ul><li>字符对大小写无要求</li><li>:// 是格式规定</li><li>&lt; 主机 &gt; 是存放资源的主机在互联网中的域名</li><li>:&lt; 端口 &gt;/ &lt; 路径 &gt; 有时可以省略（http 的默认端口 80）</li></ul></li></ol><h3 id="6-4-3-超文本传送协议-HTTP"><a href="#6-4-3-超文本传送协议-HTTP" class="headerlink" title="6.4.3 超文本传送协议 HTTP"></a>6.4.3 超文本传送协议 HTTP</h3><ol><li>HTTP 的操作过程</li><li><p>HTTP 的主要特点</p><ul><li>HTTP 是面向事务的客户 - 服务器协议</li><li>HTTP 协议是无状态，持续连接的<ul><li>持续连接有两种工作方式：非流水线方式；流水线方式</li></ul></li><li>HTTP 协议本身也是无连接的，他使用了面向连接的 TCP 向上提供的服务</li></ul></li><li><p>代理服务器：</p><ul><li>代理服务器 (proxy server) 又称为万维网高速缓存 (Web cache)，它代表浏览器发出 HTTP 请求。</li><li>万维网高速缓存把最近的一些请求和响应暂存在本地磁盘中。</li><li>当与暂时存放的请求相同的新请求到达时，万维网高速缓存就把暂存的响应发送出去，而不需要按 URL 的地址再去互联网访问该资源</li><li>使用高速缓存可以减少访问互联网服务器的时延</li></ul></li><li><p>HTTP 的报文结构：</p><ul><li>HTTP 有两种报文：请求报文和响应报文</li><li>HTTP 是面向正文的，因此在报文中的每一个字段都是一些 ASCll 码串</li><li>报文由三个部分组成，即开始行、首部行和实体主体。</li><li>在请求报文中，开始行就是请求行。</li><li>“方法”是面向对象技术中使用的专门名词。所谓“方法”就是对所请求的对象进行的操作，因此这些方法实际上也就是一些命令。因此，请求报文的类型是由它所采用的方法决定的。</li><li>在响应报文中，开始行就是状态行</li><li>状态行包括三项内容，即 HTTP 的版本、状态码，以及解释状态码的简单短语。</li><li>状态码都是三位数字：<ul><li>1xx 表示通知信息的，如请求收到了或正在进行处理。</li><li>2xx 表示成功，如接受或知道了。</li><li>3xx 表示重定向，表示要完成请求还必须采取进一步的行动。</li><li>4xx 表示客户的差错，如请求中有错误的语法或不能完成。</li><li>5xx 表示服务器的差错，如服务器失效无法完成请求。</li></ul></li><li>在服务器上存放用户的信息<ul><li>万维网站点使用 Cookie 来跟踪用户。</li><li>Cookie 表示在 HTTP 服务器和客户之间传递的状态信息。</li><li>使用 Cookie 的网站服务器为用户产生一个唯一的识别码。利用此识别码，网站就能够跟踪该用户在该网站的活动。</li></ul></li></ul></li></ol><h3 id="6-4-4-万维网的文档"><a href="#6-4-4-万维网的文档" class="headerlink" title="6.4.4 万维网的文档"></a>6.4.4 万维网的文档</h3><ol><li><p>超文本标记语言 HTML</p><ul><li>超文本标记语言 HTML 中的 Markup 的意思就是“设置标记”。</li><li>HTML 定义了许多用于排版的命令（即标签）。</li><li>HTML 把各种标签嵌入到万维网的页面中。这样就构成了所谓的 HTML 文档。HTML 文档是一种可以用任何文本编辑器创建的 ASCII 码文件。</li><li>仅当 HTML 文档是以 .html 或 .htm 为后缀时，浏览器才对此文档的各种标签进行解释</li><li>HTML 还规定了链接的设置方法。每个链接都有一个起点和终点。</li><li>远程链接：超链的终点是其他网点上的页面。</li><li>本地链接：超链指向本计算机中的某个文件</li><li>XML：</li><li>XML (Extensible Markup Language) 是可扩展标记语言，它和 HTML 很相似。</li><li>但 XML 的设计宗旨是传输数据，而不是显示数据（HTML 是为了在浏览器上显示数据）。</li><li>XML 不是要替换 HTML，而是对 HTML 的补充</li><li>XHTML：是可扩展超文本标记语言，是更为严格的 HTML 版本</li><li>CSS 是层叠样式表，用于为 HTML 文档定义布局。<ul><li>CSS 与 HTML 的区别就是：HTML 用于结构化内容，而 CSS 则用于格式化结构化的内容</li></ul></li></ul></li><li><p>动态万维网文档：</p><ul><li>静态文档是指该文档创作完毕后就存放在万维网服务器中，在被用户浏览的过程中，内容不会改变。</li><li>动态文档是指文档的内容是在浏览器访问万维网服务器时才由应用程序动态创建。</li><li>动态文档和静态文档之间的主要差别体现在服务器一端。这主要是文档内容的生成方法不同。而从浏览器的角度看，这两种文档并没有区别。</li><li>通关网关接口 CGI：<ul><li>定义了动态文档应如何创建，输入数据应如何提供给应用程序，以及输出结果应如何使用</li><li>CGI 程序的正式名字是 CGI 脚本 (script) 或 cgi-bin 脚本。</li><li>“脚本”指的是一个程序，它被另一个程序（解释程序）而不是计算机的处理机来解释或执行。</li><li>脚本运行起来要比一般的编译程序要慢，因为它的每一条指令先要被另一个程序来处理（这就要一些附加的指令），而不是直接被指令处理器来处理。</li></ul></li></ul></li></ol><hr><h2 id="6-5-电子邮件"><a href="#6-5-电子邮件" class="headerlink" title="6.5 电子邮件"></a>6.5 电子邮件</h2><h3 id="6-5-1-电子邮件概述"><a href="#6-5-1-电子邮件概述" class="headerlink" title="6.5.1 电子邮件概述"></a>6.5.1 电子邮件概述</h3><ul><li><strong>电子邮件</strong> (e-mail) 是互联网上使用得最多的和最受用户欢迎的一种应用。</li><li>电子邮件把邮件发送到收件人使用的邮件服务器，并放在其中的收件人<strong>邮箱</strong>中，收件人可随时上网到自己使用的邮件服务器进行读取。</li><li>传递迅速，费用低廉。</li><li>发送邮件的协议：<strong>简单邮件传送协议 SMTP</strong>（7位ASCII码邮件）<br>读取邮件的协议：<strong>邮局协议POP3</strong> 和 <strong>IMAP</strong></li><li><strong>通用互联网邮件扩充MIME</strong> 在其邮件首部中说明了邮件的数据类型（如文本、声音、图像、视像等），使用 MIME 可在邮件中同时传送多种类型的数据。</li></ul><h4 id="电子邮件系统组成构件："><a href="#电子邮件系统组成构件：" class="headerlink" title="电子邮件系统组成构件："></a>电子邮件系统组成构件：</h4><ul><li><strong>用户代理</strong></li><li><strong>邮件服务器</strong></li><li><strong>邮件发送协议 &amp; 邮件读取协议</strong></li></ul><h4 id="用户代理-UA（电子邮件客户端软件）："><a href="#用户代理-UA（电子邮件客户端软件）：" class="headerlink" title="用户代理 UA（电子邮件客户端软件）："></a>用户代理 UA（电子邮件客户端软件）：</h4><ul><li>功能：<strong>撰写，显示，处理，通信</strong></li><li>邮件服务器按照<strong>客户-服务器方式</strong>工作</li></ul><h4 id="电子邮件组成："><a href="#电子邮件组成：" class="headerlink" title="电子邮件组成："></a>电子邮件组成：</h4><ul><li><strong>信封</strong></li><li><strong>内容</strong></li></ul><h4 id="电子邮件地址格式："><a href="#电子邮件地址格式：" class="headerlink" title="电子邮件地址格式："></a>电子邮件地址格式：</h4><p>收件人邮箱名@邮箱所在主机的域名</p><ul><li>符号“@”读作“at”，表示“在”的意思。</li></ul><hr><h3 id="6-5-2-简单邮件传送协议-SMTP"><a href="#6-5-2-简单邮件传送协议-SMTP" class="headerlink" title="6.5.2 简单邮件传送协议 SMTP"></a>6.5.2 简单邮件传送协议 SMTP</h3><ul><li>SMTP 规定了两个相互通信的 SMTP 进程之间如何交换信息。</li><li>SMTP 使用<strong>客户-服务器方式</strong>，发送方为 SMTP 客户，接收方为 SMTP 服务器。</li><li>SMTP 规定了 14 条命令和 21 种应答信息。</li></ul><h4 id="SMTP通信的三个阶段："><a href="#SMTP通信的三个阶段：" class="headerlink" title="SMTP通信的三个阶段："></a>SMTP通信的三个阶段：</h4><ol><li><strong>连接建立</strong>：SMTP 不使用中间的邮件服务器</li><li><strong>邮件传送</strong></li><li><strong>连接释放</strong>：邮件发送完毕，SMTP 应释放 TCP 连接</li></ol><hr><h3 id="6-5-3-电子邮件的信息格式"><a href="#6-5-3-电子邮件的信息格式" class="headerlink" title="6.5.3 电子邮件的信息格式"></a>6.5.3 电子邮件的信息格式</h3><ul><li>一个电子邮件分为<strong>信封</strong>和<strong>内容</strong>两大部分。</li><li>RFC 822 规定了邮件内容中<strong>首部</strong>(header) 格式，主体(body)部分由用户自由撰写。</li><li>邮件内容首部关键字：<ul><li><strong>To</strong>：收件人地址</li><li><strong>Subject</strong>：主题</li><li><strong>Cc</strong>：抄送</li><li><strong>Bcc</strong>：盲抄送（暗送）</li><li><strong>From</strong>：发件人地址</li><li><strong>Date</strong>：发信日期</li></ul></li></ul><hr><h3 id="6-5-4-邮件读取协议-POP3-和-IMAP"><a href="#6-5-4-邮件读取协议-POP3-和-IMAP" class="headerlink" title="6.5.4 邮件读取协议 POP3 和 IMAP"></a>6.5.4 邮件读取协议 POP3 和 IMAP</h3><ul><li><strong>POP3</strong>：邮局协议，使用 C/S 方式，简单、离线读取</li><li><strong>IMAP</strong>：网际报文存取协议，使用 C/S 方式，支持在线操作、多文件夹管理</li></ul><hr><h3 id="6-5-5-基于万维网的电子邮件"><a href="#6-5-5-基于万维网的电子邮件" class="headerlink" title="6.5.5 基于万维网的电子邮件"></a>6.5.5 基于万维网的电子邮件</h3><ul><li>浏览器与邮件服务器之间使用 <strong>HTTP 协议</strong>。</li><li>邮件服务器之间使用 <strong>SMTP 协议</strong>。</li></ul><hr><h2 id="6-6-动态主机配置协议-DHCP"><a href="#6-6-动态主机配置协议-DHCP" class="headerlink" title="6.6 动态主机配置协议 DHCP"></a>6.6 动态主机配置协议 DHCP</h2><ul><li>DHCP 提供<strong>即插即用连网</strong>机制。</li><li>主机启动时广播发送 DHCP 发现报文。</li><li>DHCP 服务器回应提供报文。</li><li>可使用 <strong>DHCP 中继代理</strong> 实现跨网段分配。</li></ul><hr><h2 id="附录：常用协议与端口对照表（部分）"><a href="#附录：常用协议与端口对照表（部分）" class="headerlink" title="附录：常用协议与端口对照表（部分）"></a>附录：常用协议与端口对照表（部分）</h2><div class="table-container"><table><thead><tr><th>协议</th><th>端口号</th><th>描述</th></tr></thead><tbody><tr><td>FTP</td><td>20/21</td><td>数据/控制连接</td></tr><tr><td>SSH</td><td>22</td><td>安全远程登录</td></tr><tr><td>TELNET</td><td>23</td><td>远程终端</td></tr><tr><td>SMTP</td><td>25</td><td>邮件发送</td></tr><tr><td>DNS</td><td>53</td><td>域名解析</td></tr><tr><td>HTTP</td><td>80</td><td>万维网服务</td></tr><tr><td>POP3</td><td>110</td><td>邮件接收</td></tr><tr><td>IMAP</td><td>143</td><td>邮件接收（高级）</td></tr><tr><td>HTTPS</td><td>443</td><td>加密的万维网服务</td></tr><tr><td>DHCP</td><td>67/68</td><td>服务器/客户端端口</td></tr></tbody></table></div><hr><h2 id="总结：网络层次与协议对应关系"><a href="#总结：网络层次与协议对应关系" class="headerlink" title="总结：网络层次与协议对应关系"></a>总结：网络层次与协议对应关系</h2><div class="table-container"><table><thead><tr><th>OSI 七层模型</th><th>TCP/IP 四层模型</th><th>主要协议</th></tr></thead><tbody><tr><td>应用层</td><td>应用层</td><td>HTTP、FTP、SMTP、DNS、DHCP</td></tr><tr><td>表示层</td><td>（合并）</td><td>SSL/TLS、MIME</td></tr><tr><td>会话层</td><td></td><td></td></tr><tr><td>运输层</td><td>运输层</td><td>TCP、UDP</td></tr><tr><td>网络层</td><td>网际层</td><td>IP、ICMP、ARP、RIP、OSPF</td></tr><tr><td>数据链路层</td><td>网络接口层</td><td>Ethernet、PPP、CSMA/CD</td></tr><tr><td>物理层</td><td></td><td>双绞线、光纤、无线、调制解调</td></tr></tbody></table></div><hr><blockquote><p>📌 <strong>提示</strong>：本笔记基于《计算机网络（第7版）》谢希仁 整理</p></blockquote></article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/assets/avatar.png" title="头像" alt="头像"><img class="post-copyright__author_img_front" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/assets/avatar.png" title="头像" alt="头像"></a><div class="post-copyright__author_name">Aurorp1g</div><div class="post-copyright__author_desc">Aurorp1g's Blog</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://aurorp1g.github.io/posts/1ad824a8.html">原创</a><a class="post-copyright-title"><span onclick='rm.copyPageUrl("https://aurorp1g.github.io/posts/1ad824a8.html")'>网络技术知识点</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="/assets/reward/weixin.jpg" target="_blank"><img class="post-qr-code-img" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/assets/reward/weixin.jpg" alt="微信"></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/assets/reward/zhifubao.jpg" target="_blank"><img class="post-qr-code-img" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/assets/reward/zhifubao.jpg" alt="支付宝"></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/personal/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display:none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://aurorp1g.github.io/posts/1ad824a8.html"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=网络技术知识点&amp;url=https://aurorp1g.github.io/posts/1ad824a8.html&amp;pic=/img/net_work.avif" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl(){var e=window.location.href,t=document.createElement("input");t.setAttribute("value",e),document.body.appendChild(t),t.select(),t.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(t)}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://aurorp1g.github.io" target="_blank">Aurorp1g Blog</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/Study/"><span class="tags-punctuation"><i class="anzhiyufont anzhiyu-icon-tag"></i></span> Study<span class="tagsPageCount">19</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="/img/jsjzcyl.jpeg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/cc9c528.html"><img class="prev-cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/img/AI_txt.jpg" onerror='onerror=null,src="/assets/gulp/post_404.jpg"' alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">基于VSCode的CTF工具开发方案</div></div></a></div><div class="next-post pull-right"><a href="/posts/8d4b7ae1.html"><img class="next-cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/img/jsjzcyl.jpeg" onerror='onerror=null,src="/assets/gulp/post_404.jpg"' alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">计算机组成原理</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size:1.5rem;margin-right:4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/posts/7ab040cc.html" title="Java_Study"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/img/Java_Study.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-03-10</div><div class="title">Java_Study</div></div></a></div><div><a href="/posts/ba04c951.html" title="HTML学习总结"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/img/HTML.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-03-11</div><div class="title">HTML学习总结</div></div></a></div><div><a href="/posts/9fd071e2.html" title="Java常用类总结"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/img/Java-C.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-03-19</div><div class="title">Java常用类总结</div></div></a></div><div><a href="/posts/5df87593.html" title="markdown基本操作"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/img/all_markdown_world.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-03-15</div><div class="title">markdown基本操作</div></div></a></div><div><a href="/posts/74313cf1.html" title="汇编语言笔记"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/img/Assembly.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-03-17</div><div class="title">汇编语言笔记</div></div></a></div><div><a href="/posts/4e95fd80.html" title="PWN基础"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/img/pwn.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-03-21</div><div class="title">PWN基础</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i> <span>评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)">匿名评论</a><a href="/privacy" style="margin-left:4px">隐私政策</a></div></div><div class="comment-wrap"><div><div id="giscus-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/assets/avatar.png" onerror='this.onerror=null,this.src="/assets/gulp/friend_404.gif"' alt="avatar"><div class="author-status"><img class="g-status" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/assets/gulp/status.webp" alt="status"></div></div><div class="author-info__description"><div class="twopeople"><div class="container" style="height:200px"><canvas class="illo" width="800" height="800" style="max-width:200px;max-height:200px;touch-action:none;width:640px;height:640px"></canvas></div></div><script defer src="/js/twopeoples.js"></script><script defer src="/js/zdog.dist.js"></script><script defer src="/js/twopeople.js" id="rendered-js"></script><style>.twopeople{margin:0;align-items:center;justify-content:center;text-align:center}.twopeople canvas{display:block;margin:0 auto;cursor:move}</style></div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">Aurorp1g</h1><div class="author-info__desc">Aurorp1g's Blog</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/Aurorp1g" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/2066996205" target="_blank" title="BiliBili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a></div></div></div></div><div class="card-widget card-announcement"><div class="item-headline"><a class="faa-parent animated-hover"><i class="fas fa-bullhorn fa-shake"></i></a><span>公告</span></div><div class="announcement_content"><center><b>--- 主域名 ---<br><a href="https://aurorp1g.github.io/" title="此线路部署于github" class="anno_content"><font color="#5ea6e5">aurorp1g.github.io 🍧</font></a></b></center></div><div id="welcome-info"></div><img id="notice-gif" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/assets/gulp/notice.gif" data-lazy-src="/assets/gulp/notice.gif" style="width:100%;border-radius:10px;display:none" alt="可爱捏" title="可爱捏"><script>function mountNotice(){const e=document.getElementById("notice-gif");e&&e.remove();const t=document.createElement("img");t.id="notice-gif",t.src="/assets/gulp/notice.gif",t.alt=t.title="可爱捏",t.style.cssText="width:100%;border-radius:10px;display:none",t.onerror=()=>t.remove(),t.onload=()=>t.style.display="block";const o=document.querySelector(".card-announcement");o&&o.appendChild(t)}mountNotice(),document.addEventListener("pjax:complete",mountNotice)</script></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E8%BF%B0"><span class="toc-number">1.</span> <span class="toc-text">第一章 概述</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%9C%A8%E4%BF%A1%E6%81%AF%E6%97%B6%E4%BB%A3%E4%B8%AD%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">1.1.</span> <span class="toc-text">1.1 计算机网络在信息时代中的作用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-%E4%BA%92%E8%81%94%E7%BD%91%E6%A6%82%E8%BF%B0"><span class="toc-number">1.2.</span> <span class="toc-text">1.2 互联网概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-1-%E7%BD%91%E7%BB%9C%E7%9A%84%E7%BD%91%E7%BB%9C"><span class="toc-number">1.2.1.</span> <span class="toc-text">1.2.1 网络的网络</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-2-%E4%BA%92%E8%81%94%E5%9F%BA%E7%A1%80%E7%BB%93%E6%9E%84%E5%8F%91%E5%B1%95%E7%9A%84%E4%B8%89%E4%B8%AA%E9%98%B6%E6%AE%B5"><span class="toc-number">1.2.2.</span> <span class="toc-text">1.2.2 互联基础结构发展的三个阶段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-3-%E4%BA%92%E8%81%94%E7%BD%91%E7%9A%84%E6%A0%87%E5%87%86%E5%8C%96%E5%B7%A5%E4%BD%9C"><span class="toc-number">1.2.3.</span> <span class="toc-text">1.2.3 互联网的标准化工作</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-%E4%BA%92%E8%81%94%E7%BD%91%E7%9A%84%E7%BB%84%E6%88%90"><span class="toc-number">1.3.</span> <span class="toc-text">1.3 互联网的组成</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-1-%E4%BA%92%E8%81%94%E7%BD%91%E7%9A%84%E8%BE%B9%E7%BC%98%E9%83%A8%E5%88%86"><span class="toc-number">1.3.1.</span> <span class="toc-text">1.3.1 互联网的边缘部分</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%A2%E6%88%B7-%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%96%B9%E5%BC%8F%EF%BC%9A"><span class="toc-number">1.3.1.1.</span> <span class="toc-text">客户 - 服务器方式：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9%E7%AD%89%E8%BF%9E%E6%8E%A5%E6%96%B9%E5%BC%8F%EF%BC%9AP2P"><span class="toc-number">1.3.1.2.</span> <span class="toc-text">对等连接方式：P2P</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-2-%E4%BA%92%E8%81%94%E7%BD%91%E7%9A%84%E6%A0%B8%E5%BF%83%E9%83%A8%E5%88%86"><span class="toc-number">1.3.2.</span> <span class="toc-text">1.3.2 互联网的核心部分</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E4%BA%A4%E6%8D%A2%E7%9A%84%E4%B8%BB%E8%A6%81%E7%89%B9%E7%82%B9%EF%BC%9A"><span class="toc-number">1.3.2.1.</span> <span class="toc-text">分组交换的主要特点：</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BC%98%E7%82%B9%EF%BC%9A"><span class="toc-number">1.3.2.1.1.</span> <span class="toc-text">优点：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E4%BA%A4%E6%8D%A2%E5%B8%A6%E6%9D%A5%E7%9A%84%E9%97%AE%E9%A2%98%EF%BC%9A"><span class="toc-number">1.3.2.1.2.</span> <span class="toc-text">分组交换带来的问题：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%89%E7%A7%8D%E4%BA%A4%E6%8D%A2%E7%9A%84%E6%AF%94%E8%BE%83%EF%BC%9A"><span class="toc-number">1.3.2.2.</span> <span class="toc-text">三种交换的比较：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-4-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%9C%A8%E6%88%91%E5%9B%BD%E7%9A%84%E5%8F%91%E5%B1%95"><span class="toc-number">1.4.</span> <span class="toc-text">1.4 计算机网络在我国的发展</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-5-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E7%B1%BB%E5%88%AB"><span class="toc-number">1.5.</span> <span class="toc-text">1.5 计算机网络的类别</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-5-1-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E5%AE%9A%E4%B9%89"><span class="toc-number">1.5.1.</span> <span class="toc-text">1.5.1 计算机网络的定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-5-2-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E7%B1%BB%E5%88%AB"><span class="toc-number">1.5.2.</span> <span class="toc-text">1.5.2 计算机网络的类别</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8C%89%E7%85%A7%E7%BD%91%E7%BB%9C%E7%9A%84%E4%BD%9C%E7%94%A8%E8%8C%83%E5%9B%B4%E8%BF%9B%E8%A1%8C%E5%88%86%E7%B1%BB%EF%BC%9A"><span class="toc-number">1.5.2.1.</span> <span class="toc-text">按照网络的作用范围进行分类：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8C%89%E7%85%A7%E7%BD%91%E7%BB%9C%E4%BD%BF%E7%94%A8%E8%80%85%E5%88%86%E7%B1%BB%EF%BC%9A"><span class="toc-number">1.5.2.2.</span> <span class="toc-text">按照网络使用者分类：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%A8%E6%9D%A5%E6%8A%8A%E7%94%A8%E6%88%B7%E6%8E%A5%E5%85%A5%E5%88%B0%E4%BA%92%E8%81%94%E7%BD%91%E7%9A%84%E7%BD%91%E7%BB%9C"><span class="toc-number">1.5.2.3.</span> <span class="toc-text">用来把用户接入到互联网的网络</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-6-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E6%80%A7%E8%83%BD"><span class="toc-number">1.6.</span> <span class="toc-text">1.6 计算机网络的性能</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-6-1-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87"><span class="toc-number">1.6.1.</span> <span class="toc-text">1.6.1 计算机网络的性能指标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-6-2-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E9%9D%9E%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87"><span class="toc-number">1.6.2.</span> <span class="toc-text">1.6.2 计算机网络的非性能指标</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-7-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span class="toc-number">1.7.</span> <span class="toc-text">1.7 计算机网络体系结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-7-1-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E7%9A%84%E5%BD%A2%E6%88%90"><span class="toc-number">1.7.1.</span> <span class="toc-text">1.7.1 计算机网络体系结构的形成</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-7-2-%E5%8D%8F%E8%AE%AE%E4%B8%8E%E5%88%92%E5%88%86%E5%B1%82%E6%AC%A1"><span class="toc-number">1.7.2.</span> <span class="toc-text">1.7.2 协议与划分层次</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-7-3-%E5%85%B7%E6%9C%89%E4%BA%94%E5%B1%82%E5%8D%8F%E8%AE%AE%E7%9A%84%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span class="toc-number">1.7.3.</span> <span class="toc-text">1.7.3 具有五层协议的体系结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-7-4-%E5%AE%9E%E4%BD%93%EF%BC%8C%E5%8D%8F%E8%AE%AE%EF%BC%8C%E6%9C%8D%E5%8A%A1%E5%92%8C%E6%9C%8D%E5%8A%A1%E8%AE%BF%E9%97%AE%E7%82%B9"><span class="toc-number">1.7.4.</span> <span class="toc-text">1.7.4 实体，协议，服务和服务访问点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-7-5-TCP-IP-%E7%9A%84%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span class="toc-number">1.7.5.</span> <span class="toc-text">1.7.5 TCP/IP 的体系结构</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E7%89%A9%E7%90%86%E5%B1%82"><span class="toc-number">2.</span> <span class="toc-text">第二章 物理层</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-%E7%89%A9%E7%90%86%E5%B1%82%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">2.1.</span> <span class="toc-text">2.1 物理层的基本概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-%E6%95%B0%E6%8D%AE%E9%80%9A%E4%BF%A1%E7%9A%84%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86"><span class="toc-number">2.2.</span> <span class="toc-text">2.2 数据通信的基础知识</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-1-%E6%95%B0%E6%8D%AE%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%A8%A1%E5%9E%8B"><span class="toc-number">2.2.1.</span> <span class="toc-text">2.2.1 数据通信系统的模型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-2-%E6%9C%89%E5%85%B3%E4%BF%A1%E9%81%93%E7%9A%84%E5%87%A0%E4%B8%AA%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">2.2.2.</span> <span class="toc-text">2.2.2 有关信道的几个基本概念</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-%E4%BF%A1%E9%81%93%E7%9A%84%E6%9E%81%E9%99%90%E5%AE%B9%E9%87%8F"><span class="toc-number">2.3.</span> <span class="toc-text">2.3 信道的极限容量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-%E7%89%A9%E7%90%86%E5%B1%82%E4%B8%8B%E9%9D%A2%E7%9A%84%E4%BC%A0%E8%BE%93%E5%AA%92%E4%BD%93"><span class="toc-number">2.4.</span> <span class="toc-text">2.3 物理层下面的传输媒体</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-1-%E5%AF%BC%E5%BC%95%E5%9E%8B%E4%BC%A0%E8%BE%93%E5%AA%92%E4%BD%93"><span class="toc-number">2.4.1.</span> <span class="toc-text">2.3.1 导引型传输媒体</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-2-%E9%9D%9E%E5%BC%95%E5%AF%BC%E5%9E%8B%E4%BC%A0%E8%BE%93%E5%AA%92%E4%BD%93"><span class="toc-number">2.4.2.</span> <span class="toc-text">2.3.2 非引导型传输媒体</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4-%E4%BF%A1%E9%81%93%E5%A4%8D%E7%94%A8%E6%8A%80%E6%9C%AF"><span class="toc-number">2.5.</span> <span class="toc-text">2.4 信道复用技术</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-1-%E9%A2%91%E5%88%86%E5%A4%8D%E7%94%A8%EF%BC%8C%E6%97%B6%E5%88%86%E5%A4%8D%E7%94%A8%E5%92%8C%E7%BB%9F%E8%AE%A1%E6%97%B6%E5%88%86%E5%A4%8D%E7%94%A8"><span class="toc-number">2.5.1.</span> <span class="toc-text">2.4.1 频分复用，时分复用和统计时分复用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-5-%E6%95%B0%E5%AD%97%E4%BC%A0%E8%BE%93%E7%B3%BB%E7%BB%9F"><span class="toc-number">2.6.</span> <span class="toc-text">2.5 数字传输系统</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-6-%E5%AE%BD%E5%B8%A6%E6%8E%A5%E5%85%A5%E6%8A%80%E6%9C%AF"><span class="toc-number">2.7.</span> <span class="toc-text">2.6 宽带接入技术</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-1-ADSL-%E6%8A%80%E6%9C%AF"><span class="toc-number">2.7.1.</span> <span class="toc-text">2.6.1 ADSL 技术</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-2-%E5%85%89%E7%BA%BF%E5%90%8C%E8%BD%B4%E6%B7%B7%E5%90%88%E7%BD%91"><span class="toc-number">2.7.2.</span> <span class="toc-text">2.6.2 光线同轴混合网</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-3-FTTx-%E6%8A%80%E6%9C%AF"><span class="toc-number">2.7.3.</span> <span class="toc-text">2.6.3 FTTx 技术</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E7%AB%A0-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82"><span class="toc-number">3.</span> <span class="toc-text">第三章 数据链路层</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-%E4%BD%BF%E7%94%A8%E7%82%B9%E5%AF%B9%E7%82%B9%E4%BF%A1%E9%81%93%E7%9A%84%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82"><span class="toc-number">3.1.</span> <span class="toc-text">3.1 使用点对点信道的数据链路层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-1-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%92%8C%E5%B8%A7"><span class="toc-number">3.1.1.</span> <span class="toc-text">3.1.1 数据链路和帧</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-2-%E4%B8%89%E4%B8%AA%E5%9F%BA%E6%9C%AC%E9%97%AE%E9%A2%98"><span class="toc-number">3.1.2.</span> <span class="toc-text">3.1.2 三个基本问题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-%E7%82%B9%E5%AF%B9%E7%82%B9%E5%8D%8F%E8%AE%AE-PPP"><span class="toc-number">3.2.</span> <span class="toc-text">3.2 点对点协议 PPP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-1-PPP-%E5%8D%8F%E8%AE%AE%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">3.2.1.</span> <span class="toc-text">3.2.1 PPP 协议的特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-2-PPP-%E5%8D%8F%E8%AE%AE%E7%9A%84%E5%B8%A7%E6%A0%BC%E5%BC%8F"><span class="toc-number">3.2.2.</span> <span class="toc-text">3.2.2 PPP 协议的帧格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-3-PPP-%E5%8D%8F%E8%AE%AE%E7%9A%84%E5%B7%A5%E4%BD%9C%E7%8A%B6%E6%80%81"><span class="toc-number">3.2.3.</span> <span class="toc-text">3.2.3 PPP 协议的工作状态</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-%E4%BD%BF%E7%94%A8%E5%B9%BF%E6%92%AD%E4%BF%A1%E9%81%93%E7%9A%84%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82"><span class="toc-number">3.3.</span> <span class="toc-text">3.3 使用广播信道的数据链路层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-1-%E5%B1%80%E5%9F%9F%E7%BD%91%E7%9A%84%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82"><span class="toc-number">3.3.1.</span> <span class="toc-text">3.3.1 局域网的数据链路层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-2-CSMA-CD-%E5%8D%8F%E8%AE%AE"><span class="toc-number">3.3.2.</span> <span class="toc-text">3.3.2 CSMA/CD 协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-3-%E4%BD%BF%E7%94%A8%E9%9B%86%E7%BA%BF%E5%99%A8%E7%9A%84%E6%98%9F%E5%BD%A2%E6%8B%93%E6%89%91"><span class="toc-number">3.3.3.</span> <span class="toc-text">3.3.3 使用集线器的星形拓扑</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-4-%E4%BB%A5%E5%A4%AA%E7%BD%91%E7%9A%84%E4%BF%A1%E9%81%93%E5%88%A9%E7%94%A8%E7%8E%87"><span class="toc-number">3.3.4.</span> <span class="toc-text">3.3.4 以太网的信道利用率</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-5-%E4%BB%A5%E5%A4%AA%E7%BD%91%E7%9A%84-MAC-%E7%9A%84%E5%B1%82"><span class="toc-number">3.3.5.</span> <span class="toc-text">3.3.5 以太网的 MAC 的层</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-4-%E6%89%A9%E5%B1%95%E7%9A%84%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="toc-number">3.4.</span> <span class="toc-text">3.4 扩展的以太网</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-1-%E5%9C%A8%E7%89%A9%E7%90%86%E5%B1%82%E6%89%A9%E5%B1%95%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="toc-number">3.4.1.</span> <span class="toc-text">3.4.1 在物理层扩展以太网</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-2-%E5%9C%A8%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E6%89%A9%E5%B1%95%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="toc-number">3.4.2.</span> <span class="toc-text">3.4.2 在数据链路层扩展以太网</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-3-%E8%99%9A%E6%8B%9F%E5%B1%80%E5%9F%9F%E7%BD%91"><span class="toc-number">3.4.3.</span> <span class="toc-text">3.4.3 虚拟局域网</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-5-%E9%AB%98%E9%80%9F%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="toc-number">3.5.</span> <span class="toc-text">3.5 高速以太网</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-1-100BASE-T-%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="toc-number">3.5.1.</span> <span class="toc-text">3.5.1 100BASE-T 以太网</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-2-%E5%90%89%E6%AF%94%E7%89%B9%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="toc-number">3.5.2.</span> <span class="toc-text">3.5.2 吉比特以太网</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-3-10-%E5%90%89%E6%AF%94%E7%89%B9%E4%BB%A5%E5%A4%AA%E7%BD%91-10GE-%E5%92%8C%E6%9B%B4%E5%BF%AB%E7%9A%84%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="toc-number">3.5.3.</span> <span class="toc-text">3.5.3 10 吉比特以太网 (10GE) 和更快的以太网</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-4-%E4%BD%BF%E7%94%A8%E4%BB%A5%E5%A4%AA%E7%BD%91%E8%BF%9B%E8%A1%8C%E5%AE%BD%E5%B8%A6%E6%8E%A5%E5%85%A5"><span class="toc-number">3.5.4.</span> <span class="toc-text">3.5.4 使用以太网进行宽带接入</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E7%AB%A0-%E7%BD%91%E7%BB%9C%E5%B1%82"><span class="toc-number">4.</span> <span class="toc-text">第四章 网络层</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-%E7%BD%91%E7%BB%9C%E5%B1%82%E6%8F%90%E4%BE%9B%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%9C%8D%E5%8A%A1"><span class="toc-number">4.1.</span> <span class="toc-text">4.1 网络层提供的两种服务</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-%E7%BD%91%E9%99%85%E5%8D%8F%E8%AE%AE-IP"><span class="toc-number">4.2.</span> <span class="toc-text">4.2 网际协议 IP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-1-%E8%99%9A%E6%8B%9F%E4%BA%92%E8%BF%9E%E7%BD%91%E7%BB%9C"><span class="toc-number">4.2.1.</span> <span class="toc-text">4.2.1 虚拟互连网络</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-2-%E5%88%86%E7%B1%BB%E7%9A%84-IP-%E5%9C%B0%E5%9D%80"><span class="toc-number">4.2.2.</span> <span class="toc-text">4.2.2 分类的 IP 地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-3-IP-%E5%9C%B0%E5%9D%80%E4%B8%8E%E7%A1%AC%E4%BB%B6%E5%9C%B0%E5%9D%80"><span class="toc-number">4.2.3.</span> <span class="toc-text">4.2.3 IP 地址与硬件地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-4-%E5%9C%B0%E5%9D%80%E8%A7%A3%E6%9E%90%E5%8D%8F%E8%AE%AE-ARP"><span class="toc-number">4.2.4.</span> <span class="toc-text">4.2.4 地址解析协议 ARP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-5-IP-%E6%95%B0%E6%8D%AE%E6%8A%A5%E7%9A%84%E6%A0%BC%E5%BC%8F"><span class="toc-number">4.2.5.</span> <span class="toc-text">4.2.5 IP 数据报的格式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-3-%E5%88%92%E5%88%86%E5%AD%90%E7%BD%91%E5%92%8C%E6%9E%84%E9%80%A0%E8%B6%85%E7%BD%91"><span class="toc-number">4.3.</span> <span class="toc-text">4.3 划分子网和构造超网</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-1-%E5%88%92%E5%88%86%E5%AD%90%E7%BD%91"><span class="toc-number">4.3.1.</span> <span class="toc-text">4.3.1 划分子网</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-2-%E4%BD%BF%E7%94%A8%E5%AD%90%E7%BD%91%E6%97%B6%E5%88%86%E7%BB%84%E7%9A%84%E8%BD%AC%E5%8F%91"><span class="toc-number">4.3.2.</span> <span class="toc-text">4.3.2 使用子网时分组的转发</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-3-%E6%97%A0%E5%88%86%E7%B1%BB%E7%BC%96%E5%9D%80-CIDR%EF%BC%88%E6%9E%84%E9%80%A0%E8%B6%85%E7%BD%91%EF%BC%89"><span class="toc-number">4.3.3.</span> <span class="toc-text">4.3.3 无分类编址 CIDR（构造超网）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-4-%E7%BD%91%E9%99%85%E6%8E%A7%E5%88%B6%E6%8A%A5%E6%96%87%E5%8D%8F%E8%AE%AE-ICMP"><span class="toc-number">4.4.</span> <span class="toc-text">4.4 网际控制报文协议 ICMP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-1-ICMP-%E6%8A%A5%E6%96%87%E7%9A%84%E7%A7%8D%E7%B1%BB"><span class="toc-number">4.4.1.</span> <span class="toc-text">4.4.1 ICMP 报文的种类</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ICMP-%E6%8A%A5%E6%96%87%E7%9A%84%E7%A7%8D%E7%B1%BB"><span class="toc-number">4.4.1.1.</span> <span class="toc-text">ICMP 报文的种类</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#ICMP-%E5%B7%AE%E9%94%99%E6%8A%A5%E5%91%8A%E6%8A%A5%E6%96%87%E7%9A%84%E7%B1%BB%E5%9E%8B%EF%BC%9A"><span class="toc-number">4.4.1.1.1.</span> <span class="toc-text">ICMP 差错报告报文的类型：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#ICMP-%E8%AF%A2%E9%97%AE%E6%8A%A5%E6%96%87%E7%9A%84%E7%B1%BB%E5%9E%8B%EF%BC%9A"><span class="toc-number">4.4.1.1.2.</span> <span class="toc-text">ICMP 询问报文的类型：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-2-ICMP-%E7%9A%84%E5%BA%94%E7%94%A8%E4%B8%BE%E4%BE%8B"><span class="toc-number">4.4.2.</span> <span class="toc-text">4.4.2 ICMP 的应用举例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-5-%E4%BA%92%E8%81%94%E7%BD%91%E7%9A%84%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE"><span class="toc-number">4.5.</span> <span class="toc-text">4.5 互联网的路由选择协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-1-%E6%9C%89%E5%85%B3%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE%E7%9A%84%E5%87%A0%E4%B8%AA%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">4.5.1.</span> <span class="toc-text">4.5.1 有关路由选择协议的几个基本概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-2-%E5%86%85%E9%83%A8%E7%BD%91%E5%85%B3%E5%8D%8F%E8%AE%AE-RIP"><span class="toc-number">4.5.2.</span> <span class="toc-text">4.5.2 内部网关协议 RIP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-3-%E5%86%85%E9%83%A8%E7%BD%91%E5%85%B3%E5%8D%8F%E8%AE%AE-OSPF"><span class="toc-number">4.5.3.</span> <span class="toc-text">4.5.3 内部网关协议 OSPF</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-4-%E5%A4%96%E9%83%A8%E7%BD%91%E5%85%B3%E5%8D%8F%E8%AE%AE-BGP"><span class="toc-number">4.5.4.</span> <span class="toc-text">4.5.4 外部网关协议 BGP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-5-%E8%B7%AF%E7%94%B1%E5%99%A8%E7%9A%84%E6%9E%84%E6%88%90"><span class="toc-number">4.5.5.</span> <span class="toc-text">4.5.5 路由器的构成</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-6-IPv6"><span class="toc-number">4.6.</span> <span class="toc-text">4.6 IPv6</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-6-1-IPv6-%E7%9A%84%E5%9F%BA%E6%9C%AC%E9%A6%96%E9%83%A8"><span class="toc-number">4.6.1.</span> <span class="toc-text">4.6.1 IPv6 的基本首部</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-6-2-IPv6-%E7%9A%84%E5%9C%B0%E5%9D%80"><span class="toc-number">4.6.2.</span> <span class="toc-text">4.6.2 IPv6 的地址</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-7-%E5%A4%9A%E6%92%AD"><span class="toc-number">4.7.</span> <span class="toc-text">4.7 多播</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-8-%E8%99%9A%E6%8B%9F%E4%B8%93%E7%94%A8%E7%BD%91%E5%92%8C%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2-NAT"><span class="toc-number">4.8.</span> <span class="toc-text">4.8 虚拟专用网和网络地址转换 NAT</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-9-%E5%A4%9A%E5%8D%8F%E8%AE%AE%E6%A0%87%E8%AE%B0%E4%BA%A4%E6%8D%A2-MPLS"><span class="toc-number">4.9.</span> <span class="toc-text">4.9 多协议标记交换 MPLS</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%BA%94%E7%AB%A0-%E8%BF%90%E8%BE%93%E5%B1%82"><span class="toc-number">5.</span> <span class="toc-text">第五章 运输层</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1-%E8%BF%90%E8%BE%93%E5%B1%82%E5%8D%8F%E8%AE%AE%E6%A6%82%E8%BF%B0"><span class="toc-number">5.1.</span> <span class="toc-text">5.1 运输层协议概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-1-%E8%BF%9B%E7%A8%8B%E4%B9%8B%E9%97%B4%E7%9A%84%E9%80%9A%E4%BF%A1"><span class="toc-number">5.1.1.</span> <span class="toc-text">5.1.1 进程之间的通信</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-2-%E8%BF%90%E8%BE%93%E5%B1%82%E7%9A%84%E4%B8%A4%E4%B8%AA%E4%B8%BB%E8%A6%81%E5%8D%8F%E8%AE%AE"><span class="toc-number">5.1.2.</span> <span class="toc-text">5.1.2 运输层的两个主要协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-3-%E8%BF%90%E8%BE%93%E5%B1%82%E7%9A%84%E7%AB%AF%E5%8F%A3"><span class="toc-number">5.1.3.</span> <span class="toc-text">5.1.3 运输层的端口</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2-%E7%94%A8%E6%88%B7%E6%95%B0%E6%8D%AE%E6%8A%A5%E5%8D%8F%E8%AE%AE-UDP"><span class="toc-number">5.2.</span> <span class="toc-text">5.2 用户数据报协议 UDP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-1-UDP-%E6%A6%82%E8%BF%B0"><span class="toc-number">5.2.1.</span> <span class="toc-text">5.2.1 UDP 概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-2-UDP-%E7%9A%84%E9%A6%96%E9%83%A8%E6%A0%BC%E5%BC%8F"><span class="toc-number">5.2.2.</span> <span class="toc-text">5.2.2 UDP 的首部格式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-3-%E4%BC%A0%E8%BE%93%E6%8E%A7%E5%88%B6%E5%8D%8F%E8%AE%AE-TCP-%E6%A6%82%E8%BF%B0"><span class="toc-number">5.3.</span> <span class="toc-text">5.3 传输控制协议 TCP 概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-1-TCP-%E6%9C%80%E4%B8%BB%E8%A6%81%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">5.3.1.</span> <span class="toc-text">5.3.1 TCP 最主要的特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-2-TCP-%E7%9A%84%E8%BF%9E%E6%8E%A5"><span class="toc-number">5.3.2.</span> <span class="toc-text">5.3.2 TCP 的连接</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">5.4.</span> <span class="toc-text">可靠传输的工作原理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-1-%E5%81%9C%E6%AD%A2%E7%AD%89%E5%BE%85%E5%8D%8F%E8%AE%AE"><span class="toc-number">5.4.1.</span> <span class="toc-text">5.4.1 停止等待协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-2-%E8%BF%9E%E7%BB%AD-ARQ-%E5%8D%8F%E8%AE%AE"><span class="toc-number">5.4.2.</span> <span class="toc-text">5.4.2 连续 ARQ 协议</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-5-TCP-%E6%8A%A5%E6%96%87%E6%AE%B5%E7%9A%84%E9%A6%96%E9%83%A8%E6%A0%BC%E5%BC%8F"><span class="toc-number">5.5.</span> <span class="toc-text">5.5 TCP 报文段的首部格式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-6-TCP-%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="toc-number">5.6.</span> <span class="toc-text">5.6 TCP 可靠传输的实现</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-6-1-TCP-%E4%BB%A5%E5%AD%97%E8%8A%82%E4%B8%BA%E5%8D%95%E4%BD%8D%E7%9A%84%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3"><span class="toc-number">5.6.1.</span> <span class="toc-text">5.6.1 TCP 以字节为单位的滑动窗口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-6-2-%E8%B6%85%E6%97%B6%E9%87%8D%E4%BC%A0%E6%97%B6%E9%97%B4%E7%9A%84%E9%80%89%E6%8B%A9"><span class="toc-number">5.6.2.</span> <span class="toc-text">5.6.2 超时重传时间的选择</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-6-3-%E9%80%89%E6%8B%A9%E7%A1%AE%E8%AE%A4-SACK"><span class="toc-number">5.6.3.</span> <span class="toc-text">5.6.3 选择确认 SACK</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-7-TCP-%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6"><span class="toc-number">5.7.</span> <span class="toc-text">5.7 TCP 流量控制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-7-1-%E5%88%A9%E7%94%A8%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E5%AE%9E%E7%8E%B0%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6"><span class="toc-number">5.7.1.</span> <span class="toc-text">5.7.1 利用滑动窗口实现流量控制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-7-2-TCP-%E7%9A%84%E4%BC%A0%E8%BE%93%E6%95%88%E7%8E%87"><span class="toc-number">5.7.2.</span> <span class="toc-text">5.7.2 TCP 的传输效率</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-8-TCP-%E7%9A%84%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6"><span class="toc-number">5.8.</span> <span class="toc-text">5.8 TCP 的拥塞控制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-8-1-%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E7%9A%84%E4%B8%80%E8%88%AC%E5%8E%9F%E7%90%86"><span class="toc-number">5.8.1.</span> <span class="toc-text">5.8.1 拥塞控制的一般原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-8-2-TCP-%E7%9A%84%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E6%96%B9%E6%B3%95"><span class="toc-number">5.8.2.</span> <span class="toc-text">5.8.2 TCP 的拥塞控制方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%85%A2%E5%BC%80%E5%A7%8B%E5%92%8C%E6%8B%A5%E5%A1%9E%E9%81%BF%E5%85%8D"><span class="toc-number">5.8.2.1.</span> <span class="toc-text">慢开始和拥塞避免</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BF%AB%E9%87%8D%E4%BC%A0%E7%AE%97%E6%B3%95%EF%BC%9A"><span class="toc-number">5.8.2.2.</span> <span class="toc-text">快重传算法：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BF%AB%E6%81%A2%E5%A4%8D%E7%AE%97%E6%B3%95"><span class="toc-number">5.8.2.3.</span> <span class="toc-text">快恢复算法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-8-3-%E4%B8%BB%E5%8A%A8%E9%98%9F%E5%88%97%E7%AE%A1%E7%90%86"><span class="toc-number">5.8.3.</span> <span class="toc-text">5.8.3 主动队列管理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-9-TCP-%E7%9A%84%E8%BF%90%E8%BE%93%E8%BF%9E%E6%8E%A5%E7%AE%A1%E7%90%86"><span class="toc-number">5.9.</span> <span class="toc-text">5.9 TCP 的运输连接管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-9-1-TCP-%E7%9A%84%E8%BF%9E%E6%8E%A5%E5%BB%BA%E7%AB%8B"><span class="toc-number">5.9.1.</span> <span class="toc-text">5.9.1 TCP 的连接建立</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-9-2-TCP-%E7%9A%84%E8%BF%9E%E6%8E%A5%E9%87%8A%E6%94%BE"><span class="toc-number">5.9.2.</span> <span class="toc-text">5.9.2 TCP 的连接释放</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%85%AD%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82"><span class="toc-number">6.</span> <span class="toc-text">第六章 应用层</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#6-1-%E5%9F%9F%E5%90%8D%E7%B3%BB%E7%BB%9F-DNS"><span class="toc-number">6.1.</span> <span class="toc-text">6.1 域名系统 DNS</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-1-%E5%9F%9F%E5%90%8D%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%BF%B0"><span class="toc-number">6.1.1.</span> <span class="toc-text">6.1.1 域名系统概述</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%92%E8%81%94%E7%BD%91%E9%87%87%E7%94%A8%E4%BA%86%E5%B1%82%E6%AC%A1%E6%A0%91%E7%8A%B6%E7%BB%93%E6%9E%84%E7%9A%84%E5%91%BD%E5%90%8D%E6%96%B9%E6%B3%95%E3%80%82"><span class="toc-number">6.1.1.1.</span> <span class="toc-text">互联网采用了层次树状结构的命名方法。</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A1%B6%E7%BA%A7%E5%9F%9F%E5%90%8D%EF%BC%9A"><span class="toc-number">6.1.1.2.</span> <span class="toc-text">顶级域名：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-3-%E5%9F%9F%E5%90%8D%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">6.1.2.</span> <span class="toc-text">6.1.3 域名服务器</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-2-%E6%96%87%E4%BB%B6%E4%BC%A0%E9%80%81%E5%8D%8F%E8%AE%AE"><span class="toc-number">6.2.</span> <span class="toc-text">6.2 文件传送协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-1-FTP-%E6%A6%82%E8%BF%B0"><span class="toc-number">6.2.1.</span> <span class="toc-text">6.2.1 FTP 概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-2-FTP-%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">6.2.2.</span> <span class="toc-text">6.2.2 FTP 的基本工作原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-3-%E7%AE%80%E5%8D%95%E6%96%87%E4%BB%B6%E4%BC%A0%E9%80%81%E5%8D%8F%E8%AE%AE-TFTP"><span class="toc-number">6.2.3.</span> <span class="toc-text">6.2.3 简单文件传送协议 TFTP</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-3-%E8%BF%9C%E7%A8%8B%E7%BB%88%E7%AB%AF%E5%8D%8F%E8%AE%AE-TELNET"><span class="toc-number">6.3.</span> <span class="toc-text">6.3 远程终端协议 TELNET</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-4-%E4%B8%87%E7%BB%B4%E7%BD%91-WWW"><span class="toc-number">6.4.</span> <span class="toc-text">6.4 万维网 WWW</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-1-%E4%B8%87%E7%BB%B4%E7%BD%91%E6%A6%82%E8%BF%B0"><span class="toc-number">6.4.1.</span> <span class="toc-text">6.4.1 万维网概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-2-%E7%BB%9F%E4%B8%80%E8%B5%84%E6%BA%90%E5%AE%9A%E4%BD%8D%E7%AC%A6-URL"><span class="toc-number">6.4.2.</span> <span class="toc-text">6.4.2 统一资源定位符 URL</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-3-%E8%B6%85%E6%96%87%E6%9C%AC%E4%BC%A0%E9%80%81%E5%8D%8F%E8%AE%AE-HTTP"><span class="toc-number">6.4.3.</span> <span class="toc-text">6.4.3 超文本传送协议 HTTP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-4-%E4%B8%87%E7%BB%B4%E7%BD%91%E7%9A%84%E6%96%87%E6%A1%A3"><span class="toc-number">6.4.4.</span> <span class="toc-text">6.4.4 万维网的文档</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-5-%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6"><span class="toc-number">6.5.</span> <span class="toc-text">6.5 电子邮件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-1-%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6%E6%A6%82%E8%BF%B0"><span class="toc-number">6.5.1.</span> <span class="toc-text">6.5.1 电子邮件概述</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%BB%84%E6%88%90%E6%9E%84%E4%BB%B6%EF%BC%9A"><span class="toc-number">6.5.1.1.</span> <span class="toc-text">电子邮件系统组成构件：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E4%BB%A3%E7%90%86-UA%EF%BC%88%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%BD%AF%E4%BB%B6%EF%BC%89%EF%BC%9A"><span class="toc-number">6.5.1.2.</span> <span class="toc-text">用户代理 UA（电子邮件客户端软件）：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6%E7%BB%84%E6%88%90%EF%BC%9A"><span class="toc-number">6.5.1.3.</span> <span class="toc-text">电子邮件组成：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6%E5%9C%B0%E5%9D%80%E6%A0%BC%E5%BC%8F%EF%BC%9A"><span class="toc-number">6.5.1.4.</span> <span class="toc-text">电子邮件地址格式：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-2-%E7%AE%80%E5%8D%95%E9%82%AE%E4%BB%B6%E4%BC%A0%E9%80%81%E5%8D%8F%E8%AE%AE-SMTP"><span class="toc-number">6.5.2.</span> <span class="toc-text">6.5.2 简单邮件传送协议 SMTP</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#SMTP%E9%80%9A%E4%BF%A1%E7%9A%84%E4%B8%89%E4%B8%AA%E9%98%B6%E6%AE%B5%EF%BC%9A"><span class="toc-number">6.5.2.1.</span> <span class="toc-text">SMTP通信的三个阶段：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-3-%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6%E7%9A%84%E4%BF%A1%E6%81%AF%E6%A0%BC%E5%BC%8F"><span class="toc-number">6.5.3.</span> <span class="toc-text">6.5.3 电子邮件的信息格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-4-%E9%82%AE%E4%BB%B6%E8%AF%BB%E5%8F%96%E5%8D%8F%E8%AE%AE-POP3-%E5%92%8C-IMAP"><span class="toc-number">6.5.4.</span> <span class="toc-text">6.5.4 邮件读取协议 POP3 和 IMAP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-5-%E5%9F%BA%E4%BA%8E%E4%B8%87%E7%BB%B4%E7%BD%91%E7%9A%84%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6"><span class="toc-number">6.5.5.</span> <span class="toc-text">6.5.5 基于万维网的电子邮件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-6-%E5%8A%A8%E6%80%81%E4%B8%BB%E6%9C%BA%E9%85%8D%E7%BD%AE%E5%8D%8F%E8%AE%AE-DHCP"><span class="toc-number">6.6.</span> <span class="toc-text">6.6 动态主机配置协议 DHCP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%99%84%E5%BD%95%EF%BC%9A%E5%B8%B8%E7%94%A8%E5%8D%8F%E8%AE%AE%E4%B8%8E%E7%AB%AF%E5%8F%A3%E5%AF%B9%E7%85%A7%E8%A1%A8%EF%BC%88%E9%83%A8%E5%88%86%EF%BC%89"><span class="toc-number">6.7.</span> <span class="toc-text">附录：常用协议与端口对照表（部分）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%B1%82%E6%AC%A1%E4%B8%8E%E5%8D%8F%E8%AE%AE%E5%AF%B9%E5%BA%94%E5%85%B3%E7%B3%BB"><span class="toc-number">6.8.</span> <span class="toc-text">总结：网络层次与协议对应关系</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/8d4b7ae1.html" title="计算机组成原理"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/img/jsjzcyl.jpeg" onerror='this.onerror=null,this.src="/assets/gulp/post_404.jpg"' alt="计算机组成原理"></a><div class="content"><a class="title" href="/posts/8d4b7ae1.html" title="计算机组成原理">计算机组成原理</a><time datetime="2025-07-31T10:32:21.000Z" title="发表于 2025-07-31 18:32:21">2025-07-31</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/1ad824a8.html" title="网络技术知识点"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/img/net_work.avif" onerror='this.onerror=null,this.src="/assets/gulp/post_404.jpg"' alt="网络技术知识点"></a><div class="content"><a class="title" href="/posts/1ad824a8.html" title="网络技术知识点">网络技术知识点</a><time datetime="2025-07-30T09:43:17.000Z" title="发表于 2025-07-30 17:43:17">2025-07-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/cc9c528.html" title="基于VSCode的CTF工具开发方案"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/img/AI_txt.jpg" onerror='this.onerror=null,this.src="/assets/gulp/post_404.jpg"' alt="基于VSCode的CTF工具开发方案"></a><div class="content"><a class="title" href="/posts/cc9c528.html" title="基于VSCode的CTF工具开发方案">基于VSCode的CTF工具开发方案</a><time datetime="2025-07-18T15:29:20.000Z" title="发表于 2025-07-18 23:29:20">2025-07-18</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="footer_deal"><a class="deal_link" href="mailto:2447175994@qq.com" title="email"><i class="anzhiyufont anzhiyu-icon-envelope"></i></a><a class="deal_link" href="/atom.xml" title="RSS"><i class="anzhiyufont anzhiyu-icon-rss"></i></a><img class="footer_mini_logo" title="返回顶部" alt="返回顶部" onclick="anzhiyu.scrollToDest(0,500)" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/assets/avatar.png" size="50px"><a class="deal_link" target="_blank" rel="noopener" href="https://github.com/Aurorp1g" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://space.bilibili.com/2066996205" title="Bilibili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a></div><div id="workboard"><img class="workSituationImg boardsign" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/assets/footer/A小屋-科研摸鱼中.svg" alt="距离月入25k也就还差一个大佬带我~" title="距离月入25k也就还差一个大佬带我~"><div id="runtimeTextTip"></div></div><div id="anzhiyu-footer"><div class="footer-group"><div class="footer-title">服务</div><div class="footer-links"><a class="footer-item" title="51la统计" target="_blank" rel="noopener" href="https://v6.51.la/">51la统计</a><a class="footer-item" title="十年之约" target="_blank" rel="noopener" href="https://www.foreverblog.cn/">十年之约</a><a class="footer-item" title="开启星辰之旅" target="_blank" rel="noopener" href="https://stellarium.org/">开启星辰之旅</a></div></div><div class="footer-group"><div class="footer-title">本站</div><div class="footer-links"><a class="footer-item" title="主题源码" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu">主题源码</a><a class="footer-item" title="更新日志" href="/update/">更新日志</a></div></div><div class="footer-group"><div class="footer-title">导航</div><div class="footer-links"><a class="footer-item" title="即刻短文" href="/essay/">即刻短文</a><a class="footer-item" title="留言信箱" href="/comments/">留言信箱</a></div></div><div class="footer-group"><div class="footer-title-group"><div class="footer-title">友链</div><a class="random-friends-btn" id="footer-random-friends-btn" href="javascript:addFriendLinksInFooter();" title="换一批友情链接"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right"></i></a></div><div class="footer-links" id="friend-links-in-footer"></div></div></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo_v5.4.0" title="博客框架为Hexo_v5.4.0"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/assets/footer/Frame-Hexo-blue.svg" alt="博客框架为Hexo_v5.4.0"></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" data-title="主题版本Butterfly_v4.3.1" title="主题版本Butterfly_v4.3.1"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/assets/footer/Theme-Butterfly-6513df.svg" alt="主题版本Butterfly_v4.3.1"></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" data-title="本网站源码由Github提供存储仓库" title="本网站源码由Github提供存储仓库"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/assets/footer/Source-Github-d021d6.svg" alt="本网站源码由Github提供存储仓库"></a><a class="github-badge" target="_blank" href="https://www.netdun.net/" style="margin-inline:5px" data-title="本站使用网盾星球提供CDN加速与防护" title="本站使用网盾星球提供CDN加速与防护"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/assets/footer/CDN-网盾星球-fff2cc.svg" alt="本站使用网盾星球提供CDN加速与防护"></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/assets/footer/Copyright-BY--NC--SA--4.svg" alt="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"></a></p></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">©2025 By <a class="footer-bar-link" href="/" title="Aurorp1g" target="_blank">Aurorp1g</a></div></div><div id="footer-type-tips"></div><div class="js-pjax"><script>function subtitleType(){fetch("https://v1.hitokoto.cn").then(t=>t.json()).then(t=>{{const e="出自 "+t.from,p=["人生如镜，你对它笑，它必回你以笑颜。","蹉跎只能感动自己，行动才能打动别人。","今日风起，明日雨至，世事皆有定数。","时间不待人，勇者方能留其芳华。","生命似未完书卷，待你书写传奇。","流沙般时光，越紧握越易逝，学会放手。","想，全是问题；做，才有答案。","雨滴落，自然书温柔诗行。","勇敢地迈出第一步，是治愈焦虑的良药。","风带走一切，包括留不住的美好。","树不语，年轮诉说岁月。","成功其实很简单，就是比失败击倒你们的次数多一次。","接纳自己的不完美、肯定和认可自己，是我们这一生重要的课题。","今日之我，为明日之我铺路。","心怀梦想，脚踏实地，未来可期。","知足常乐，珍惜当下，便是幸福。","人生如棋，落子无悔，步步精进。","努力提升自己，永远比仰望别人有意义","爱如暖阳，照耀他人，亦温暖自身。","你的迷茫，大多都是因为想得太多、做得太少。","岁月悠长，愿你心怀热忱，逐光前行。","微笑面对生活，生活必馈赠你微笑。","以梦为马，不负韶华，追逐理想。","世间美好，皆需用心感受，方能领略。","每一次努力，都是对未来的投资。","心有山水，眼有星辰，灵魂自有归处。","人生如旅，重要的是沿途风景与心情。","真正的强者，能在困境中绽放光芒。","生活不只眼前的苟且，还有诗和远方。","躲起来的星星也在努力发光，你也要加油。","无论是谁，只有努力多一点，人生的遗憾才会少一点。"];p.unshift(t.hitokoto,e),window.typed=new Typed("#footer-type-tips",{strings:p,startDelay:300,typeSpeed:150,loop:!0,backSpeed:50})}})}"function"==typeof Typed?subtitleType():getScript("https://cdn.cbd.int/typed.js@2.1.0/dist/typed.umd.js").then(subtitleType)</script></div></div><div class="footer-bar-right"><a class="footer-bar-link" href="/update" title="主题">主题</a><a class="footer-bar-link" target="_blank" rel="noopener" href="https://image.anheyu.com" title="图床">图床</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">30</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">11</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">8</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">个人网站</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="博客"><img class="back-menu-item-icon" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="/favicon.ico" alt="博客"><span class="back-menu-item-text">博客</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://github.com/Aurorp1g" title="GitHub"><img class="back-menu-item-icon" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="fab fa-github" alt="GitHub"><span class="back-menu-item-text">GitHub</span></a><a class="back-menu-item" href="https://aurorp1g.github.io/CTF_Zone/" title="CTF Zone"><img class="back-menu-item-icon" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="https://aurorp1g.github.io/CTF_Zone/img/icon.ico" alt="CTF Zone"><span class="back-menu-item-text">CTF Zone</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">实用工具</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="fas fa-cloud" alt="安知鱼图床"><span class="back-menu-item-text">安知鱼图床</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://www.vercount.one/" title="vercount计数"><img class="back-menu-item-icon" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="https://www.vercount.one/favicon.ico" alt="vercount计数"><span class="back-menu-item-text">vercount计数</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://icon.liiiu.cn/" title="万能图标"><img class="back-menu-item-icon" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="fas fa-icons" alt="万能图标"><span class="back-menu-item-text">万能图标</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://haowallpaper.com/" title="哲风壁纸"><img class="back-menu-item-icon" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/assets/gulp/post_404.jpg&quot;" data-lazy-src="https://haowallpaper.com/favicon.ico" alt="哲风壁纸"><span class="back-menu-item-text">哲风壁纸</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>文库</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size:.9em"></i> <span>归档</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size:.9em"></i> <span>分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size:.9em"></i> <span>标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>网站</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size:.9em"></i> <span>留言信箱</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/charts/"><i class="fa fa-pie-chart faa-tada"></i> <span>博客统计</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/update/"><i class="fa fa-history faa-tada"></i> <span>更新日志</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>导航</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/laboratory/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size:.9em"></i> <span>项目展示</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size:.9em"></i> <span>友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/equipment/"><i class="anzhiyufont anzhiyu-icon-dice-d20 faa-tada" style="font-size:.9em"></i> <span>我的装备</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>生活</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size:.9em"></i> <span>音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/personal/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size:.9em"></i> <span>相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/video/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size:.9em"></i> <span>视频库</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/personal/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size:.9em"></i> <span>本站</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="fa-solid fa-pen-fancy faa-tada"></i> <span>哔哔</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Daily-Life/" style="font-size:.88rem">Daily Life<sup>15</sup></a><a href="/tags/HTML/" style="font-size:.88rem">HTML<sup>1</sup></a><a href="/tags/Java/" style="font-size:.88rem">Java<sup>3</sup></a><a href="/tags/Linux/" style="font-size:.88rem">Linux<sup>1</sup></a><a href="/tags/Markdown/" style="font-size:.88rem">Markdown<sup>1</sup></a><a href="/tags/PWN/" style="font-size:.88rem">PWN<sup>1</sup></a><a href="/tags/Python/" style="font-size:.88rem">Python<sup>3</sup></a><a href="/tags/Study/" style="font-size:.88rem">Study<sup>19</sup></a><a href="/tags/%E5%A4%96%E6%8C%82%E6%A0%87%E7%AD%BE/" style="font-size:.88rem">外挂标签<sup>1</sup></a><a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" style="font-size:.88rem">操作系统<sup>2</sup></a><a href="/tags/%E6%B1%87%E7%BC%96/" style="font-size:.88rem">汇编<sup>1</sup></a></div></div><hr></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js type="local" audios="[{&quot;name&quot;:&quot;VORTEX&quot;,&quot;artist&quot;:&quot;白鲨JAWS&quot;,&quot;url&quot;:&quot;https://aurorp1g.github.io/music/mp3/VORTEX.mp3&quot;,&quot;cover&quot;:&quot;https://aurorp1g.github.io/music/cover/VORTEX.jpg&quot;,&quot;lrc&quot;:&quot;https://aurorp1g.github.io/music/lrc/VORTEX.lrc&quot;},{&quot;name&quot;:&quot;Follow(罗生门)&quot;,&quot;artist&quot;:&quot;梨冻紧&amp;张子豪&quot;,&quot;url&quot;:&quot;https://aurorp1g.github.io/music/mp3/Follow(罗生门).mp3&quot;,&quot;cover&quot;:&quot;https://aurorp1g.github.io/music/cover/Follow(罗生门).jpg&quot;,&quot;lrc&quot;:&quot;https://aurorp1g.github.io/music/lrc/Follow(罗生门).lrc&quot;},{&quot;name&quot;:&quot;第57次取消发送&quot;,&quot;artist&quot;:&quot;菲菲公主&quot;,&quot;url&quot;:&quot;https://aurorp1g.github.io/music/mp3/第57次取消发送.mp3&quot;,&quot;cover&quot;:&quot;https://aurorp1g.github.io/music/cover/第57次.jpg&quot;,&quot;lrc&quot;:&quot;https://aurorp1g.github.io/music/lrc/第57次取消发送.lrc&quot;},{&quot;name&quot;:&quot;降临&quot;,&quot;artist&quot;:&quot;Breen&quot;,&quot;url&quot;:&quot;https://aurorp1g.github.io/music/mp3/降临.mp3&quot;,&quot;cover&quot;:&quot;https://aurorp1g.github.io/music/cover/降临.jpg&quot;,&quot;lrc&quot;:&quot;https://aurorp1g.github.io/music/lrc/降临.lrc&quot;},{&quot;name&quot;:&quot;off the hook&quot;,&quot;artist&quot;:&quot;Jeff Jarvis&quot;,&quot;url&quot;:&quot;https://aurorp1g.github.io/music/mp3/off_the_hook.mp3&quot;,&quot;cover&quot;:&quot;https://aurorp1g.github.io/music/cover/off_the_hook.jpg&quot;,&quot;lrc&quot;:&quot;https://aurorp1g.github.io/music/lrc/off_the_hook.lrc&quot;},{&quot;name&quot;:&quot;Love With U&quot;,&quot;artist&quot;:&quot;Tess Ortega&quot;,&quot;url&quot;:&quot;https://aurorp1g.github.io/music/mp3/love_with_U.mp3&quot;,&quot;cover&quot;:&quot;https://aurorp1g.github.io/music/cover/love_with_U.jpg&quot;,&quot;lrc&quot;:&quot;https://aurorp1g.github.io/music/lrc/love_with_U.lrc&quot;},{&quot;name&quot;:&quot;Down 4u&quot;,&quot;artist&quot;:&quot;JuggShots&quot;,&quot;url&quot;:&quot;https://aurorp1g.github.io/music/mp3/Down_4u.mp3&quot;,&quot;cover&quot;:&quot;https://aurorp1g.github.io/music/cover/Down_4u.jpg&quot;,&quot;lrc&quot;:&quot;https://aurorp1g.github.io/music/lrc/Down_4u.lrc&quot;},{&quot;name&quot;:&quot;boyfriend (Explicit)&quot;,&quot;artist&quot;:&quot;Ariana Grande、Social House&quot;,&quot;url&quot;:&quot;https://aurorp1g.github.io/music/mp3/boyfriend.mp3&quot;,&quot;cover&quot;:&quot;https://aurorp1g.github.io/music/cover/boyfriend.jpg&quot;,&quot;lrc&quot;:&quot;https://aurorp1g.github.io/music/lrc/boyfriend.lrc&quot;}]"></meting-js></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="is-center" id="loading-database"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-pulse-icon"></i> <span>数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div><hr><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size:1rem"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;/music/&quot;, &quot;_blank&quot;);" style="display:none"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><script>var now1=new Date;function createtime1(){var o=new Date("03/01/2025 00:00:00");now1.setTime(now1.getTime()+250);var c=(now1-o)/1e3/60/60/24,n=["Welcome to Aurorp1g's blog!","Computer Enthusiast 🍭🍭🍭","\n █████╗ ██╗   ██╗██████╗  ██████╗ ██████╗ ██████╗  ██╗ ██████╗ \n██╔══██╗██║   ██║██╔══██╗██╔═══██╗██╔══██╗██╔══██╗███║██╔════╝ \n███████║██║   ██║██████╔╝██║   ██║██████╔╝██████╔╝╚██║██║  ███╗\n██╔══██║██║   ██║██╔══██╗██║   ██║██╔══██╗██╔═══╝  ██║██║   ██║\n██║  ██║╚██████╔╝██║  ██║╚██████╔╝██║  ██║██║      ██║╚██████╔╝\n╚═╝  ╚═╝ ╚═════╝ ╚═╝  ╚═╝ ╚═════╝ ╚═╝  ╚═╝╚═╝      ╚═╝ ╚═════╝ \n                                                              \n\n","小站已经苟活",Math.floor(c),"天啦!","©2025 By Aurorp1g"];setTimeout(console.log.bind(console,`\n%c${n[0]} %c ${n[1]} \n %c ${n[2]} %c${n[3]}%c ${n[4]}%c ${n[5]}\n\n%c ${n[6]}\n`,"color:#39c5bb","","color:#39c5bb","color:#39c5bb","","color:#39c5bb",""))}function createtime2(){var o=["NCC2-036","调用前置摄像头拍照成功，识别为「大聪明」📷️","Photo captured: "," 🤪 "];setTimeout(console.log.bind(console,`%c ${o[0]} %c ${o[1]} %c \n${o[2]} %c\n${o[3]}`,"color:white; background-color:#0d8d8fff","","",'background:url("https://unpkg.zhimg.com/anzhiyu-assets@latest/image/common/tinggge.gif") no-repeat;font-size:600%')),setTimeout(console.log.bind(console,"%c WELCOME %c 欢迎光临，大聪明","color:white; background-color:#1ca86eff","")),setTimeout(console.log.bind(console,"%c ⚡ Powered by Aurorp1g %c 你正在访问 Aurorp1g 的博客 🐳","color:#fadfa3; background-color:#030307; padding:5px 0;","")),setTimeout(console.warn.bind(console,"%c W23-12 %c 系统监测到你已打开控制台","color:white; background-color:#2B769F","")),setTimeout(console.warn.bind(console,"%c S013-782 %c 你现在正处于监控中···","color:white; background-color:#d9534f",""))}createtime1(),createtime2(),console.log=function(){},console.error=function(){},console.warn=function(){}</script><script async src="/js/random.js"></script><script async>!function(){var e,t,n,r,a,o,i,l=new Date("03/01/2025 00:00:00"),u=new Date,s=new Date("03/01/2025 00:00:00");setInterval(()=>{!function(){u=new Date,a=u.getHours(),o=Math.trunc(234e8+(u-s)/1e3*17),i=(o/1496e5).toFixed(6);var c=(u-l)/1e3/60/60/24;e=Math.floor(c);var d=(u-l)/1e3/60/60-24*e;t=Math.floor(d),1==String(t).length&&(t="0"+t);var h=(u-l)/1e3/60-1440*e-60*t;n=Math.floor(h),1==String(n).length&&(n="0"+n);var f=(u-l)/1e3-86400*e-3600*t-60*n;r=Math.round(f),1==String(r).length&&(r="0"+r)}(),function(){if(!document.getElementById("footer"))return;let l="";if(a<18&&a>=9)l=`本站居然运行了 ${e} 天<span id='runtime'> ${t} 小时 ${n} 分 ${r} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i><br> 旅行者 1 号当前距离地球 ${o} 千米，约为 ${i} 个天文单位 🚀`;else{let a=document.querySelector("#workboard .workSituationImg");null!=a&&(a.src="/assets/footer/A小屋-下班休息啦.svg",a.title="下班了就该开开心心的玩耍，嘿嘿~",a.alt="下班了就该开开心心的玩耍，嘿嘿~"),l=`本站居然运行了 ${e} 天<span id='runtime'> ${t} 小时 ${n} 分 ${r} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i><br> 旅行者 1 号当前距离地球 ${o} 千米，约为 ${i} 个天文单位 🚀`}document.getElementById("runtimeTextTip")&&(document.getElementById("runtimeTextTip").innerHTML=l)}()},1e3)}()</script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>if(window.MathJax)MathJax.startup.document.state(0),MathJax.texReset(),MathJax.typesetPromise();else{window.MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],tags:"ams"},chtml:{scale:1.1},options:{renderActions:{findScript:[10,t=>{for(const e of document.querySelectorAll('script[type^="math/tex"]')){const a=!!e.type.match(/; *mode=display/),n=new t.options.MathItem(e.textContent,t.inputJax[0],a),s=document.createTextNode("");e.parentNode.replaceChild(s,e),n.start={node:s,delim:"",n:0},n.end={node:s,delim:"",n:0},t.math.push(n)}},""]}}};const t=document.createElement("script");t.src="https://cdn.cbd.int/mathjax@3.2.2/es5/tex-mml-chtml.js",t.id="MathJax-script",t.async=!0,document.head.appendChild(t)}</script><script>(()=>{const e=document.querySelectorAll("#article-container .mermaid-wrap");if(0===e.length)return;const t=()=>{window.loadMermaid=!0;const t="dark"===document.documentElement.getAttribute("data-theme")?"dark":"default";Array.from(e).forEach((e,n)=>{const d=e.firstElementChild,r="mermaid-"+n,a="%%{init:{ 'theme':'"+t+"'}}%%\n"+d.textContent,i=mermaid.render(r,a);var m;"string"==typeof i?(m=i,d.insertAdjacentHTML("afterend",m)):i.then(({svg:e})=>{d.insertAdjacentHTML("afterend",e)})})},n=()=>{window.loadMermaid?t():getScript("https://cdn.cbd.int/mermaid@10.2.4/dist/mermaid.min.js").then(t)};anzhiyu.addGlobalFn("themeChange",t,"mermaid"),window.pjax?n():document.addEventListener("DOMContentLoaded",n)})()</script><script>(()=>{const t=t=>"dark"===t?"dark":"light",e=()=>{const e=Object.assign({src:"https://giscus.app/client.js","data-repo":"Aurorp1g/Aurorp1g.github.io","data-repo-id":"R_kgDON_6FSw","data-category-id":"DIC_kwDON_6FS84CtLN5","data-theme":t(document.documentElement.getAttribute("data-theme")),"data-reactions-enabled":"1",crossorigin:"anonymous",async:!0},{"data-lang":"zh-CN","data-mapping":"title","data-category":"Announcements","data-input-position":"bottom"}),a=document.createElement("script");for(let t in e)a.setAttribute(t,e[t]);document.getElementById("giscus-wrap").appendChild(a)};anzhiyu.addGlobalFn("themeChange",e=>{(t=>{const e=document.querySelector("iframe.giscus-frame");e&&e.contentWindow.postMessage({giscus:t},"https://giscus.app")})({setConfig:{theme:t(e)}})},"giscus"),e()})()</script><input type="hidden" name="page-type" id="page-type" value="post"></div><script async data-pjax="" src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.1/bubble/bubble.js"></script><script>var visitorMail=""</script><script async data-pjax="" src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><script src="/js/fomal.js"></script><script src="https://unpkg.com/hexo-tag-bilibili-card/components/bilibili-card/bilibili-card.js" async></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload='this.media="all"'><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="/js/meting.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors=["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"];var pjax=new Pjax({elements:'a:not([target="_blank"])',selectors:pjaxSelectors,cacheBust:!1,analytics:!1,scrollRestoration:!1});document.addEventListener("pjax:send",function(){if(anzhiyu.removeGlobalFnEvent("pjax"),anzhiyu.removeGlobalFnEvent("themeChange"),document.getElementById("rightside").classList.remove("rightside-show"),window.aplayers)for(let e=0;e<window.aplayers.length;e++)window.aplayers[e].options.fixed||window.aplayers[e].destroy();"object"==typeof typed&&typed.destroy();const e=document.body.classList;e.contains("read-mode")&&e.remove("read-mode")}),document.addEventListener("pjax:complete",()=>{window.lazyLoadInstance?.update()}),document.addEventListener("pjax:complete",function(){window.refreshFn(),document.querySelectorAll("script[data-pjax]").forEach(e=>{const t=document.createElement("script"),a=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach(e=>t.setAttribute(e.name,e.value)),t.appendChild(document.createTextNode(a)),e.parentNode.replaceChild(t,e)}),GLOBAL_CONFIG.islazyload&&window.lazyLoadInstance.update(),"function"==typeof panguInit&&panguInit(),"function"==typeof gtag&&gtag("config","",{page_path:window.location.pathname}),"object"==typeof _hmt&&_hmt.push(["_trackPageview",window.location.pathname]),"function"==typeof loadMeting&&document.getElementsByClassName("aplayer").length&&loadMeting(),"object"==typeof Prism&&Prism.highlightAll()}),document.addEventListener("pjax:error",e=>{404===e.request.status&&pjax.loadUrl("/404.html")})</script><script async data-pjax="" src="https://events.vercount.one/js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>